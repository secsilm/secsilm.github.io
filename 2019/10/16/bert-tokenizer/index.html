
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Alan Lee">
    <title>BERT æ˜¯å¦‚ä½•åˆ†è¯çš„ - Alan Lee</title>
    <meta name="author" content="Alan Lee">
    
        <meta name="keywords" content="hexo,python,tensorflow,pytorch,nlp,natural language processing,deep learning,machine learning,large language models,llms,">
    
    
        <link rel="icon" href="https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png">
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Alan Lee","sameAs":["https://github.com/secsilm","https://twitter.com/bluekirin93","mailto:secsilm@outlook.com"],"image":"https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png"},"articleBody":"\nBERT è¡¨ç¤º Bidirectional Encoder Representations from Transformersï¼Œæ˜¯ Google äº 2018 å¹´å‘å¸ƒçš„ä¸€ç§è¯­è¨€è¡¨ç¤ºæ¨¡å‹ã€‚è¯¥æ¨¡å‹ä¸€ç»å‘å¸ƒä¾¿æˆä¸ºäº‰ç›¸æ•ˆä»¿çš„å¯¹è±¡ï¼Œç›¸ä¿¡å¤§å®¶ä¹Ÿéƒ½å¤šå°‘å¬è¯´è¿‡ç ”ç©¶è¿‡äº†ã€‚æœ¬æ–‡ä¸»è¦èšç„¦äº BERT çš„åˆ†è¯æ–¹æ³•ï¼Œæ¨¡å‹å®ç°ç»†èŠ‚è§£è¯»è§ BERT æ˜¯å¦‚ä½•æ„å»ºæ¨¡å‹çš„ã€‚\nBERT æºç ä¸­ tokenization.py å°±æ˜¯é¢„å¤„ç†è¿›è¡Œåˆ†è¯çš„ç¨‹åºï¼Œä¸»è¦æœ‰ä¸¤ä¸ªåˆ†è¯å™¨ï¼šBasicTokenizer å’Œ WordpieceTokenizerï¼Œå¦å¤–ä¸€ä¸ª FullTokenizer æ˜¯è¿™ä¸¤ä¸ªçš„ç»“åˆï¼šå…ˆè¿›è¡Œ BasicTokenizer å¾—åˆ°ä¸€ä¸ªåˆ†å¾—æ¯”è¾ƒç²—çš„ token åˆ—è¡¨ï¼Œç„¶åå†å¯¹æ¯ä¸ª token è¿›è¡Œä¸€æ¬¡ WordpieceTokenizerï¼Œå¾—åˆ°æœ€ç»ˆçš„åˆ†è¯ç»“æœã€‚\nä¸ºäº†èƒ½ç›´è§‚çœ‹åˆ°æ¯ä¸€æ­¥å¤„ç†æ•ˆæœï¼Œæˆ‘ä¼šç”¨ä¸‹é¢è¿™ä¸ªè´¯ç©¿å§‹ç»ˆçš„ä¾‹å­æ¥è¯´æ˜ï¼Œè¯¥å¥ä¿®æ”¹è‡ª Keras çš„ç»´åŸºç™¾ç§‘ä»‹ç»ï¼š\n1example = &quot;Kerasæ˜¯ONEIROSï¼ˆOpen-ended Neuro-Electronic Intelligent Robot Operating Systemï¼Œå¼€æ”¾å¼ç¥ç»ç”µå­æ™ºèƒ½æœºå™¨äººæ“ä½œç³»ç»Ÿï¼‰é¡¹ç›®ç ”ç©¶å·¥ä½œçš„éƒ¨åˆ†äº§ç‰©[3]ï¼Œä¸»è¦ä½œè€…å’Œç»´æŠ¤è€…æ˜¯Googleå·¥ç¨‹å¸ˆFranÃ§ois Cholletã€‚\\r\\n&quot;\n\nå¯¹äºä¸­æ–‡æ¥è¯´ï¼Œä¸€å¥è¯æ¦‚æ‹¬ï¼šBERT é‡‡å–çš„æ˜¯ã€Œåˆ†å­—ã€ï¼Œå³æ¯ä¸€ä¸ªæ±‰å­—éƒ½åˆ‡å¼€ã€‚\n\nBasicTokenizerBasicTokenizerï¼ˆä»¥ä¸‹ç®€ç§° BTï¼‰æ˜¯ä¸€ä¸ªåˆæ­¥çš„åˆ†è¯å™¨ã€‚å¯¹äºä¸€ä¸ªå¾…åˆ†è¯å­—ç¬¦ä¸²ï¼Œæµç¨‹å¤§è‡´å°±æ˜¯è½¬æˆ unicode -&gt; å»é™¤å„ç§å¥‡æ€ªå­—ç¬¦ -&gt; å¤„ç†ä¸­æ–‡ -&gt; ç©ºæ ¼åˆ†è¯ -&gt; å»é™¤å¤šä½™å­—ç¬¦å’Œæ ‡ç‚¹åˆ†è¯ -&gt; å†æ¬¡ç©ºæ ¼åˆ†è¯ï¼Œç»“æŸã€‚\nå¤§è‡´æµç¨‹å°±æ˜¯è¿™æ ·ï¼Œè¿˜æœ‰å¾ˆå¤šç»†èŠ‚ï¼Œä¸‹é¢æˆ‘ä¾æ¬¡è¯´ä¸‹ã€‚\nè½¬æˆ unicodeè½¬æˆ unicode è¿™æ­¥å¯¹åº”äº convert_to_unicode(text) å‡½æ•°ï¼Œå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯å°†è¾“å…¥è½¬æˆ unicode å­—ç¬¦ä¸²ï¼Œå¦‚æœä½ ç”¨çš„ Python 3 è€Œä¸”è¾“å…¥æ˜¯ str ç±»å‹ï¼Œé‚£ä¹ˆè¿™ç‚¹æ— éœ€æ‹…å¿ƒï¼Œè¾“å…¥å’Œè¾“å‡ºä¸€æ ·ï¼›å¦‚æœæ˜¯ Python 3 è€Œä¸”è¾“å…¥ç±»å‹æ˜¯ bytesï¼Œé‚£ä¹ˆè¯¥å‡½æ•°ä¼šä½¿ç”¨ text.decode(&quot;utf-8&quot;, &quot;ignore&quot;) æ¥è½¬æˆ unicode ç±»å‹ã€‚å¦‚æœä½ ç”¨çš„æ˜¯ Python 2ï¼Œé‚£ä¹ˆè¯·çœ‹ Sunsetting Python 2 support\n å’Œ Python 2.7 Countdown\nï¼ŒJust drop itã€‚\nç»è¿‡è¿™æ­¥åï¼Œexample å’ŒåŸæ¥ç›¸åŒï¼š\n123&gt;&gt;&gt; example = convert_to_unicode(example)&gt;&gt;&gt; example&#x27;Kerasæ˜¯ONEIROSï¼ˆOpen-ended Neuro-Electronic Intelligent Robot Operating Systemï¼Œå¼€æ”¾å¼ç¥ç»ç”µå­æ™ºèƒ½æœºå™¨äººæ“ä½œç³»ç»Ÿï¼‰é¡¹ç›®ç ”ç©¶å·¥ä½œçš„éƒ¨åˆ†äº§ç‰©[3]ï¼Œä¸»è¦ä½œè€…å’Œç»´æŠ¤è€…æ˜¯Googleå·¥ç¨‹å¸ˆFranÃ§ois Cholletã€‚\\r\\n&#x27;\nå»é™¤å„ç§å¥‡æ€ªå­—ç¬¦å»é™¤å„ç§å¥‡æ€ªå­—ç¬¦å¯¹åº”äº BT ç±»çš„ _clean_text(text) æ–¹æ³•ï¼Œé€šè¿‡ Unicode ç ä½ï¼ˆUnicode code pointï¼Œä»¥ä¸‹ç ä½å‡æŒ‡ Unicode ç ä½ï¼‰æ¥å»é™¤å„ç§ä¸åˆæ³•å­—ç¬¦å’Œå¤šä½™ç©ºæ ¼ï¼ŒåŒ…æ‹¬ï¼š\n\nPython ä¸­å¯ä»¥é€šè¿‡ ord(c) æ¥è·å–å­—ç¬¦ c çš„ç ä½ï¼Œä½¿ç”¨ chr(i) æ¥è·å–ç ä½ä¸º i çš„ Unicode å­—ç¬¦ï¼Œ$0 \\leq i \\leq \\text{0x10ffff}$ï¼Œå³åè¿›åˆ¶çš„ $[0, 1114111]$ã€‚\n\n\nç ä½ä¸º 0 çš„ \\x00ï¼Œå³ç©ºå­—ç¬¦ï¼ˆNull characterï¼‰ï¼Œæˆ–å«ç»“æŸç¬¦ï¼Œè‚‰çœ¼ä¸å¯è§ï¼Œå±äºæ§åˆ¶å­—ç¬¦ï¼Œä¸€èˆ¬åœ¨å­—ç¬¦ä¸²æœ«å°¾ã€‚æ³¨æ„ä¸æ˜¯ç©ºæ ¼ï¼Œç©ºæ ¼çš„ç ä½æ˜¯ 32ã€‚\nç ä½ä¸º 0xfffdï¼ˆåè¿›åˆ¶ 65533ï¼‰çš„ ï¿½ï¼Œå³æ›¿æ¢å­—ç¬¦)ï¼ˆREPLACEMENT CHARACTERï¼‰ï¼Œé€šå¸¸ç”¨æ¥æ›¿æ¢æœªçŸ¥ã€æ— æ³•è¯†åˆ«æˆ–è€…æ— æ³•è¡¨ç¤ºçš„å­—ç¬¦ã€‚\né™¤ \\tã€\\r å’Œ \\n ä»¥å¤–çš„æ§åˆ¶å­—ç¬¦ï¼ˆControl characterï¼‰ï¼Œå³ Unicode ç±»åˆ«æ˜¯ Cc å’Œ Cf çš„å­—ç¬¦ã€‚å¯ä»¥ä½¿ç”¨ unicodedata.category(c) æ¥æŸ¥çœ‹ c çš„ Unicode ç±»åˆ«ã€‚ä»£ç ä¸­ç”¨ _is_control(char) æ¥åˆ¤æ–­ char æ˜¯ä¸æ˜¯æ§åˆ¶å­—ç¬¦ã€‚\nå°†æ‰€æœ‰ç©ºç™½å­—ç¬¦è½¬æ¢ä¸ºä¸€ä¸ªç©ºæ ¼ï¼ŒåŒ…æ‹¬æ ‡å‡†ç©ºæ ¼ã€\\tã€\\rã€\\n ä»¥åŠ Unicode ç±»åˆ«ä¸º Zs çš„å­—ç¬¦ã€‚ä»£ç ä¸­ç”¨ _is_whitespace(char) æ¥åˆ¤æ–­ char æ˜¯ä¸æ˜¯ç©ºç™½å­—ç¬¦ã€‚\n\nç»è¿‡è¿™æ­¥åï¼Œexample ä¸­çš„ \\r\\n è¢«æ›¿æ¢æˆä¸¤ä¸ªç©ºæ ¼ï¼š\n123&gt;&gt;&gt; example = _clean_text(example)&gt;&gt;&gt; example&#x27;Kerasæ˜¯ONEIROSï¼ˆOpen-ended Neuro-Electronic Intelligent Robot Operating Systemï¼Œå¼€æ”¾å¼ç¥ç»ç”µå­æ™ºèƒ½æœºå™¨äººæ“ä½œç³»ç»Ÿï¼‰é¡¹ç›®ç ”ç©¶å·¥ä½œçš„éƒ¨åˆ†äº§ç‰©[3]ï¼Œä¸»è¦ä½œè€…å’Œç»´æŠ¤è€…æ˜¯Googleå·¥ç¨‹å¸ˆFranÃ§ois Cholletã€‚  &#x27;\nå¤„ç†ä¸­æ–‡å¤„ç†ä¸­æ–‡å¯¹åº”äº BT ç±»çš„ _tokenize_chinese_chars(text) æ–¹æ³•ã€‚å¯¹äº text ä¸­çš„å­—ç¬¦ï¼Œé¦–å…ˆåˆ¤æ–­å…¶æ˜¯ä¸æ˜¯ã€Œä¸­æ–‡å­—ç¬¦ã€ï¼ˆå…³äºä¸­æ–‡å­—ç¬¦çš„è¯´æ˜è§ä¸‹æ–¹å¼•ç”¨å—è¯´æ˜ï¼‰ï¼Œæ˜¯çš„è¯åœ¨å…¶å‰ååŠ ä¸Šä¸€ä¸ªç©ºæ ¼ï¼Œå¦åˆ™åŸæ ·è¾“å‡ºã€‚é‚£ä¹ˆæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦æ˜¯ä¸æ˜¯ã€Œä¸­æ–‡ã€å‘¢ï¼Ÿ\n_is_chinese_char(cp) æ–¹æ³•ï¼Œcp å°±æ˜¯åˆšæ‰è¯´çš„ç ä½ï¼Œé€šè¿‡ç ä½æ¥åˆ¤æ–­ï¼Œæ€»å…±æœ‰ 81520 ä¸ªå­—ï¼Œè¯¦ç»†çš„ç ä½èŒƒå›´å¦‚ä¸‹ï¼ˆéƒ½æ˜¯é—­åŒºé—´ï¼‰ï¼š\n\n[0x4E00, 0x9FFF]ï¼šåè¿›åˆ¶ [19968, 40959]\n[0x3400, 0x4DBF]ï¼šåè¿›åˆ¶ [13312, 19903]\n[0x20000, 0x2A6DF]ï¼šåè¿›åˆ¶ [131072, 173791]\n[0x2A700, 0x2B73F]ï¼šåè¿›åˆ¶ [173824, 177983]\n[0x2B740, 0x2B81F]ï¼šåè¿›åˆ¶ [177984, 178207]\n[0x2B820, 0x2CEAF]ï¼šåè¿›åˆ¶ [178208, 183983]\n[0xF900, 0xFAFF]ï¼šåè¿›åˆ¶ [63744, 64255]\n[0x2F800, 0x2FA1F]ï¼šåè¿›åˆ¶ [194560, 195103]\n\nå…¶å®æˆ‘è§‰å¾—è¿™ä¸ªèŒƒå›´å¯ä»¥å†ç²¾ç®€ä¸‹ï¼Œå› ä¸ºæœ‰å‡ ä¸ªåŒºé—´æ˜¯ç›¸é‚»çš„ï¼Œä¸‹é¢ä¸‰ä¸ªåŒºé—´ï¼š\n\n[0x2A700, 0x2B73F]ï¼šåè¿›åˆ¶ [173824, 177983]\n[0x2B740, 0x2B81F]ï¼šåè¿›åˆ¶ [177984, 178207]\n[0x2B820, 0x2CEAF]ï¼šåè¿›åˆ¶ [178208, 183983]\n\nå¯ä»¥ç²¾ç®€æˆä¸€ä¸ªï¼š\n\n[0x2A700, 0x2CEAF]ï¼šåè¿›åˆ¶ [173824, 183983]\n\nåŸæ¥çš„ 8 ä¸ªåŒºé—´ç²¾ç®€æˆ 6 ä¸ªï¼Œè‡³äºåŸæ¥ä¸ºä»€ä¹ˆå†™æˆ 8 ä¸ªï¼ŒI donâ€™t know å•Š ğŸ˜‚\n\nå…³äºã€Œä¸­æ–‡å­—ç¬¦ã€çš„è¯´æ˜ï¼šæŒ‰ç…§ä»£ç ä¸­çš„å®šä¹‰ï¼Œè¿™é‡Œè¯´çš„ã€Œä¸­æ–‡å­—ç¬¦ã€æŒ‡çš„æ˜¯ CJK Unicode block) ä¸­çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬ç°ä»£æ±‰è¯­ã€éƒ¨åˆ†æ—¥è¯­ã€éƒ¨åˆ†éŸ©è¯­å’Œè¶Šå—è¯­ã€‚ä½†æ˜¯æ ¹æ® CJK Unicode block) ä¸­çš„å®šä¹‰ï¼Œè¿™äº›å­—ç¬¦åªåŒ…æ‹¬ç¬¬ä¸€ä¸ªç ä½åŒºé—´ï¼ˆ[0x4E00, 0x9FFF]ï¼‰å†…çš„å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´ä»£ç ä¸­çš„å­—ç¬¦è¦è¿œè¿œå¤šäº CJK Unicode block ä¸­åŒ…æ‹¬çš„å­—ç¬¦ï¼Œè¿™ä¸€ç‚¹æš‚æ—¶æœ‰äº›ç–‘é—®ã€‚æˆ‘æŠŠæºç å…³äºè¿™å—çš„æ³¨é‡Šå¼•ç”¨è¿‡æ¥å¦‚ä¸‹ï¼š\n\n123456789101112def _is_chinese_char(self, cp):    &quot;&quot;&quot;Checks whether CP is the codepoint of a CJK character.&quot;&quot;&quot;    # This defines a &quot;chinese character&quot; as anything in the CJK Unicode block:    #   https://en.wikipedia.org/wiki/CJK_Unified_Ideographs_(Unicode_block)    #    # Note that the CJK Unicode block is NOT all Japanese and Korean characters,    # despite its name. The modern Korean Hangul alphabet is a different block,    # as is Japanese Hiragana and Katakana. Those alphabets are used to write    # space-separated words, so they are not treated specially and handled    # like the all of the other languages.    pass\nç»è¿‡è¿™æ­¥åï¼Œä¸­æ–‡è¢«æŒ‰å­—åˆ†å¼€ï¼Œç”¨ç©ºæ ¼åˆ†éš”ï¼Œä½†è‹±æ–‡æ•°å­—ç­‰ä»ç„¶ä¿æŒåŸçŠ¶ï¼š\n123&gt;&gt;&gt; example = _tokenize_chinese_chars(example)&gt;&gt;&gt; example&#x27;Keras æ˜¯ ONEIROSï¼ˆOpen-ended Neuro-Electronic Intelligent Robot Operating Systemï¼Œ å¼€  æ”¾  å¼  ç¥  ç»  ç”µ  å­  æ™º  èƒ½  æœº  å™¨  äºº  æ“  ä½œ  ç³»  ç»Ÿ ï¼‰ é¡¹  ç›®  ç ”  ç©¶  å·¥  ä½œ  çš„  éƒ¨  åˆ†  äº§  ç‰© [3]ï¼Œ ä¸»  è¦  ä½œ  è€…  å’Œ  ç»´  æŠ¤  è€…  æ˜¯ Google å·¥  ç¨‹  å¸ˆ FranÃ§ois Cholletã€‚  &#x27;\nç©ºæ ¼åˆ†è¯ç©ºæ ¼åˆ†è¯å¯¹åº”äº whitespace_tokenize(text) å‡½æ•°ã€‚é¦–å…ˆå¯¹ text è¿›è¡Œ strip() æ“ä½œï¼Œå»æ‰ä¸¤è¾¹å¤šä½™ç©ºç™½å­—ç¬¦ï¼Œç„¶åå¦‚æœå‰©ä¸‹çš„æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œåˆ™ç›´æ¥è¿”å›ç©ºåˆ—è¡¨ï¼Œå¦åˆ™è¿›è¡Œ split() æ“ä½œï¼Œå¾—åˆ°æœ€åˆçš„åˆ†è¯ç»“æœ orig_tokensã€‚\nç»è¿‡è¿™æ­¥åï¼Œexample å˜æˆä¸€ä¸ªåˆ—è¡¨ï¼š\n123&gt;&gt;&gt; example = whitespace_tokenize(example)&gt;&gt;&gt; example[&#x27;Keras&#x27;, &#x27;æ˜¯&#x27;, &#x27;ONEIROSï¼ˆOpen-ended&#x27;, &#x27;Neuro-Electronic&#x27;, &#x27;Intelligent&#x27;, &#x27;Robot&#x27;, &#x27;Operating&#x27;, &#x27;Systemï¼Œ&#x27;, &#x27;å¼€&#x27;, &#x27;æ”¾&#x27;, &#x27;å¼&#x27;, &#x27;ç¥&#x27;, &#x27;ç»&#x27;, &#x27;ç”µ&#x27;, &#x27;å­&#x27;, &#x27;æ™º&#x27;, &#x27;èƒ½&#x27;, &#x27;æœº&#x27;, &#x27;å™¨&#x27;, &#x27;äºº&#x27;, &#x27;æ“&#x27;, &#x27;ä½œ&#x27;, &#x27;ç³»&#x27;, &#x27;ç»Ÿ&#x27;, &#x27;ï¼‰&#x27;, &#x27;é¡¹&#x27;, &#x27;ç›®&#x27;, &#x27;ç ”&#x27;, &#x27;ç©¶&#x27;, &#x27;å·¥&#x27;, &#x27;ä½œ&#x27;, &#x27;çš„&#x27;, &#x27;éƒ¨&#x27;, &#x27;åˆ†&#x27;, &#x27;äº§&#x27;, &#x27;ç‰©&#x27;, &#x27;[3]ï¼Œ&#x27;, &#x27;ä¸»&#x27;, &#x27;è¦&#x27;, &#x27;ä½œ&#x27;, &#x27;è€…&#x27;, &#x27;å’Œ&#x27;, &#x27;ç»´&#x27;, &#x27;æŠ¤&#x27;, &#x27;è€…&#x27;, &#x27;æ˜¯&#x27;, &#x27;Google&#x27;, &#x27;å·¥&#x27;, &#x27;ç¨‹&#x27;, &#x27;å¸ˆ&#x27;, &#x27;FranÃ§ois&#x27;, &#x27;Cholletã€‚&#x27;]\nå»é™¤å¤šä½™å­—ç¬¦å’Œæ ‡ç‚¹åˆ†è¯æ¥ä¸‹æ¥æ˜¯é’ˆå¯¹ orig_tokens çš„åˆ†è¯ç»“æœè¿›ä¸€æ­¥å¤„ç†ï¼Œä»£ç å¦‚ä¸‹ï¼š\n12345for token in orig_tokens:      if self.do_lower_case:        token = token.lower()        token = self._run_strip_accents(token)      split_tokens.extend(self._run_split_on_punc(token))\né€»è¾‘ä¸å¤æ‚ï¼Œæˆ‘åœ¨è¿™é‡Œä¸»è¦è¯´ä¸‹ _run_strip_accents å’Œ _run_split_on_puncã€‚\n_run_strip_accents(text) æ–¹æ³•ç”¨äºå»é™¤ accentsï¼Œå³å˜éŸ³ç¬¦å·ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯å˜éŸ³ç¬¦å·å‘¢ï¼Ÿåƒ Keras ä½œè€… FranÃ§ois Chollet åå­—ä¸­äº›è®¸å¥‡æ€ªçš„å­—ç¬¦ Ã§ã€ç®€å†çš„è‹±æ–‡ rÃ©sumÃ© ä¸­çš„ Ã© å’Œä¸­æ–‡æ‹¼éŸ³å£°è°ƒ Ã¡ ç­‰ï¼Œè¿™äº›éƒ½æ˜¯å˜éŸ³ç¬¦å· accentsï¼Œç»´åŸºç™¾ç§‘ä¸­æè¿°å¦‚ä¸‹ï¼š\n\né™„åŠ ç¬¦å·æˆ–ç§°å˜éŸ³ç¬¦å·ï¼ˆdiacriticã€diacritical markã€diacritical pointã€diacritical signï¼‰ï¼Œæ˜¯æŒ‡æ·»åŠ åœ¨å­—æ¯ä¸Šé¢çš„ç¬¦å·ï¼Œä»¥æ›´æ”¹å­—æ¯çš„å‘éŸ³æˆ–è€…ä»¥åŒºåˆ†æ‹¼å†™ç›¸ä¼¼è¯è¯­ã€‚ä¾‹å¦‚æ±‰è¯­æ‹¼éŸ³å­—æ¯â€œÃ¼â€ä¸Šé¢çš„ä¸¤ä¸ªå°ç‚¹ï¼Œæˆ–â€œÃ¡â€ã€â€œÃ â€å­—æ¯ä¸Šé¢çš„æ ‡è°ƒç¬¦ã€‚\n\nå¸¸è§ accents å¯å‚è§ Common accented charactersã€‚\n_run_strip_accents(text) æ–¹æ³•å°±æ˜¯è¦æŠŠè¿™äº› accents å»æ‰ï¼Œä¾‹å¦‚ FranÃ§ois Chollet å˜æˆ Francois Cholletï¼ŒrÃ©sumÃ© å˜æˆ resumeï¼ŒÃ¡ å˜æˆ aã€‚è¯¥æ–¹æ³•ä»£ç ä¸é•¿ï¼Œå¦‚ä¸‹ï¼š\n12345678910def _run_strip_accents(self, text):    &quot;&quot;&quot;Strips accents from a piece of text.&quot;&quot;&quot;    text = unicodedata.normalize(&quot;NFD&quot;, text)    output = []    for char in text:      cat = unicodedata.category(char)      if cat == &quot;Mn&quot;:        continue      output.append(char)    return &quot;&quot;.join(output)\nä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼ä»£ç è¿˜å¯ä»¥è¿›ä¸€æ­¥ç²¾ç®€ä¸ºï¼š\n12345def _run_strip_accents(self, text):    &quot;&quot;&quot;Strips accents from a piece of text.&quot;&quot;&quot;    text = unicodedata.normalize(&quot;NFD&quot;, text)    output = [char for char in text if unicodedata.category(char) != &#x27;Mn&#x27;]    return &quot;&quot;.join(output)\nè¿™æ®µä»£ç æ ¸å¿ƒå°±æ˜¯ unicodedata.normalize å’Œ unicodedata.category ä¸¤ä¸ªå‡½æ•°ã€‚å‰è€…è¿”å›è¾“å…¥å­—ç¬¦ä¸² text çš„è§„èŒƒåˆ†è§£å½¢å¼ï¼ˆUnicode å­—ç¬¦æœ‰å¤šç§è§„èŒƒå½¢å¼ï¼Œæœ¬æ–‡é»˜è®¤æŒ‡ NFD å½¢å¼ï¼Œå³è§„èŒƒåˆ†è§£ï¼‰ï¼Œåè€…è¿”å›è¾“å…¥å­—ç¬¦ char çš„ Unicode ç±»åˆ«ã€‚ä¸‹é¢æˆ‘ä¸¾ä¾‹è¯´æ˜ä¸€ä¸‹ä¸¤ä¸ªå‡½æ•°çš„ä½œç”¨ã€‚\nå‡å¦‚æˆ‘ä»¬è¦å¤„ç† ÄÃ³Ç”Ã¨ï¼Œå…¶ä¸­å«æœ‰å˜éŸ³ç¬¦å·ï¼Œè¿™ç§å­—ç¬¦å…¶å®æ˜¯ç”±ä¸¤ä¸ªå­—ç¬¦ç»„æˆçš„ï¼Œæ¯”å¦‚ Äï¼ˆç ä½ 0x101ï¼‰æ˜¯ç”± aï¼ˆç ä½ 0x61ï¼‰å’Œ ä¸Šé¢é‚£ä¸€æ¨ªï¼ˆç ä½ 0x304ï¼‰ç»„æˆçš„ï¼Œé€šè¿‡ unicodedata.normalize å°±å¯ä»¥æŠŠè¿™ä¸¤è€…æ‹†åˆ†å‡ºæ¥ï¼š\n12345&gt;&gt;&gt; import unicodedata  # unicodedata æ˜¯å†…ç½®åº“&gt;&gt;&gt; s = &#x27;ÄÃ³Ç”Ã¨&#x27;&gt;&gt;&gt; s_norm = unicodedata.normalize(&#x27;NFD&#x27;, s)&gt;&gt;&gt; s_norm, len(s_norm)(&#x27;aÌ„oÌuÌŒeÌ€&#x27;, 8)  # çœ‹èµ·æ¥å’ŒåŸæ¥çš„ä¸€æ‘¸ä¸€æ ·ï¼Œä½†æ˜¯é•¿åº¦å·²ç»å˜äº†\nunicodedata.category ç”¨æ¥è¿”å›å„ä¸ªå­—ç¬¦çš„ç±»åˆ«ï¼š\n12&gt;&gt;&gt; &#x27; &#x27;.join(unicodedata.category(c) for c in s_norm)&#x27;Ll Mn Ll Mn Ll Mn Ll Mn&#x27;\nLl ç±»åˆ« è¡¨ç¤º Lowercase Letterï¼Œå°å†™å­—æ¯ã€‚Mn ç±»åˆ« è¡¨ç¤ºçš„æ˜¯ Nonspacing Markï¼Œéé—´è·æ ‡è®°ï¼Œå˜éŸ³å­—ç¬¦å°±å±äºè¿™ç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ ¹æ®ç±»åˆ«ç›´æ¥å»æ‰å˜éŸ³å­—ç¬¦ï¼š\n12&gt;&gt;&gt; &#x27;&#x27;.join(c for c in s_norm if unicodedata.category(c) != &#x27;Mn&#x27;)&#x27;aoue&#x27;\n_run_split_on_punc(text) æ˜¯æ ‡ç‚¹åˆ†è¯ï¼ŒæŒ‰ç…§æ ‡ç‚¹ç¬¦å·åˆ†è¯ã€‚\n\n_run_split_on_punc(text) æ–¹æ³•æ˜¯é’ˆå¯¹ä¸Šä¸€æ­¥ç©ºæ ¼åˆ†è¯åçš„æ¯ä¸ª token çš„ã€‚\n\nåœ¨è¯´è¿™ä¸ªæ–¹æ³•ä¹‹å‰ï¼Œå…ˆè¯´ä¸€ä¸‹åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦æ˜¯å¦æ˜¯æ ‡ç‚¹ç¬¦å·çš„å‡½æ•°ï¼š_is_punctuation(char)ã€‚è¯¥å‡½æ•°ä»£ç ä¸é•¿ï¼Œæˆ‘æ”¾åˆ°ä¸‹é¢ï¼š\n12345678910def _is_punctuation(char):  &quot;&quot;&quot;Checks whether `chars` is a punctuation character.&quot;&quot;&quot;  cp = ord(char)  if ((cp &gt;= 33 and cp &lt;= 47) or (cp &gt;= 58 and cp &lt;= 64) or      (cp &gt;= 91 and cp &lt;= 96) or (cp &gt;= 123 and cp &lt;= 126)):    return True  cat = unicodedata.category(char)  if cat.startswith(&quot;P&quot;):    return True  return False\né€šå¸¸æˆ‘ä»¬ä¼šç”¨ä¸€ä¸ªç±»ä¼¼è¯åº“çš„æ–‡ä»¶æ¥å­˜æ”¾æ‰€æœ‰çš„æ ‡ç‚¹ç¬¦å·ï¼Œè€Œ _is_punctuation å‡½æ•°æ˜¯é€šè¿‡ç ä½æ¥åˆ¤æ–­çš„ï¼Œè¿™æ ·æ›´çµæ´»ï¼Œä¹Ÿä¸å¿…ä¿ç•™ä¸€ä¸ªé¢å¤–çš„è¯åº“æ–‡ä»¶ã€‚å…·ä½“æ˜¯æœ‰ä¸¤ç§æƒ…å†µä¼šè§†ä¸ºæ ‡ç‚¹ï¼šASCII ä¸­é™¤äº†å­—æ¯å’Œæ•°å­—æ„å¤–çš„å­—ç¬¦å’Œä»¥ P å¼€å¤´çš„ Unicode ç±»åˆ«ä¸­çš„å­—ç¬¦ã€‚ç¬¬ä¸€ç§æƒ…å†µæ€»å…±æœ‰ 32 ä¸ªå­—ç¬¦ï¼Œå¦‚ä¸‹ï¼š\n1!&quot;#$%&amp;&#x27;()*+,-./:;&lt;=&gt;?@[\\]^_`&#123;|&#125;~\n_run_split_on_punc çš„æ€»ä½“è¿‡ç¨‹å°±æ˜¯ï¼š\n\né¦–å…ˆè®¾ç½® start_new_word=True å’Œ output=[]ï¼Œoutput å°±æ˜¯æœ€ç»ˆçš„è¾“å‡º\nå¯¹ text ä¸­æ¯ä¸ªå­—ç¬¦è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœè¯¥å­—ç¬¦æ˜¯æ ‡ç‚¹ï¼Œåˆ™ output.append([char])ï¼Œå¹¶è®¾ç½® start_new_word=True\nå¦‚æœä¸æ˜¯æ ‡ç‚¹ä¸” start_new_word=Trueï¼Œé‚£ä¹ˆæ„å‘³ç€è¿™æ˜¯æ–°ä¸€æ®µçš„å¼€å§‹ï¼Œç›´æ¥ output.append([])ï¼Œç„¶åå†è®¾ç½® start_new_word = Falseï¼Œå¹¶åœ¨åˆšæ‰ append çš„ç©ºåˆ—è¡¨ä¸ŠåŠ ä¸Šå½“å‰å­—ç¬¦ï¼šoutput[-1].append(char)\n\nç°åœ¨å¾—åˆ°çš„ output æ˜¯ä¸€ä¸ªåµŒå¥—åˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªåˆ—è¡¨éƒ½æ˜¯è¢«æ ‡ç‚¹åˆ†å¼€çš„ä¸€æ®µï¼Œæœ€åæŠŠæ¯ä¸ªåˆ—è¡¨ join æ‹¼æ¥ä¸€ä¸‹ï¼Œæ‹‰å¹³ output å³å¯ã€‚\nç»è¿‡è¿™æ­¥åï¼ŒåŸå…ˆæ²¡æœ‰è¢«åˆ†å¼€çš„å­—è¯æ ‡ç‚¹ï¼ˆä¾‹å¦‚ ONEIROSï¼ˆOpen-endedï¼‰ã€æ²¡æœ‰å»æ‰çš„å˜éŸ³ç¬¦å·ï¼ˆä¾‹å¦‚ Ã§ï¼‰éƒ½è¢«ç›¸åº”å¤„ç†ï¼š\n12&gt;&gt;&gt; example[&#x27;keras&#x27;, &#x27;æ˜¯&#x27;, &#x27;oneiros&#x27;, &#x27;ï¼ˆ&#x27;, &#x27;open&#x27;, &#x27;-&#x27;, &#x27;ended&#x27;, &#x27;neuro&#x27;, &#x27;-&#x27;, &#x27;electronic&#x27;, &#x27;intelligent&#x27;, &#x27;robot&#x27;, &#x27;operating&#x27;, &#x27;system&#x27;, &#x27;ï¼Œ&#x27;, &#x27;å¼€&#x27;, &#x27;æ”¾&#x27;, &#x27;å¼&#x27;, &#x27;ç¥&#x27;, &#x27;ç»&#x27;, &#x27;ç”µ&#x27;, &#x27;å­&#x27;, &#x27;æ™º&#x27;, &#x27;èƒ½&#x27;, &#x27;æœº&#x27;, &#x27;å™¨&#x27;, &#x27;äºº&#x27;, &#x27;æ“&#x27;, &#x27;ä½œ&#x27;, &#x27;ç³»&#x27;, &#x27;ç»Ÿ&#x27;, &#x27;ï¼‰&#x27;, &#x27;é¡¹&#x27;, &#x27;ç›®&#x27;, &#x27;ç ”&#x27;, &#x27;ç©¶&#x27;, &#x27;å·¥&#x27;, &#x27;ä½œ&#x27;, &#x27;çš„&#x27;, &#x27;éƒ¨&#x27;, &#x27;åˆ†&#x27;, &#x27;äº§&#x27;, &#x27;ç‰©&#x27;, &#x27;[&#x27;, &#x27;3&#x27;, &#x27;]&#x27;, &#x27;ï¼Œ&#x27;, &#x27;ä¸»&#x27;, &#x27;è¦&#x27;, &#x27;ä½œ&#x27;, &#x27;è€…&#x27;, &#x27;å’Œ&#x27;, &#x27;ç»´&#x27;, &#x27;æŠ¤&#x27;, &#x27;è€…&#x27;, &#x27;æ˜¯&#x27;, &#x27;google&#x27;, &#x27;å·¥&#x27;, &#x27;ç¨‹&#x27;, &#x27;å¸ˆ&#x27;, &#x27;francois&#x27;, &#x27;chollet&#x27;, &#x27;ã€‚&#x27;]\nå†æ¬¡ç©ºæ ¼åˆ†è¯è¿™å¥å¯¹åº”äºå¦‚ä¸‹ä»£ç ï¼š\n1output_tokens = whitespace_tokenize(&quot; &quot;.join(split_tokens))\nå¾ˆç®€å•ï¼Œå°±æ˜¯å…ˆç”¨æ ‡å‡†ç©ºæ ¼æ‹¼æ¥ä¸Šä¸€æ­¥çš„å¤„ç†ç»“æœï¼Œå†æ‰§è¡Œç©ºæ ¼åˆ†è¯ã€‚ï¼ˆBut WHY?ï¼‰\nç»è¿‡è¿™æ­¥åï¼Œå’Œä¸Šæ­¥ç»“æœä¸€æ ·ï¼š\n12&gt;&gt;&gt; example[&#x27;keras&#x27;, &#x27;æ˜¯&#x27;, &#x27;oneiros&#x27;, &#x27;ï¼ˆ&#x27;, &#x27;open&#x27;, &#x27;-&#x27;, &#x27;ended&#x27;, &#x27;neuro&#x27;, &#x27;-&#x27;, &#x27;electronic&#x27;, &#x27;intelligent&#x27;, &#x27;robot&#x27;, &#x27;operating&#x27;, &#x27;system&#x27;, &#x27;ï¼Œ&#x27;, &#x27;å¼€&#x27;, &#x27;æ”¾&#x27;, &#x27;å¼&#x27;, &#x27;ç¥&#x27;, &#x27;ç»&#x27;, &#x27;ç”µ&#x27;, &#x27;å­&#x27;, &#x27;æ™º&#x27;, &#x27;èƒ½&#x27;, &#x27;æœº&#x27;, &#x27;å™¨&#x27;, &#x27;äºº&#x27;, &#x27;æ“&#x27;, &#x27;ä½œ&#x27;, &#x27;ç³»&#x27;, &#x27;ç»Ÿ&#x27;, &#x27;ï¼‰&#x27;, &#x27;é¡¹&#x27;, &#x27;ç›®&#x27;, &#x27;ç ”&#x27;, &#x27;ç©¶&#x27;, &#x27;å·¥&#x27;, &#x27;ä½œ&#x27;, &#x27;çš„&#x27;, &#x27;éƒ¨&#x27;, &#x27;åˆ†&#x27;, &#x27;äº§&#x27;, &#x27;ç‰©&#x27;, &#x27;[&#x27;, &#x27;3&#x27;, &#x27;]&#x27;, &#x27;ï¼Œ&#x27;, &#x27;ä¸»&#x27;, &#x27;è¦&#x27;, &#x27;ä½œ&#x27;, &#x27;è€…&#x27;, &#x27;å’Œ&#x27;, &#x27;ç»´&#x27;, &#x27;æŠ¤&#x27;, &#x27;è€…&#x27;, &#x27;æ˜¯&#x27;, &#x27;google&#x27;, &#x27;å·¥&#x27;, &#x27;ç¨‹&#x27;, &#x27;å¸ˆ&#x27;, &#x27;francois&#x27;, &#x27;chollet&#x27;, &#x27;ã€‚&#x27;]\nè¿™å°±æ˜¯ BT æœ€ç»ˆçš„è¾“å‡ºäº†ã€‚\nWordpieceTokenizerWordpieceTokenizerï¼ˆä»¥ä¸‹ç®€ç§° WPTï¼‰æ˜¯åœ¨ BT ç»“æœçš„åŸºç¡€ä¸Šè¿›è¡Œå†ä¸€æ¬¡åˆ‡åˆ†ï¼Œå¾—åˆ°å­è¯ï¼ˆsubwordï¼Œä»¥ ## å¼€å¤´ï¼‰ï¼Œè¯æ±‡è¡¨å°±æ˜¯åœ¨æ­¤æ—¶å¼•å…¥çš„ã€‚è¯¥ç±»åªæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼šä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³• __init__(self, vocab, unk_token=&quot;[UNK]&quot;, max_input_chars_per_word=200)ï¼Œä¸€ä¸ªåˆ†è¯æ–¹æ³• tokenize(self, text)ã€‚\n\nå¯¹äºä¸­æ–‡æ¥è¯´ï¼Œä½¿ä¸ä½¿ç”¨ WPT éƒ½ä¸€æ ·ï¼Œå› ä¸ºä¸­æ–‡ç»è¿‡ BasicTokenizer åå·²ç»å˜æˆä¸€ä¸ªå­—ä¸€ä¸ªå­—äº†ï¼Œæ²¡æ³•å†ã€Œå­ã€äº† ğŸ˜‚\n\n__init__(self, vocab, unk_token=&quot;[UNK]&quot;, max_input_chars_per_word=200)ï¼švocab å°±æ˜¯è¯æ±‡è¡¨ï¼Œcollections.OrderedDict() ç±»å‹ï¼Œç”± load_vocab(vocab_file) è¯»å…¥ï¼Œkey ä¸ºè¯æ±‡ï¼Œvalue ä¸ºå¯¹åº”ç´¢å¼•ï¼Œé¡ºåºä¾ç…§ vocab_file ä¸­çš„é¡ºåºã€‚æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯æ±‡è¡¨ä¸­å·²åŒ…å«æ‰€æœ‰å¯èƒ½çš„å­è¯ã€‚unk_token ä¸ºæœªç™»å½•è¯çš„æ ‡è®°ï¼Œé»˜è®¤ä¸º [UNK]ã€‚max_input_chars_per_word ä¸ºå•ä¸ªè¯çš„æœ€å¤§é•¿åº¦ï¼Œå¦‚æœä¸€ä¸ªè¯çš„é•¿åº¦è¶…è¿‡è¿™ä¸ªæœ€å¤§é•¿åº¦ï¼Œé‚£ä¹ˆç›´æ¥å°†å…¶è®¾ä¸º unk_tokenã€‚\ntokenize(self, text)ï¼šè¯¥æ–¹æ³•å°±æ˜¯ä¸»è¦çš„åˆ†è¯æ–¹æ³•äº†ï¼Œå¤§è‡´åˆ†è¯æ€è·¯æ˜¯æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºï¼Œå°†ä¸€ä¸ªè¯æ‹†åˆ†æˆå¤šä¸ªå­è¯ï¼Œæ¯ä¸ªå­è¯å°½å¯èƒ½é•¿ã€‚æŒ‰ç…§æºç ä¸­çš„è¯´æ³•ï¼Œè¯¥æ–¹æ³•ç§°ä¹‹ä¸º greedy longest-match-first algorithmï¼Œè´ªå©ªæœ€é•¿ä¼˜å…ˆåŒ¹é…ç®—æ³•ã€‚\nå¼€å§‹æ—¶é¦–å…ˆå°† text è½¬æˆ unicodeï¼Œå¹¶è¿›è¡Œç©ºæ ¼åˆ†è¯ï¼Œç„¶åä¾æ¬¡éå†æ¯ä¸ªè¯ã€‚ä¸ºäº†èƒ½å¤Ÿæ¸…æ¥šç›´è§‚åœ°ç†è§£éå†æµç¨‹ï¼Œæˆ‘ç‰¹åœ°åˆ¶ä½œäº†ä¸€ä¸ª GIF æ¥è§£é‡Šï¼Œä»¥ unaffable ä¸ºä¾‹ï¼š\n\næ³¨ï¼š\n\nè“è‰²åº•è‰²è¡¨ç¤ºå½“å‰å­å­—ç¬¦ä¸²ï¼Œå¯¹åº”äºä»£ç ä¸­çš„ cur_substr\nå½“ä»ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹éå†æ—¶ï¼Œä¸éœ€è¦åœ¨å½“å‰å­—ä¸²å‰é¢åŠ  ##ï¼Œå¦åˆ™éœ€è¦\n\nå¤§è‡´æµç¨‹è¯´æ˜ï¼ˆè™½ç„¶æˆ‘ç›¸ä¿¡ä¸Šé¢é‚£ä¸ª GIF å¤Ÿæ¸…æ¥šäº†ï¼‰ï¼š\n\nä»ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹ï¼Œç”±äºæ˜¯æœ€é•¿åŒ¹é…ï¼Œç»“æŸä½ç½®éœ€è¦ä»æœ€å³ç«¯ä¾æ¬¡é€’å‡ï¼Œæ‰€ä»¥éå†çš„ç¬¬ä¸€ä¸ªå­è¯æ˜¯å…¶æœ¬èº« unaffableï¼Œè¯¥å­è¯ä¸åœ¨è¯æ±‡è¡¨ä¸­\nç»“æŸä½ç½®å·¦ç§»ä¸€ä½å¾—åˆ°å­è¯ unaffablï¼ŒåŒæ ·ä¸åœ¨è¯æ±‡è¡¨ä¸­\né‡å¤è¿™ä¸ªæ“ä½œï¼Œç›´åˆ° unï¼Œè¯¥å­è¯åœ¨è¯æ±‡è¡¨ä¸­ï¼Œå°†å…¶åŠ å…¥ output_tokensï¼Œä»¥ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹çš„éå†ç»“æŸ\nè·³è¿‡ unï¼Œä»å…¶åçš„ a å¼€å§‹æ–°ä¸€è½®éå†ï¼Œç»“æŸä½ç½®ä¾ç„¶æ˜¯ä»æœ€å³ç«¯ä¾æ¬¡é€’å‡ï¼Œä½†æ­¤æ—¶éœ€è¦åœ¨å‰é¢åŠ ä¸Š ## æ ‡è®°ï¼Œå¾—åˆ° ##affable ä¸åœ¨è¯æ±‡è¡¨ä¸­\nç»“æŸä½ç½®å·¦ç§»ä¸€ä½å¾—åˆ°å­è¯ ##affablï¼ŒåŒæ ·ä¸åœ¨è¯æ±‡è¡¨ä¸­\né‡å¤è¿™ä¸ªæ“ä½œï¼Œç›´åˆ° ##affï¼Œè¯¥å­—è¯åœ¨è¯æ±‡è¡¨ä¸­ï¼Œå°†å…¶åŠ å…¥ output_tokensï¼Œæ­¤è½®éå†ç»“æŸ\nè·³è¿‡ affï¼Œä»å…¶åçš„ a å¼€å§‹æ–°ä¸€è½®éå†ï¼Œç»“æŸä½ç½®ä¾ç„¶æ˜¯ä»æœ€å³ç«¯ä¾æ¬¡é€’å‡ã€‚##able åœ¨è¯æ±‡è¡¨ä¸­ï¼Œå°†å…¶åŠ å…¥ output_tokens\nable åæ²¡æœ‰å­—ç¬¦äº†ï¼Œæ•´ä¸ªéå†ç»“æŸ\n\nå°† BT çš„ç»“æœè¾“å…¥ç»™ WPTï¼Œé‚£ä¹ˆ example çš„æœ€ç»ˆåˆ†è¯ç»“æœå°±æ˜¯\n1[&#x27;keras&#x27;, &#x27;æ˜¯&#x27;, &#x27;one&#x27;, &#x27;##iros&#x27;, &#x27;ï¼ˆ&#x27;, &#x27;open&#x27;, &#x27;-&#x27;, &#x27;ended&#x27;, &#x27;neu&#x27;, &#x27;##ro&#x27;, &#x27;-&#x27;, &#x27;electronic&#x27;, &#x27;intelligent&#x27;, &#x27;robot&#x27;, &#x27;operating&#x27;, &#x27;system&#x27;, &#x27;ï¼Œ&#x27;, &#x27;å¼€&#x27;, &#x27;æ”¾&#x27;, &#x27;å¼&#x27;, &#x27;ç¥&#x27;, &#x27;ç»&#x27;, &#x27;ç”µ&#x27;, &#x27;å­&#x27;, &#x27;æ™º&#x27;, &#x27;èƒ½&#x27;, &#x27;æœº&#x27;, &#x27;å™¨&#x27;, &#x27;äºº&#x27;, &#x27;æ“&#x27;, &#x27;ä½œ&#x27;, &#x27;ç³»&#x27;, &#x27;ç»Ÿ&#x27;, &#x27;ï¼‰&#x27;, &#x27;é¡¹&#x27;, &#x27;ç›®&#x27;, &#x27;ç ”&#x27;, &#x27;ç©¶&#x27;, &#x27;å·¥&#x27;, &#x27;ä½œ&#x27;, &#x27;çš„&#x27;, &#x27;éƒ¨&#x27;, &#x27;åˆ†&#x27;, &#x27;äº§&#x27;, &#x27;ç‰©&#x27;, &#x27;[&#x27;, &#x27;3&#x27;, &#x27;]&#x27;, &#x27;ï¼Œ&#x27;, &#x27;ä¸»&#x27;, &#x27;è¦&#x27;, &#x27;ä½œ&#x27;, &#x27;è€…&#x27;, &#x27;å’Œ&#x27;, &#x27;ç»´&#x27;, &#x27;æŠ¤&#x27;, &#x27;è€…&#x27;, &#x27;æ˜¯&#x27;, &#x27;google&#x27;, &#x27;å·¥&#x27;, &#x27;ç¨‹&#x27;, &#x27;å¸ˆ&#x27;, &#x27;franco&#x27;, &#x27;##is&#x27;, &#x27;cho&#x27;, &#x27;##llet&#x27;, &#x27;ã€‚&#x27;]\nè‡³æ­¤ï¼ŒBERT åˆ†è¯éƒ¨åˆ†ç»“æŸã€‚\nReference\n[1810.04805] BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding\nbert/tokenization.py at master Â· google-research/bert\nHow to replace accented characters in python? - Stack Overflow\nWhat is the best way to remove accents in a Python unicode string? - Stack Overflow\nAccents &amp; Accented Characters - Fonts.com | Fonts.com\nCommon accented characters | Butterickâ€™s Practical Typography\n\nEND","dateCreated":"2019-10-16T20:39:00+08:00","dateModified":"2025-06-14T20:46:16+08:00","datePublished":"2019-10-16T20:39:00+08:00","description":"\nBERT è¡¨ç¤º Bidirectional Encoder Representations from Transformersï¼Œæ˜¯ Google äº 2018 å¹´å‘å¸ƒçš„ä¸€ç§è¯­è¨€è¡¨ç¤ºæ¨¡å‹ã€‚è¯¥æ¨¡å‹ä¸€ç»å‘å¸ƒä¾¿æˆä¸ºäº‰ç›¸æ•ˆä»¿çš„å¯¹è±¡ï¼Œç›¸ä¿¡å¤§å®¶ä¹Ÿéƒ½å¤šå°‘å¬è¯´è¿‡ç ”ç©¶è¿‡äº†ã€‚æœ¬æ–‡ä¸»è¦èšç„¦äº BERT çš„åˆ†è¯æ–¹æ³•ï¼Œæ¨¡å‹å®ç°ç»†èŠ‚è§£è¯»è§ BERT æ˜¯å¦‚ä½•æ„å»ºæ¨¡å‹çš„ã€‚","headline":"BERT æ˜¯å¦‚ä½•åˆ†è¯çš„","image":[null,"https://i.loli.net/2019/10/16/VPXxydw9st2eoYR.jpg"],"mainEntityOfPage":{"@type":"WebPage","@id":"https://alanlee.fun/2019/10/16/bert-tokenizer/"},"publisher":{"@type":"Organization","name":"Alan Lee","sameAs":["https://github.com/secsilm","https://twitter.com/bluekirin93","mailto:secsilm@outlook.com"],"image":"https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png","logo":{"@type":"ImageObject","url":"https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png"}},"url":"https://alanlee.fun/2019/10/16/bert-tokenizer/","keywords":"Python, NLP, TensorFlow, Machine Learning","thumbnailUrl":"https://i.loli.net/2019/10/16/VPXxydw9st2eoYR.jpg"}</script>
    <meta name="description" content="BERT è¡¨ç¤º Bidirectional Encoder Representations from Transformersï¼Œæ˜¯ Google äº 2018 å¹´å‘å¸ƒçš„ä¸€ç§è¯­è¨€è¡¨ç¤ºæ¨¡å‹ã€‚è¯¥æ¨¡å‹ä¸€ç»å‘å¸ƒä¾¿æˆä¸ºäº‰ç›¸æ•ˆä»¿çš„å¯¹è±¡ï¼Œç›¸ä¿¡å¤§å®¶ä¹Ÿéƒ½å¤šå°‘å¬è¯´è¿‡ç ”ç©¶è¿‡äº†ã€‚æœ¬æ–‡ä¸»è¦èšç„¦äº BERT çš„åˆ†è¯æ–¹æ³•ï¼Œæ¨¡å‹å®ç°ç»†èŠ‚è§£è¯»è§ BERT æ˜¯å¦‚ä½•æ„å»ºæ¨¡å‹çš„ã€‚">
<meta property="og:type" content="blog">
<meta property="og:title" content="BERT æ˜¯å¦‚ä½•åˆ†è¯çš„">
<meta property="og:url" content="https://alanlee.fun/2019/10/16/bert-tokenizer/index.html">
<meta property="og:site_name" content="Alan Lee">
<meta property="og:description" content="BERT è¡¨ç¤º Bidirectional Encoder Representations from Transformersï¼Œæ˜¯ Google äº 2018 å¹´å‘å¸ƒçš„ä¸€ç§è¯­è¨€è¡¨ç¤ºæ¨¡å‹ã€‚è¯¥æ¨¡å‹ä¸€ç»å‘å¸ƒä¾¿æˆä¸ºäº‰ç›¸æ•ˆä»¿çš„å¯¹è±¡ï¼Œç›¸ä¿¡å¤§å®¶ä¹Ÿéƒ½å¤šå°‘å¬è¯´è¿‡ç ”ç©¶è¿‡äº†ã€‚æœ¬æ–‡ä¸»è¦èšç„¦äº BERT çš„åˆ†è¯æ–¹æ³•ï¼Œæ¨¡å‹å®ç°ç»†èŠ‚è§£è¯»è§ BERT æ˜¯å¦‚ä½•æ„å»ºæ¨¡å‹çš„ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2019/10/16/tXSKJZloFuHLOvw.gif">
<meta property="article:published_time" content="2019-10-16T12:39:00.000Z">
<meta property="article:modified_time" content="2025-06-14T12:46:16.192Z">
<meta property="article:author" content="Alan Lee">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="NLP">
<meta property="article:tag" content="TensorFlow">
<meta property="article:tag" content="Machine Learning">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2019/10/16/tXSKJZloFuHLOvw.gif">
<meta name="twitter:creator" content="@bluekirin93">
    
    
        
    
    
        <meta property="og:image" content="https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png"/>
    
    
    
        <meta property="og:image" content="https://i.loli.net/2019/10/16/VPXxydw9st2eoYR.jpg"/>
        <meta class="swiftype" name="image" data-type="enum" content="https://i.loli.net/2019/10/16/VPXxydw9st2eoYR.jpg"/>
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-7psn7jtnqx8dcatt1chsgye58vhpeeqkf8gzcb5iijzope7gwcvezy8gigh2.min.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111553531-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-111553531-1');
    </script>


    
    <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?6e8b0c627bf164f809ee4346796b1952";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>


    
        
    
    <style>
        ::-moz-selection { /* Code for Firefox */
          background: #FFBFBF;
        }
        
        ::selection {
          background: #FFBFBF;
        }
    </style><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    
</head>

    <body>
        <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Alan Lee
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="æ‰“å¼€é“¾æ¥: /#about"
            >
        
        
            <img class="header-picture" src="https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png" alt="ä½œè€…çš„å›¾ç‰‡"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="é˜…è¯»æœ‰å…³ä½œè€…çš„æ›´å¤šä¿¡æ¯"
                >
                    <img class="sidebar-profile-picture" src="https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png" alt="ä½œè€…çš„å›¾ç‰‡"/>
                </a>
                <h4 class="sidebar-profile-name">Alan Lee</h4>
                
                    <h5 class="sidebar-profile-bio"><p>NLP and Python developer, sometimes datavis, he/him. Stick to what you believe.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="é¦–é¡µ"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">é¦–é¡µ</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="æ ‡ç­¾"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">æ ‡ç­¾</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="å½’æ¡£"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">å½’æ¡£</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/about"
                            
                            rel="noopener"
                            title="å…³äº"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">å…³äº</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/secsilm"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/bluekirin93"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="mailto:secsilm@outlook.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="é‚®ç®±"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">é‚®ç®±</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
        <div class="post-header-cover
                    text-left
                    "
             style="background-image:url('https://i.loli.net/2019/10/16/VPXxydw9st2eoYR.jpg');"
             data-behavior="4">
            
        </div>

            <div id="main" data-behavior="4"
                 class="hasCover
                        hasCoverMetaOut
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            BERT æ˜¯å¦‚ä½•åˆ†è¯çš„
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2019-10-16T20:39:00+08:00">
	
		    2019 å¹´ 10 æœˆ 16 æ—¥
    	
    </time>
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <h1 id="table-of-contents">ç›®å½•</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#BasicTokenizer"><span class="toc-text">BasicTokenizer</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AC%E6%88%90-unicode"><span class="toc-text">è½¬æˆ unicode</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%BB%E9%99%A4%E5%90%84%E7%A7%8D%E5%A5%87%E6%80%AA%E5%AD%97%E7%AC%A6"><span class="toc-text">å»é™¤å„ç§å¥‡æ€ªå­—ç¬¦</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E4%B8%AD%E6%96%87"><span class="toc-text">å¤„ç†ä¸­æ–‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A9%BA%E6%A0%BC%E5%88%86%E8%AF%8D"><span class="toc-text">ç©ºæ ¼åˆ†è¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%BB%E9%99%A4%E5%A4%9A%E4%BD%99%E5%AD%97%E7%AC%A6%E5%92%8C%E6%A0%87%E7%82%B9%E5%88%86%E8%AF%8D"><span class="toc-text">å»é™¤å¤šä½™å­—ç¬¦å’Œæ ‡ç‚¹åˆ†è¯</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%8D%E6%AC%A1%E7%A9%BA%E6%A0%BC%E5%88%86%E8%AF%8D"><span class="toc-text">å†æ¬¡ç©ºæ ¼åˆ†è¯</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WordpieceTokenizer"><span class="toc-text">WordpieceTokenizer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-text">Reference</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#END"><span class="toc-text">END</span></a></li></ol>
<p><a href="https://arxiv.org/abs/1810.04805">BERT</a> è¡¨ç¤º Bidirectional Encoder Representations from Transformersï¼Œæ˜¯ Google äº 2018 å¹´å‘å¸ƒçš„ä¸€ç§è¯­è¨€è¡¨ç¤ºæ¨¡å‹ã€‚è¯¥æ¨¡å‹ä¸€ç»å‘å¸ƒä¾¿æˆä¸ºäº‰ç›¸æ•ˆä»¿çš„å¯¹è±¡ï¼Œç›¸ä¿¡å¤§å®¶ä¹Ÿéƒ½å¤šå°‘å¬è¯´è¿‡ç ”ç©¶è¿‡äº†ã€‚æœ¬æ–‡ä¸»è¦èšç„¦äº BERT çš„åˆ†è¯æ–¹æ³•ï¼Œæ¨¡å‹å®ç°ç»†èŠ‚è§£è¯»è§ <a href="https://alanlee.fun/2020/05/08/bert-model/">BERT æ˜¯å¦‚ä½•æ„å»ºæ¨¡å‹çš„</a>ã€‚<br><span id="more"></span></p>
<p><a href="https://github.com/google-research/bert">BERT æºç </a>ä¸­ <code>tokenization.py</code> å°±æ˜¯é¢„å¤„ç†è¿›è¡Œåˆ†è¯çš„ç¨‹åºï¼Œä¸»è¦æœ‰ä¸¤ä¸ªåˆ†è¯å™¨ï¼š<code>BasicTokenizer</code> å’Œ <code>WordpieceTokenizer</code>ï¼Œå¦å¤–ä¸€ä¸ª <code>FullTokenizer</code> æ˜¯è¿™ä¸¤ä¸ªçš„ç»“åˆï¼šå…ˆè¿›è¡Œ <code>BasicTokenizer</code> å¾—åˆ°ä¸€ä¸ªåˆ†å¾—æ¯”è¾ƒç²—çš„ token åˆ—è¡¨ï¼Œç„¶åå†å¯¹æ¯ä¸ª token è¿›è¡Œä¸€æ¬¡ <code>WordpieceTokenizer</code>ï¼Œå¾—åˆ°æœ€ç»ˆçš„åˆ†è¯ç»“æœã€‚</p>
<p>ä¸ºäº†èƒ½ç›´è§‚çœ‹åˆ°æ¯ä¸€æ­¥å¤„ç†æ•ˆæœï¼Œæˆ‘ä¼šç”¨ä¸‹é¢è¿™ä¸ªè´¯ç©¿å§‹ç»ˆçš„ä¾‹å­æ¥è¯´æ˜ï¼Œè¯¥å¥ä¿®æ”¹è‡ª <a href="https://zh.wikipedia.org/wiki/Keras">Keras çš„ç»´åŸºç™¾ç§‘</a>ä»‹ç»ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">example = <span class="string">&quot;Kerasæ˜¯ONEIROSï¼ˆOpen-ended Neuro-Electronic Intelligent Robot Operating Systemï¼Œå¼€æ”¾å¼ç¥ç»ç”µå­æ™ºèƒ½æœºå™¨äººæ“ä½œç³»ç»Ÿï¼‰é¡¹ç›®ç ”ç©¶å·¥ä½œçš„éƒ¨åˆ†äº§ç‰©[3]ï¼Œä¸»è¦ä½œè€…å’Œç»´æŠ¤è€…æ˜¯Googleå·¥ç¨‹å¸ˆFranÃ§ois Cholletã€‚\r\n&quot;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>å¯¹äºä¸­æ–‡æ¥è¯´ï¼Œä¸€å¥è¯æ¦‚æ‹¬ï¼šBERT é‡‡å–çš„æ˜¯ã€Œåˆ†å­—ã€ï¼Œå³æ¯ä¸€ä¸ªæ±‰å­—éƒ½åˆ‡å¼€ã€‚</p>
</blockquote>
<h2 id="BasicTokenizer"><a href="#BasicTokenizer" class="headerlink" title="BasicTokenizer"></a>BasicTokenizer</h2><p><code>BasicTokenizer</code>ï¼ˆä»¥ä¸‹ç®€ç§° BTï¼‰æ˜¯ä¸€ä¸ªåˆæ­¥çš„åˆ†è¯å™¨ã€‚å¯¹äºä¸€ä¸ªå¾…åˆ†è¯å­—ç¬¦ä¸²ï¼Œæµç¨‹å¤§è‡´å°±æ˜¯è½¬æˆ unicode -&gt; å»é™¤å„ç§å¥‡æ€ªå­—ç¬¦ -&gt; å¤„ç†ä¸­æ–‡ -&gt; ç©ºæ ¼åˆ†è¯ -&gt; å»é™¤å¤šä½™å­—ç¬¦å’Œæ ‡ç‚¹åˆ†è¯ -&gt; å†æ¬¡ç©ºæ ¼åˆ†è¯ï¼Œç»“æŸã€‚</p>
<p>å¤§è‡´æµç¨‹å°±æ˜¯è¿™æ ·ï¼Œè¿˜æœ‰å¾ˆå¤šç»†èŠ‚ï¼Œä¸‹é¢æˆ‘ä¾æ¬¡è¯´ä¸‹ã€‚</p>
<h3 id="è½¬æˆ-unicode"><a href="#è½¬æˆ-unicode" class="headerlink" title="è½¬æˆ unicode"></a>è½¬æˆ unicode</h3><p><strong>è½¬æˆ unicode</strong> è¿™æ­¥å¯¹åº”äº <code>convert_to_unicode(text)</code> å‡½æ•°ï¼Œå¾ˆå¥½ç†è§£ï¼Œå°±æ˜¯å°†è¾“å…¥è½¬æˆ unicode å­—ç¬¦ä¸²ï¼Œå¦‚æœä½ ç”¨çš„ Python 3 è€Œä¸”è¾“å…¥æ˜¯ <code>str</code> ç±»å‹ï¼Œé‚£ä¹ˆè¿™ç‚¹æ— éœ€æ‹…å¿ƒï¼Œè¾“å…¥å’Œè¾“å‡ºä¸€æ ·ï¼›å¦‚æœæ˜¯ Python 3 è€Œä¸”è¾“å…¥ç±»å‹æ˜¯ <code>bytes</code>ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°ä¼šä½¿ç”¨ <code>text.decode(&quot;utf-8&quot;, &quot;ignore&quot;)</code> æ¥è½¬æˆ unicode ç±»å‹ã€‚å¦‚æœä½ ç”¨çš„æ˜¯ Python 2ï¼Œé‚£ä¹ˆè¯·çœ‹ <a href="https://python3statement.org/">Sunsetting Python 2 support
</a> å’Œ <a href="https://pythonclock.org/">Python 2.7 Countdown
</a>ï¼ŒJust drop itã€‚</p>
<p>ç»è¿‡è¿™æ­¥åï¼Œ<code>example</code> å’ŒåŸæ¥ç›¸åŒï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>example = convert_to_unicode(example)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>example</span><br><span class="line"><span class="string">&#x27;Kerasæ˜¯ONEIROSï¼ˆOpen-ended Neuro-Electronic Intelligent Robot Operating Systemï¼Œå¼€æ”¾å¼ç¥ç»ç”µå­æ™ºèƒ½æœºå™¨äººæ“ä½œç³»ç»Ÿï¼‰é¡¹ç›®ç ”ç©¶å·¥ä½œçš„éƒ¨åˆ†äº§ç‰©[3]ï¼Œä¸»è¦ä½œè€…å’Œç»´æŠ¤è€…æ˜¯Googleå·¥ç¨‹å¸ˆFranÃ§ois Cholletã€‚\r\n&#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="å»é™¤å„ç§å¥‡æ€ªå­—ç¬¦"><a href="#å»é™¤å„ç§å¥‡æ€ªå­—ç¬¦" class="headerlink" title="å»é™¤å„ç§å¥‡æ€ªå­—ç¬¦"></a>å»é™¤å„ç§å¥‡æ€ªå­—ç¬¦</h3><p><strong>å»é™¤å„ç§å¥‡æ€ªå­—ç¬¦</strong>å¯¹åº”äº BT ç±»çš„ <code>_clean_text(text)</code> æ–¹æ³•ï¼Œé€šè¿‡ Unicode <a href="https://en.wikipedia.org/wiki/Code_point">ç ä½</a>ï¼ˆUnicode code pointï¼Œä»¥ä¸‹ç ä½å‡æŒ‡ Unicode ç ä½ï¼‰æ¥å»é™¤å„ç§ä¸åˆæ³•å­—ç¬¦å’Œå¤šä½™ç©ºæ ¼ï¼ŒåŒ…æ‹¬ï¼š</p>
<blockquote>
<p>Python ä¸­å¯ä»¥é€šè¿‡ <code>ord(c)</code> æ¥è·å–å­—ç¬¦ <code>c</code> çš„ç ä½ï¼Œä½¿ç”¨ <code>chr(i)</code> æ¥è·å–ç ä½ä¸º <code>i</code> çš„ Unicode å­—ç¬¦ï¼Œ$0 \leq i \leq \text{0x10ffff}$ï¼Œå³åè¿›åˆ¶çš„ $[0, 1114111]$ã€‚</p>
</blockquote>
<ul>
<li>ç ä½ä¸º 0 çš„ <code>\x00</code>ï¼Œå³<a href="https://en.wikipedia.org/wiki/Null_character">ç©ºå­—ç¬¦</a>ï¼ˆNull characterï¼‰ï¼Œæˆ–å«ç»“æŸç¬¦ï¼Œè‚‰çœ¼ä¸å¯è§ï¼Œå±äº<a href="https://en.wikipedia.org/wiki/Control_character">æ§åˆ¶å­—ç¬¦</a>ï¼Œä¸€èˆ¬åœ¨å­—ç¬¦ä¸²æœ«å°¾ã€‚æ³¨æ„ä¸æ˜¯ç©ºæ ¼ï¼Œç©ºæ ¼çš„ç ä½æ˜¯ 32ã€‚</li>
<li>ç ä½ä¸º 0xfffdï¼ˆåè¿›åˆ¶ 65533ï¼‰çš„ <code>ï¿½</code>ï¼Œå³<a href="https://en.wikipedia.org/wiki/Specials_(Unicode_block">æ›¿æ¢å­—ç¬¦</a>)ï¼ˆREPLACEMENT CHARACTERï¼‰ï¼Œé€šå¸¸ç”¨æ¥æ›¿æ¢æœªçŸ¥ã€æ— æ³•è¯†åˆ«æˆ–è€…æ— æ³•è¡¨ç¤ºçš„å­—ç¬¦ã€‚</li>
<li>é™¤ <code>\t</code>ã€<code>\r</code> å’Œ <code>\n</code> ä»¥å¤–çš„æ§åˆ¶å­—ç¬¦ï¼ˆControl characterï¼‰ï¼Œå³ Unicode ç±»åˆ«æ˜¯ <code>Cc</code> å’Œ <code>Cf</code> çš„å­—ç¬¦ã€‚å¯ä»¥ä½¿ç”¨ <code>unicodedata.category(c)</code> æ¥æŸ¥çœ‹ <code>c</code> çš„ Unicode ç±»åˆ«ã€‚ä»£ç ä¸­ç”¨ <code>_is_control(char)</code> æ¥åˆ¤æ–­ <code>char</code> æ˜¯ä¸æ˜¯æ§åˆ¶å­—ç¬¦ã€‚</li>
<li>å°†æ‰€æœ‰ç©ºç™½å­—ç¬¦è½¬æ¢ä¸ºä¸€ä¸ªç©ºæ ¼ï¼ŒåŒ…æ‹¬æ ‡å‡†ç©ºæ ¼ã€<code>\t</code>ã€<code>\r</code>ã€<code>\n</code> ä»¥åŠ Unicode ç±»åˆ«ä¸º <code>Zs</code> çš„å­—ç¬¦ã€‚ä»£ç ä¸­ç”¨ <code>_is_whitespace(char)</code> æ¥åˆ¤æ–­ <code>char</code> æ˜¯ä¸æ˜¯ç©ºç™½å­—ç¬¦ã€‚</li>
</ul>
<p>ç»è¿‡è¿™æ­¥åï¼Œ<code>example</code> ä¸­çš„ <code>\r\n</code> è¢«æ›¿æ¢æˆä¸¤ä¸ªç©ºæ ¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>example = _clean_text(example)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>example</span><br><span class="line"><span class="string">&#x27;Kerasæ˜¯ONEIROSï¼ˆOpen-ended Neuro-Electronic Intelligent Robot Operating Systemï¼Œå¼€æ”¾å¼ç¥ç»ç”µå­æ™ºèƒ½æœºå™¨äººæ“ä½œç³»ç»Ÿï¼‰é¡¹ç›®ç ”ç©¶å·¥ä½œçš„éƒ¨åˆ†äº§ç‰©[3]ï¼Œä¸»è¦ä½œè€…å’Œç»´æŠ¤è€…æ˜¯Googleå·¥ç¨‹å¸ˆFranÃ§ois Cholletã€‚  &#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="å¤„ç†ä¸­æ–‡"><a href="#å¤„ç†ä¸­æ–‡" class="headerlink" title="å¤„ç†ä¸­æ–‡"></a>å¤„ç†ä¸­æ–‡</h3><p><strong>å¤„ç†ä¸­æ–‡</strong>å¯¹åº”äº BT ç±»çš„ <code>_tokenize_chinese_chars(text)</code> æ–¹æ³•ã€‚å¯¹äº <code>text</code> ä¸­çš„å­—ç¬¦ï¼Œé¦–å…ˆåˆ¤æ–­å…¶æ˜¯ä¸æ˜¯ã€Œä¸­æ–‡å­—ç¬¦ã€ï¼ˆå…³äºä¸­æ–‡å­—ç¬¦çš„è¯´æ˜è§ä¸‹æ–¹å¼•ç”¨å—è¯´æ˜ï¼‰ï¼Œæ˜¯çš„è¯åœ¨å…¶å‰ååŠ ä¸Šä¸€ä¸ªç©ºæ ¼ï¼Œå¦åˆ™åŸæ ·è¾“å‡ºã€‚é‚£ä¹ˆæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚ä½•åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦æ˜¯ä¸æ˜¯ã€Œä¸­æ–‡ã€å‘¢ï¼Ÿ</p>
<p><code>_is_chinese_char(cp)</code> æ–¹æ³•ï¼Œ<code>cp</code> å°±æ˜¯åˆšæ‰è¯´çš„ç ä½ï¼Œé€šè¿‡ç ä½æ¥åˆ¤æ–­ï¼Œæ€»å…±æœ‰ 81520 ä¸ªå­—ï¼Œè¯¦ç»†çš„ç ä½èŒƒå›´å¦‚ä¸‹ï¼ˆéƒ½æ˜¯é—­åŒºé—´ï¼‰ï¼š</p>
<ul>
<li>[0x4E00, 0x9FFF]ï¼šåè¿›åˆ¶ [19968, 40959]</li>
<li>[0x3400, 0x4DBF]ï¼šåè¿›åˆ¶ [13312, 19903]</li>
<li>[0x20000, 0x2A6DF]ï¼šåè¿›åˆ¶ [131072, 173791]</li>
<li>[0x2A700, 0x2B73F]ï¼šåè¿›åˆ¶ [173824, 177983]</li>
<li>[0x2B740, 0x2B81F]ï¼šåè¿›åˆ¶ [177984, 178207]</li>
<li>[0x2B820, 0x2CEAF]ï¼šåè¿›åˆ¶ [178208, 183983]</li>
<li>[0xF900, 0xFAFF]ï¼šåè¿›åˆ¶ [63744, 64255]</li>
<li>[0x2F800, 0x2FA1F]ï¼šåè¿›åˆ¶ [194560, 195103]</li>
</ul>
<p>å…¶å®æˆ‘è§‰å¾—è¿™ä¸ªèŒƒå›´å¯ä»¥å†ç²¾ç®€ä¸‹ï¼Œå› ä¸ºæœ‰å‡ ä¸ªåŒºé—´æ˜¯ç›¸é‚»çš„ï¼Œä¸‹é¢ä¸‰ä¸ªåŒºé—´ï¼š</p>
<ul>
<li>[0x2A700, 0x2B73F]ï¼šåè¿›åˆ¶ [173824, <strong>177983</strong>]</li>
<li>[0x2B740, 0x2B81F]ï¼šåè¿›åˆ¶ [<strong>177984</strong>, <strong>178207</strong>]</li>
<li>[0x2B820, 0x2CEAF]ï¼šåè¿›åˆ¶ [<strong>178208</strong>, 183983]</li>
</ul>
<p>å¯ä»¥ç²¾ç®€æˆä¸€ä¸ªï¼š</p>
<ul>
<li>[0x2A700, 0x2CEAF]ï¼šåè¿›åˆ¶ [173824, 183983]</li>
</ul>
<p>åŸæ¥çš„ 8 ä¸ªåŒºé—´ç²¾ç®€æˆ 6 ä¸ªï¼Œè‡³äºåŸæ¥ä¸ºä»€ä¹ˆå†™æˆ 8 ä¸ªï¼ŒI donâ€™t know å•Š ğŸ˜‚</p>
<blockquote>
<p>å…³äºã€Œä¸­æ–‡å­—ç¬¦ã€çš„è¯´æ˜ï¼šæŒ‰ç…§ä»£ç ä¸­çš„å®šä¹‰ï¼Œè¿™é‡Œè¯´çš„ã€Œä¸­æ–‡å­—ç¬¦ã€æŒ‡çš„æ˜¯ <a href="https://en.wikipedia.org/wiki/CJK_Unified_Ideographs_(Unicode_block">CJK Unicode block</a>) ä¸­çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬ç°ä»£æ±‰è¯­ã€éƒ¨åˆ†æ—¥è¯­ã€éƒ¨åˆ†éŸ©è¯­å’Œè¶Šå—è¯­ã€‚ä½†æ˜¯æ ¹æ® <a href="https://en.wikipedia.org/wiki/CJK_Unified_Ideographs_(Unicode_block">CJK Unicode block</a>) ä¸­çš„å®šä¹‰ï¼Œè¿™äº›å­—ç¬¦åªåŒ…æ‹¬ç¬¬ä¸€ä¸ªç ä½åŒºé—´ï¼ˆ[0x4E00, 0x9FFF]ï¼‰å†…çš„å­—ç¬¦ï¼Œä¹Ÿå°±æ˜¯è¯´<strong>ä»£ç ä¸­çš„å­—ç¬¦è¦è¿œè¿œå¤šäº CJK Unicode block ä¸­åŒ…æ‹¬çš„å­—ç¬¦</strong>ï¼Œè¿™ä¸€ç‚¹æš‚æ—¶æœ‰äº›ç–‘é—®ã€‚æˆ‘æŠŠæºç å…³äºè¿™å—çš„æ³¨é‡Šå¼•ç”¨è¿‡æ¥å¦‚ä¸‹ï¼š</p>
</blockquote>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">_is_chinese_char</span>(<span class="params">self, cp</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Checks whether CP is the codepoint of a CJK character.&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># This defines a &quot;chinese character&quot; as anything in the CJK Unicode block:</span></span><br><span class="line">    <span class="comment">#   https://en.wikipedia.org/wiki/CJK_Unified_Ideographs_(Unicode_block)</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># Note that the CJK Unicode block is NOT all Japanese and Korean characters,</span></span><br><span class="line">    <span class="comment"># despite its name. The modern Korean Hangul alphabet is a different block,</span></span><br><span class="line">    <span class="comment"># as is Japanese Hiragana and Katakana. Those alphabets are used to write</span></span><br><span class="line">    <span class="comment"># space-separated words, so they are not treated specially and handled</span></span><br><span class="line">    <span class="comment"># like the all of the other languages.</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>
<p>ç»è¿‡è¿™æ­¥åï¼Œä¸­æ–‡è¢«æŒ‰å­—åˆ†å¼€ï¼Œç”¨ç©ºæ ¼åˆ†éš”ï¼Œä½†è‹±æ–‡æ•°å­—ç­‰ä»ç„¶ä¿æŒåŸçŠ¶ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>example = _tokenize_chinese_chars(example)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>example</span><br><span class="line"><span class="string">&#x27;Keras æ˜¯ ONEIROSï¼ˆOpen-ended Neuro-Electronic Intelligent Robot Operating Systemï¼Œ å¼€  æ”¾  å¼  ç¥  ç»  ç”µ  å­  æ™º  èƒ½  æœº  å™¨  äºº  æ“  ä½œ  ç³»  ç»Ÿ ï¼‰ é¡¹  ç›®  ç ”  ç©¶  å·¥  ä½œ  çš„  éƒ¨  åˆ†  äº§  ç‰© [3]ï¼Œ ä¸»  è¦  ä½œ  è€…  å’Œ  ç»´  æŠ¤  è€…  æ˜¯ Google å·¥  ç¨‹  å¸ˆ FranÃ§ois Cholletã€‚  &#x27;</span></span><br></pre></td></tr></table></figure>
<h3 id="ç©ºæ ¼åˆ†è¯"><a href="#ç©ºæ ¼åˆ†è¯" class="headerlink" title="ç©ºæ ¼åˆ†è¯"></a>ç©ºæ ¼åˆ†è¯</h3><p><strong>ç©ºæ ¼åˆ†è¯</strong>å¯¹åº”äº <code>whitespace_tokenize(text)</code> å‡½æ•°ã€‚é¦–å…ˆå¯¹ <code>text</code> è¿›è¡Œ <code>strip()</code> æ“ä½œï¼Œå»æ‰ä¸¤è¾¹å¤šä½™ç©ºç™½å­—ç¬¦ï¼Œç„¶åå¦‚æœå‰©ä¸‹çš„æ˜¯ä¸€ä¸ªç©ºå­—ç¬¦ä¸²ï¼Œåˆ™ç›´æ¥è¿”å›ç©ºåˆ—è¡¨ï¼Œå¦åˆ™è¿›è¡Œ <code>split()</code> æ“ä½œï¼Œå¾—åˆ°æœ€åˆçš„åˆ†è¯ç»“æœ <code>orig_tokens</code>ã€‚</p>
<p>ç»è¿‡è¿™æ­¥åï¼Œ<code>example</code> å˜æˆä¸€ä¸ªåˆ—è¡¨ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>example = whitespace_tokenize(example)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>example</span><br><span class="line">[<span class="string">&#x27;Keras&#x27;</span>, <span class="string">&#x27;æ˜¯&#x27;</span>, <span class="string">&#x27;ONEIROSï¼ˆOpen-ended&#x27;</span>, <span class="string">&#x27;Neuro-Electronic&#x27;</span>, <span class="string">&#x27;Intelligent&#x27;</span>, <span class="string">&#x27;Robot&#x27;</span>, <span class="string">&#x27;Operating&#x27;</span>, <span class="string">&#x27;Systemï¼Œ&#x27;</span>, <span class="string">&#x27;å¼€&#x27;</span>, <span class="string">&#x27;æ”¾&#x27;</span>, <span class="string">&#x27;å¼&#x27;</span>, <span class="string">&#x27;ç¥&#x27;</span>, <span class="string">&#x27;ç»&#x27;</span>, <span class="string">&#x27;ç”µ&#x27;</span>, <span class="string">&#x27;å­&#x27;</span>, <span class="string">&#x27;æ™º&#x27;</span>, <span class="string">&#x27;èƒ½&#x27;</span>, <span class="string">&#x27;æœº&#x27;</span>, <span class="string">&#x27;å™¨&#x27;</span>, <span class="string">&#x27;äºº&#x27;</span>, <span class="string">&#x27;æ“&#x27;</span>, <span class="string">&#x27;ä½œ&#x27;</span>, <span class="string">&#x27;ç³»&#x27;</span>, <span class="string">&#x27;ç»Ÿ&#x27;</span>, <span class="string">&#x27;ï¼‰&#x27;</span>, <span class="string">&#x27;é¡¹&#x27;</span>, <span class="string">&#x27;ç›®&#x27;</span>, <span class="string">&#x27;ç ”&#x27;</span>, <span class="string">&#x27;ç©¶&#x27;</span>, <span class="string">&#x27;å·¥&#x27;</span>, <span class="string">&#x27;ä½œ&#x27;</span>, <span class="string">&#x27;çš„&#x27;</span>, <span class="string">&#x27;éƒ¨&#x27;</span>, <span class="string">&#x27;åˆ†&#x27;</span>, <span class="string">&#x27;äº§&#x27;</span>, <span class="string">&#x27;ç‰©&#x27;</span>, <span class="string">&#x27;[3]ï¼Œ&#x27;</span>, <span class="string">&#x27;ä¸»&#x27;</span>, <span class="string">&#x27;è¦&#x27;</span>, <span class="string">&#x27;ä½œ&#x27;</span>, <span class="string">&#x27;è€…&#x27;</span>, <span class="string">&#x27;å’Œ&#x27;</span>, <span class="string">&#x27;ç»´&#x27;</span>, <span class="string">&#x27;æŠ¤&#x27;</span>, <span class="string">&#x27;è€…&#x27;</span>, <span class="string">&#x27;æ˜¯&#x27;</span>, <span class="string">&#x27;Google&#x27;</span>, <span class="string">&#x27;å·¥&#x27;</span>, <span class="string">&#x27;ç¨‹&#x27;</span>, <span class="string">&#x27;å¸ˆ&#x27;</span>, <span class="string">&#x27;FranÃ§ois&#x27;</span>, <span class="string">&#x27;Cholletã€‚&#x27;</span>]</span><br></pre></td></tr></table></figure>
<h3 id="å»é™¤å¤šä½™å­—ç¬¦å’Œæ ‡ç‚¹åˆ†è¯"><a href="#å»é™¤å¤šä½™å­—ç¬¦å’Œæ ‡ç‚¹åˆ†è¯" class="headerlink" title="å»é™¤å¤šä½™å­—ç¬¦å’Œæ ‡ç‚¹åˆ†è¯"></a>å»é™¤å¤šä½™å­—ç¬¦å’Œæ ‡ç‚¹åˆ†è¯</h3><p>æ¥ä¸‹æ¥æ˜¯é’ˆå¯¹ <code>orig_tokens</code> çš„åˆ†è¯ç»“æœè¿›ä¸€æ­¥å¤„ç†ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> token <span class="keyword">in</span> orig_tokens:</span><br><span class="line">      <span class="keyword">if</span> self.do_lower_case:</span><br><span class="line">        token = token.lower()</span><br><span class="line">        token = self._run_strip_accents(token)</span><br><span class="line">      split_tokens.extend(self._run_split_on_punc(token))</span><br></pre></td></tr></table></figure>
<p>é€»è¾‘ä¸å¤æ‚ï¼Œæˆ‘åœ¨è¿™é‡Œä¸»è¦è¯´ä¸‹ <code>_run_strip_accents</code> å’Œ <code>_run_split_on_punc</code>ã€‚</p>
<p><strong><code>_run_strip_accents(text)</code></strong> æ–¹æ³•ç”¨äºå»é™¤ <a href="https://en.wikipedia.org/wiki/Diacritic">accents</a>ï¼Œå³å˜éŸ³ç¬¦å·ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯å˜éŸ³ç¬¦å·å‘¢ï¼Ÿåƒ Keras ä½œè€… FranÃ§ois Chollet åå­—ä¸­äº›è®¸å¥‡æ€ªçš„å­—ç¬¦ <code>Ã§</code>ã€ç®€å†çš„è‹±æ–‡ rÃ©sumÃ© ä¸­çš„ <code>Ã©</code> å’Œä¸­æ–‡æ‹¼éŸ³å£°è°ƒ <code>Ã¡</code> ç­‰ï¼Œè¿™äº›éƒ½æ˜¯å˜éŸ³ç¬¦å· accentsï¼Œç»´åŸºç™¾ç§‘ä¸­æè¿°å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>é™„åŠ ç¬¦å·æˆ–ç§°å˜éŸ³ç¬¦å·ï¼ˆdiacriticã€diacritical markã€diacritical pointã€diacritical signï¼‰ï¼Œæ˜¯æŒ‡æ·»åŠ åœ¨å­—æ¯ä¸Šé¢çš„ç¬¦å·ï¼Œä»¥æ›´æ”¹å­—æ¯çš„å‘éŸ³æˆ–è€…ä»¥åŒºåˆ†æ‹¼å†™ç›¸ä¼¼è¯è¯­ã€‚ä¾‹å¦‚æ±‰è¯­æ‹¼éŸ³å­—æ¯â€œÃ¼â€ä¸Šé¢çš„ä¸¤ä¸ªå°ç‚¹ï¼Œæˆ–â€œÃ¡â€ã€â€œÃ â€å­—æ¯ä¸Šé¢çš„æ ‡è°ƒç¬¦ã€‚</p>
</blockquote>
<p>å¸¸è§ accents å¯å‚è§ <a href="https://practicaltypography.com/common-accented-characters.html">Common accented characters</a>ã€‚</p>
<p><code>_run_strip_accents(text)</code> æ–¹æ³•å°±æ˜¯è¦æŠŠè¿™äº› accents å»æ‰ï¼Œä¾‹å¦‚ <code>FranÃ§ois Chollet</code> å˜æˆ <code>Francois Chollet</code>ï¼Œ<code>rÃ©sumÃ©</code> å˜æˆ <code>resume</code>ï¼Œ<code>Ã¡</code> å˜æˆ <code>a</code>ã€‚è¯¥æ–¹æ³•ä»£ç ä¸é•¿ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">_run_strip_accents</span>(<span class="params">self, text</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Strips accents from a piece of text.&quot;&quot;&quot;</span></span><br><span class="line">    text = unicodedata.normalize(<span class="string">&quot;NFD&quot;</span>, text)</span><br><span class="line">    output = []</span><br><span class="line">    <span class="keyword">for</span> char <span class="keyword">in</span> text:</span><br><span class="line">      cat = unicodedata.category(char)</span><br><span class="line">      <span class="keyword">if</span> cat == <span class="string">&quot;Mn&quot;</span>:</span><br><span class="line">        <span class="keyword">continue</span></span><br><span class="line">      output.append(char)</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>.join(output)</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨åˆ—è¡¨æ¨å¯¼å¼ä»£ç è¿˜å¯ä»¥è¿›ä¸€æ­¥ç²¾ç®€ä¸ºï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">_run_strip_accents</span>(<span class="params">self, text</span>):</span><br><span class="line">    <span class="string">&quot;&quot;&quot;Strips accents from a piece of text.&quot;&quot;&quot;</span></span><br><span class="line">    text = unicodedata.normalize(<span class="string">&quot;NFD&quot;</span>, text)</span><br><span class="line">    output = [char <span class="keyword">for</span> char <span class="keyword">in</span> text <span class="keyword">if</span> unicodedata.category(char) != <span class="string">&#x27;Mn&#x27;</span>]</span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&quot;</span>.join(output)</span><br></pre></td></tr></table></figure>
<p>è¿™æ®µä»£ç æ ¸å¿ƒå°±æ˜¯ <a href="https://docs.python.org/zh-cn/3.7/library/unicodedata.html#unicodedata.normalize"><code>unicodedata.normalize</code></a> å’Œ <a href="https://docs.python.org/zh-cn/3.7/library/unicodedata.html#unicodedata.category"><code>unicodedata.category</code></a> ä¸¤ä¸ªå‡½æ•°ã€‚å‰è€…è¿”å›è¾“å…¥å­—ç¬¦ä¸² <code>text</code> çš„è§„èŒƒåˆ†è§£å½¢å¼ï¼ˆUnicode å­—ç¬¦æœ‰å¤šç§è§„èŒƒå½¢å¼ï¼Œæœ¬æ–‡é»˜è®¤æŒ‡ <code>NFD</code> å½¢å¼ï¼Œå³è§„èŒƒåˆ†è§£ï¼‰ï¼Œåè€…è¿”å›è¾“å…¥å­—ç¬¦ <code>char</code> çš„ <a href="https://www.compart.com/en/unicode/category">Unicode ç±»åˆ«</a>ã€‚ä¸‹é¢æˆ‘ä¸¾ä¾‹è¯´æ˜ä¸€ä¸‹ä¸¤ä¸ªå‡½æ•°çš„ä½œç”¨ã€‚</p>
<p>å‡å¦‚æˆ‘ä»¬è¦å¤„ç† <code>ÄÃ³Ç”Ã¨</code>ï¼Œå…¶ä¸­å«æœ‰å˜éŸ³ç¬¦å·ï¼Œè¿™ç§å­—ç¬¦å…¶å®æ˜¯ç”±ä¸¤ä¸ªå­—ç¬¦ç»„æˆçš„ï¼Œæ¯”å¦‚ <code>Ä</code>ï¼ˆç ä½ 0x101ï¼‰æ˜¯ç”± <code>a</code>ï¼ˆç ä½ 0x61ï¼‰å’Œ ä¸Šé¢é‚£ä¸€æ¨ªï¼ˆç ä½ 0x304ï¼‰ç»„æˆçš„ï¼Œé€šè¿‡ <code>unicodedata.normalize</code> å°±å¯ä»¥æŠŠè¿™ä¸¤è€…æ‹†åˆ†å‡ºæ¥ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="keyword">import</span> unicodedata  <span class="comment"># unicodedata æ˜¯å†…ç½®åº“</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s = <span class="string">&#x27;ÄÃ³Ç”Ã¨&#x27;</span></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s_norm = unicodedata.normalize(<span class="string">&#x27;NFD&#x27;</span>, s)</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>s_norm, <span class="built_in">len</span>(s_norm)</span><br><span class="line">(<span class="string">&#x27;aÌ„oÌuÌŒeÌ€&#x27;</span>, <span class="number">8</span>)  <span class="comment"># çœ‹èµ·æ¥å’ŒåŸæ¥çš„ä¸€æ‘¸ä¸€æ ·ï¼Œä½†æ˜¯é•¿åº¦å·²ç»å˜äº†</span></span><br></pre></td></tr></table></figure>
<p><code>unicodedata.category</code> ç”¨æ¥è¿”å›å„ä¸ªå­—ç¬¦çš„ç±»åˆ«ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27; &#x27;</span>.join(unicodedata.category(c) <span class="keyword">for</span> c <span class="keyword">in</span> s_norm)</span><br><span class="line"><span class="string">&#x27;Ll Mn Ll Mn Ll Mn Ll Mn&#x27;</span></span><br></pre></td></tr></table></figure>
<p><a href="https://www.compart.com/en/unicode/category/Ll"><code>Ll</code> ç±»åˆ«</a> è¡¨ç¤º Lowercase Letterï¼Œå°å†™å­—æ¯ã€‚<a href="https://www.compart.com/en/unicode/category/Mn"><code>Mn</code> ç±»åˆ«</a> è¡¨ç¤ºçš„æ˜¯ Nonspacing Markï¼Œéé—´è·æ ‡è®°ï¼Œå˜éŸ³å­—ç¬¦å°±å±äºè¿™ç±»ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ ¹æ®ç±»åˆ«ç›´æ¥å»æ‰å˜éŸ³å­—ç¬¦ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span><span class="string">&#x27;&#x27;</span>.join(c <span class="keyword">for</span> c <span class="keyword">in</span> s_norm <span class="keyword">if</span> unicodedata.category(c) != <span class="string">&#x27;Mn&#x27;</span>)</span><br><span class="line"><span class="string">&#x27;aoue&#x27;</span></span><br></pre></td></tr></table></figure>
<p><strong><code>_run_split_on_punc(text)</code></strong> æ˜¯æ ‡ç‚¹åˆ†è¯ï¼ŒæŒ‰ç…§æ ‡ç‚¹ç¬¦å·åˆ†è¯ã€‚</p>
<blockquote>
<p><code>_run_split_on_punc(text)</code> æ–¹æ³•æ˜¯é’ˆå¯¹ä¸Šä¸€æ­¥ç©ºæ ¼åˆ†è¯åçš„æ¯ä¸ª token çš„ã€‚</p>
</blockquote>
<p>åœ¨è¯´è¿™ä¸ªæ–¹æ³•ä¹‹å‰ï¼Œå…ˆè¯´ä¸€ä¸‹åˆ¤æ–­ä¸€ä¸ªå­—ç¬¦æ˜¯å¦æ˜¯æ ‡ç‚¹ç¬¦å·çš„å‡½æ•°ï¼š<code>_is_punctuation(char)</code>ã€‚è¯¥å‡½æ•°ä»£ç ä¸é•¿ï¼Œæˆ‘æ”¾åˆ°ä¸‹é¢ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">_is_punctuation</span>(<span class="params">char</span>):</span><br><span class="line">  <span class="string">&quot;&quot;&quot;Checks whether `chars` is a punctuation character.&quot;&quot;&quot;</span></span><br><span class="line">  cp = <span class="built_in">ord</span>(char)</span><br><span class="line">  <span class="keyword">if</span> ((cp &gt;= <span class="number">33</span> <span class="keyword">and</span> cp &lt;= <span class="number">47</span>) <span class="keyword">or</span> (cp &gt;= <span class="number">58</span> <span class="keyword">and</span> cp &lt;= <span class="number">64</span>) <span class="keyword">or</span></span><br><span class="line">      (cp &gt;= <span class="number">91</span> <span class="keyword">and</span> cp &lt;= <span class="number">96</span>) <span class="keyword">or</span> (cp &gt;= <span class="number">123</span> <span class="keyword">and</span> cp &lt;= <span class="number">126</span>)):</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">  cat = unicodedata.category(char)</span><br><span class="line">  <span class="keyword">if</span> cat.startswith(<span class="string">&quot;P&quot;</span>):</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">  <span class="keyword">return</span> <span class="literal">False</span></span><br></pre></td></tr></table></figure>
<p>é€šå¸¸æˆ‘ä»¬ä¼šç”¨ä¸€ä¸ªç±»ä¼¼è¯åº“çš„æ–‡ä»¶æ¥å­˜æ”¾æ‰€æœ‰çš„æ ‡ç‚¹ç¬¦å·ï¼Œè€Œ <code>_is_punctuation</code> å‡½æ•°æ˜¯é€šè¿‡ç ä½æ¥åˆ¤æ–­çš„ï¼Œè¿™æ ·æ›´çµæ´»ï¼Œä¹Ÿä¸å¿…ä¿ç•™ä¸€ä¸ªé¢å¤–çš„è¯åº“æ–‡ä»¶ã€‚å…·ä½“æ˜¯æœ‰ä¸¤ç§æƒ…å†µä¼šè§†ä¸ºæ ‡ç‚¹ï¼š<a href="https://en.wikipedia.org/wiki/ASCII">ASCII</a> ä¸­é™¤äº†å­—æ¯å’Œæ•°å­—æ„å¤–çš„å­—ç¬¦å’Œä»¥ P å¼€å¤´çš„ Unicode ç±»åˆ«ä¸­çš„å­—ç¬¦ã€‚ç¬¬ä¸€ç§æƒ…å†µæ€»å…±æœ‰ 32 ä¸ªå­—ç¬¦ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">!&quot;#$%&amp;&#x27;()*+,-./:;&lt;=&gt;?@[\]^_`&#123;|&#125;~</span><br></pre></td></tr></table></figure>
<p><code>_run_split_on_punc</code> çš„æ€»ä½“è¿‡ç¨‹å°±æ˜¯ï¼š</p>
<ol>
<li>é¦–å…ˆè®¾ç½® <code>start_new_word=True</code> å’Œ <code>output=[]</code>ï¼Œ<code>output</code> å°±æ˜¯æœ€ç»ˆçš„è¾“å‡º</li>
<li>å¯¹ <code>text</code> ä¸­æ¯ä¸ªå­—ç¬¦è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœè¯¥å­—ç¬¦æ˜¯æ ‡ç‚¹ï¼Œåˆ™ <code>output.append([char])</code>ï¼Œå¹¶è®¾ç½® <code>start_new_word=True</code></li>
<li>å¦‚æœä¸æ˜¯æ ‡ç‚¹ä¸” <code>start_new_word=True</code>ï¼Œé‚£ä¹ˆæ„å‘³ç€è¿™æ˜¯æ–°ä¸€æ®µçš„å¼€å§‹ï¼Œç›´æ¥ <code>output.append([])</code>ï¼Œç„¶åå†è®¾ç½® <code>start_new_word = False</code>ï¼Œå¹¶åœ¨åˆšæ‰ append çš„ç©ºåˆ—è¡¨ä¸ŠåŠ ä¸Šå½“å‰å­—ç¬¦ï¼š<code>output[-1].append(char)</code></li>
</ol>
<p>ç°åœ¨å¾—åˆ°çš„ <code>output</code> æ˜¯ä¸€ä¸ªåµŒå¥—åˆ—è¡¨ï¼Œå…¶ä¸­æ¯ä¸€ä¸ªåˆ—è¡¨éƒ½æ˜¯è¢«æ ‡ç‚¹åˆ†å¼€çš„ä¸€æ®µï¼Œæœ€åæŠŠæ¯ä¸ªåˆ—è¡¨ join æ‹¼æ¥ä¸€ä¸‹ï¼Œæ‹‰å¹³ <code>output</code> å³å¯ã€‚</p>
<p>ç»è¿‡è¿™æ­¥åï¼ŒåŸå…ˆæ²¡æœ‰è¢«åˆ†å¼€çš„å­—è¯æ ‡ç‚¹ï¼ˆä¾‹å¦‚ <code>ONEIROSï¼ˆOpen-ended</code>ï¼‰ã€æ²¡æœ‰å»æ‰çš„å˜éŸ³ç¬¦å·ï¼ˆä¾‹å¦‚ <code>Ã§</code>ï¼‰éƒ½è¢«ç›¸åº”å¤„ç†ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>example</span><br><span class="line">[<span class="string">&#x27;keras&#x27;</span>, <span class="string">&#x27;æ˜¯&#x27;</span>, <span class="string">&#x27;oneiros&#x27;</span>, <span class="string">&#x27;ï¼ˆ&#x27;</span>, <span class="string">&#x27;open&#x27;</span>, <span class="string">&#x27;-&#x27;</span>, <span class="string">&#x27;ended&#x27;</span>, <span class="string">&#x27;neuro&#x27;</span>, <span class="string">&#x27;-&#x27;</span>, <span class="string">&#x27;electronic&#x27;</span>, <span class="string">&#x27;intelligent&#x27;</span>, <span class="string">&#x27;robot&#x27;</span>, <span class="string">&#x27;operating&#x27;</span>, <span class="string">&#x27;system&#x27;</span>, <span class="string">&#x27;ï¼Œ&#x27;</span>, <span class="string">&#x27;å¼€&#x27;</span>, <span class="string">&#x27;æ”¾&#x27;</span>, <span class="string">&#x27;å¼&#x27;</span>, <span class="string">&#x27;ç¥&#x27;</span>, <span class="string">&#x27;ç»&#x27;</span>, <span class="string">&#x27;ç”µ&#x27;</span>, <span class="string">&#x27;å­&#x27;</span>, <span class="string">&#x27;æ™º&#x27;</span>, <span class="string">&#x27;èƒ½&#x27;</span>, <span class="string">&#x27;æœº&#x27;</span>, <span class="string">&#x27;å™¨&#x27;</span>, <span class="string">&#x27;äºº&#x27;</span>, <span class="string">&#x27;æ“&#x27;</span>, <span class="string">&#x27;ä½œ&#x27;</span>, <span class="string">&#x27;ç³»&#x27;</span>, <span class="string">&#x27;ç»Ÿ&#x27;</span>, <span class="string">&#x27;ï¼‰&#x27;</span>, <span class="string">&#x27;é¡¹&#x27;</span>, <span class="string">&#x27;ç›®&#x27;</span>, <span class="string">&#x27;ç ”&#x27;</span>, <span class="string">&#x27;ç©¶&#x27;</span>, <span class="string">&#x27;å·¥&#x27;</span>, <span class="string">&#x27;ä½œ&#x27;</span>, <span class="string">&#x27;çš„&#x27;</span>, <span class="string">&#x27;éƒ¨&#x27;</span>, <span class="string">&#x27;åˆ†&#x27;</span>, <span class="string">&#x27;äº§&#x27;</span>, <span class="string">&#x27;ç‰©&#x27;</span>, <span class="string">&#x27;[&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;]&#x27;</span>, <span class="string">&#x27;ï¼Œ&#x27;</span>, <span class="string">&#x27;ä¸»&#x27;</span>, <span class="string">&#x27;è¦&#x27;</span>, <span class="string">&#x27;ä½œ&#x27;</span>, <span class="string">&#x27;è€…&#x27;</span>, <span class="string">&#x27;å’Œ&#x27;</span>, <span class="string">&#x27;ç»´&#x27;</span>, <span class="string">&#x27;æŠ¤&#x27;</span>, <span class="string">&#x27;è€…&#x27;</span>, <span class="string">&#x27;æ˜¯&#x27;</span>, <span class="string">&#x27;google&#x27;</span>, <span class="string">&#x27;å·¥&#x27;</span>, <span class="string">&#x27;ç¨‹&#x27;</span>, <span class="string">&#x27;å¸ˆ&#x27;</span>, <span class="string">&#x27;francois&#x27;</span>, <span class="string">&#x27;chollet&#x27;</span>, <span class="string">&#x27;ã€‚&#x27;</span>]</span><br></pre></td></tr></table></figure>
<h3 id="å†æ¬¡ç©ºæ ¼åˆ†è¯"><a href="#å†æ¬¡ç©ºæ ¼åˆ†è¯" class="headerlink" title="å†æ¬¡ç©ºæ ¼åˆ†è¯"></a>å†æ¬¡ç©ºæ ¼åˆ†è¯</h3><p>è¿™å¥å¯¹åº”äºå¦‚ä¸‹ä»£ç ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">output_tokens = whitespace_tokenize(<span class="string">&quot; &quot;</span>.join(split_tokens))</span><br></pre></td></tr></table></figure>
<p>å¾ˆç®€å•ï¼Œå°±æ˜¯å…ˆç”¨æ ‡å‡†ç©ºæ ¼æ‹¼æ¥ä¸Šä¸€æ­¥çš„å¤„ç†ç»“æœï¼Œå†æ‰§è¡Œç©ºæ ¼åˆ†è¯ã€‚ï¼ˆBut WHY?ï¼‰</p>
<p>ç»è¿‡è¿™æ­¥åï¼Œå’Œä¸Šæ­¥ç»“æœä¸€æ ·ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;&gt;&gt; </span>example</span><br><span class="line">[<span class="string">&#x27;keras&#x27;</span>, <span class="string">&#x27;æ˜¯&#x27;</span>, <span class="string">&#x27;oneiros&#x27;</span>, <span class="string">&#x27;ï¼ˆ&#x27;</span>, <span class="string">&#x27;open&#x27;</span>, <span class="string">&#x27;-&#x27;</span>, <span class="string">&#x27;ended&#x27;</span>, <span class="string">&#x27;neuro&#x27;</span>, <span class="string">&#x27;-&#x27;</span>, <span class="string">&#x27;electronic&#x27;</span>, <span class="string">&#x27;intelligent&#x27;</span>, <span class="string">&#x27;robot&#x27;</span>, <span class="string">&#x27;operating&#x27;</span>, <span class="string">&#x27;system&#x27;</span>, <span class="string">&#x27;ï¼Œ&#x27;</span>, <span class="string">&#x27;å¼€&#x27;</span>, <span class="string">&#x27;æ”¾&#x27;</span>, <span class="string">&#x27;å¼&#x27;</span>, <span class="string">&#x27;ç¥&#x27;</span>, <span class="string">&#x27;ç»&#x27;</span>, <span class="string">&#x27;ç”µ&#x27;</span>, <span class="string">&#x27;å­&#x27;</span>, <span class="string">&#x27;æ™º&#x27;</span>, <span class="string">&#x27;èƒ½&#x27;</span>, <span class="string">&#x27;æœº&#x27;</span>, <span class="string">&#x27;å™¨&#x27;</span>, <span class="string">&#x27;äºº&#x27;</span>, <span class="string">&#x27;æ“&#x27;</span>, <span class="string">&#x27;ä½œ&#x27;</span>, <span class="string">&#x27;ç³»&#x27;</span>, <span class="string">&#x27;ç»Ÿ&#x27;</span>, <span class="string">&#x27;ï¼‰&#x27;</span>, <span class="string">&#x27;é¡¹&#x27;</span>, <span class="string">&#x27;ç›®&#x27;</span>, <span class="string">&#x27;ç ”&#x27;</span>, <span class="string">&#x27;ç©¶&#x27;</span>, <span class="string">&#x27;å·¥&#x27;</span>, <span class="string">&#x27;ä½œ&#x27;</span>, <span class="string">&#x27;çš„&#x27;</span>, <span class="string">&#x27;éƒ¨&#x27;</span>, <span class="string">&#x27;åˆ†&#x27;</span>, <span class="string">&#x27;äº§&#x27;</span>, <span class="string">&#x27;ç‰©&#x27;</span>, <span class="string">&#x27;[&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;]&#x27;</span>, <span class="string">&#x27;ï¼Œ&#x27;</span>, <span class="string">&#x27;ä¸»&#x27;</span>, <span class="string">&#x27;è¦&#x27;</span>, <span class="string">&#x27;ä½œ&#x27;</span>, <span class="string">&#x27;è€…&#x27;</span>, <span class="string">&#x27;å’Œ&#x27;</span>, <span class="string">&#x27;ç»´&#x27;</span>, <span class="string">&#x27;æŠ¤&#x27;</span>, <span class="string">&#x27;è€…&#x27;</span>, <span class="string">&#x27;æ˜¯&#x27;</span>, <span class="string">&#x27;google&#x27;</span>, <span class="string">&#x27;å·¥&#x27;</span>, <span class="string">&#x27;ç¨‹&#x27;</span>, <span class="string">&#x27;å¸ˆ&#x27;</span>, <span class="string">&#x27;francois&#x27;</span>, <span class="string">&#x27;chollet&#x27;</span>, <span class="string">&#x27;ã€‚&#x27;</span>]</span><br></pre></td></tr></table></figure>
<p>è¿™å°±æ˜¯ BT æœ€ç»ˆçš„è¾“å‡ºäº†ã€‚</p>
<h2 id="WordpieceTokenizer"><a href="#WordpieceTokenizer" class="headerlink" title="WordpieceTokenizer"></a>WordpieceTokenizer</h2><p><code>WordpieceTokenizer</code>ï¼ˆä»¥ä¸‹ç®€ç§° WPTï¼‰æ˜¯åœ¨ BT ç»“æœçš„åŸºç¡€ä¸Šè¿›è¡Œå†ä¸€æ¬¡åˆ‡åˆ†ï¼Œå¾—åˆ°å­è¯ï¼ˆsubwordï¼Œä»¥ <code>##</code> å¼€å¤´ï¼‰ï¼Œè¯æ±‡è¡¨å°±æ˜¯åœ¨æ­¤æ—¶å¼•å…¥çš„ã€‚è¯¥ç±»åªæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼šä¸€ä¸ªåˆå§‹åŒ–æ–¹æ³• <code>__init__(self, vocab, unk_token=&quot;[UNK]&quot;, max_input_chars_per_word=200)</code>ï¼Œä¸€ä¸ªåˆ†è¯æ–¹æ³• <code>tokenize(self, text)</code>ã€‚</p>
<blockquote>
<p>å¯¹äºä¸­æ–‡æ¥è¯´ï¼Œä½¿ä¸ä½¿ç”¨ WPT éƒ½ä¸€æ ·ï¼Œå› ä¸ºä¸­æ–‡ç»è¿‡ BasicTokenizer åå·²ç»å˜æˆä¸€ä¸ªå­—ä¸€ä¸ªå­—äº†ï¼Œæ²¡æ³•å†ã€Œå­ã€äº† ğŸ˜‚</p>
</blockquote>
<p><code>__init__(self, vocab, unk_token=&quot;[UNK]&quot;, max_input_chars_per_word=200)</code>ï¼š<code>vocab</code> å°±æ˜¯è¯æ±‡è¡¨ï¼Œ<code>collections.OrderedDict()</code> ç±»å‹ï¼Œç”± <code>load_vocab(vocab_file)</code> è¯»å…¥ï¼Œkey ä¸ºè¯æ±‡ï¼Œvalue ä¸ºå¯¹åº”ç´¢å¼•ï¼Œé¡ºåºä¾ç…§ <code>vocab_file</code> ä¸­çš„é¡ºåºã€‚æœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¯æ±‡è¡¨ä¸­å·²åŒ…å«æ‰€æœ‰å¯èƒ½çš„å­è¯ã€‚<code>unk_token</code> ä¸ºæœªç™»å½•è¯çš„æ ‡è®°ï¼Œé»˜è®¤ä¸º <code>[UNK]</code>ã€‚<code>max_input_chars_per_word</code> ä¸ºå•ä¸ªè¯çš„æœ€å¤§é•¿åº¦ï¼Œå¦‚æœä¸€ä¸ªè¯çš„é•¿åº¦è¶…è¿‡è¿™ä¸ªæœ€å¤§é•¿åº¦ï¼Œé‚£ä¹ˆç›´æ¥å°†å…¶è®¾ä¸º <code>unk_token</code>ã€‚</p>
<p><code>tokenize(self, text)</code>ï¼šè¯¥æ–¹æ³•å°±æ˜¯ä¸»è¦çš„åˆ†è¯æ–¹æ³•äº†ï¼Œå¤§è‡´åˆ†è¯æ€è·¯æ˜¯<strong>æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºï¼Œå°†ä¸€ä¸ªè¯æ‹†åˆ†æˆå¤šä¸ªå­è¯ï¼Œæ¯ä¸ªå­è¯å°½å¯èƒ½é•¿ã€‚</strong>æŒ‰ç…§<a href="https://github.com/google-research/bert/blob/master/tokenization.py#L311-L312">æºç </a>ä¸­çš„è¯´æ³•ï¼Œè¯¥æ–¹æ³•ç§°ä¹‹ä¸º greedy longest-match-first algorithmï¼Œè´ªå©ªæœ€é•¿ä¼˜å…ˆåŒ¹é…ç®—æ³•ã€‚</p>
<p>å¼€å§‹æ—¶é¦–å…ˆå°† <code>text</code> è½¬æˆ unicodeï¼Œå¹¶è¿›è¡Œç©ºæ ¼åˆ†è¯ï¼Œç„¶åä¾æ¬¡éå†æ¯ä¸ªè¯ã€‚ä¸ºäº†èƒ½å¤Ÿæ¸…æ¥šç›´è§‚åœ°ç†è§£éå†æµç¨‹ï¼Œæˆ‘ç‰¹åœ°åˆ¶ä½œäº†ä¸€ä¸ª GIF æ¥è§£é‡Šï¼Œä»¥ <code>unaffable</code> ä¸ºä¾‹ï¼š</p>
<p><img src="https://i.loli.net/2019/10/16/tXSKJZloFuHLOvw.gif" alt="longest-match-first"></p>
<p>æ³¨ï¼š</p>
<ul>
<li>è“è‰²åº•è‰²è¡¨ç¤ºå½“å‰å­å­—ç¬¦ä¸²ï¼Œå¯¹åº”äºä»£ç ä¸­çš„ <code>cur_substr</code></li>
<li>å½“ä»ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹éå†æ—¶ï¼Œä¸éœ€è¦åœ¨å½“å‰å­—ä¸²å‰é¢åŠ  <code>##</code>ï¼Œå¦åˆ™éœ€è¦</li>
</ul>
<p>å¤§è‡´æµç¨‹è¯´æ˜ï¼ˆè™½ç„¶æˆ‘ç›¸ä¿¡ä¸Šé¢é‚£ä¸ª GIF å¤Ÿæ¸…æ¥šäº†ï¼‰ï¼š</p>
<ol>
<li>ä»ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹ï¼Œç”±äºæ˜¯æœ€é•¿åŒ¹é…ï¼Œç»“æŸä½ç½®éœ€è¦ä»æœ€å³ç«¯ä¾æ¬¡é€’å‡ï¼Œæ‰€ä»¥éå†çš„ç¬¬ä¸€ä¸ªå­è¯æ˜¯å…¶æœ¬èº« <code>unaffable</code>ï¼Œè¯¥å­è¯ä¸åœ¨è¯æ±‡è¡¨ä¸­</li>
<li>ç»“æŸä½ç½®å·¦ç§»ä¸€ä½å¾—åˆ°å­è¯ <code>unaffabl</code>ï¼ŒåŒæ ·ä¸åœ¨è¯æ±‡è¡¨ä¸­</li>
<li>é‡å¤è¿™ä¸ªæ“ä½œï¼Œç›´åˆ° <code>un</code>ï¼Œè¯¥å­è¯åœ¨è¯æ±‡è¡¨ä¸­ï¼Œå°†å…¶åŠ å…¥ <code>output_tokens</code>ï¼Œä»¥ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹çš„éå†ç»“æŸ</li>
<li>è·³è¿‡ <code>un</code>ï¼Œä»å…¶åçš„ <code>a</code> å¼€å§‹æ–°ä¸€è½®éå†ï¼Œç»“æŸä½ç½®ä¾ç„¶æ˜¯ä»æœ€å³ç«¯ä¾æ¬¡é€’å‡ï¼Œä½†æ­¤æ—¶éœ€è¦åœ¨å‰é¢åŠ ä¸Š <code>##</code> æ ‡è®°ï¼Œå¾—åˆ° <code>##affable</code> ä¸åœ¨è¯æ±‡è¡¨ä¸­</li>
<li>ç»“æŸä½ç½®å·¦ç§»ä¸€ä½å¾—åˆ°å­è¯ <code>##affabl</code>ï¼ŒåŒæ ·ä¸åœ¨è¯æ±‡è¡¨ä¸­</li>
<li>é‡å¤è¿™ä¸ªæ“ä½œï¼Œç›´åˆ° <code>##aff</code>ï¼Œè¯¥å­—è¯åœ¨è¯æ±‡è¡¨ä¸­ï¼Œå°†å…¶åŠ å…¥ <code>output_tokens</code>ï¼Œæ­¤è½®éå†ç»“æŸ</li>
<li>è·³è¿‡ <code>aff</code>ï¼Œä»å…¶åçš„ <code>a</code> å¼€å§‹æ–°ä¸€è½®éå†ï¼Œç»“æŸä½ç½®ä¾ç„¶æ˜¯ä»æœ€å³ç«¯ä¾æ¬¡é€’å‡ã€‚<code>##able</code> åœ¨è¯æ±‡è¡¨ä¸­ï¼Œå°†å…¶åŠ å…¥ <code>output_tokens</code></li>
<li><code>able</code> åæ²¡æœ‰å­—ç¬¦äº†ï¼Œæ•´ä¸ªéå†ç»“æŸ</li>
</ol>
<p>å°† BT çš„ç»“æœè¾“å…¥ç»™ WPTï¼Œé‚£ä¹ˆ <code>example</code> çš„æœ€ç»ˆåˆ†è¯ç»“æœå°±æ˜¯</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;keras&#x27;</span>, <span class="string">&#x27;æ˜¯&#x27;</span>, <span class="string">&#x27;one&#x27;</span>, <span class="string">&#x27;##iros&#x27;</span>, <span class="string">&#x27;ï¼ˆ&#x27;</span>, <span class="string">&#x27;open&#x27;</span>, <span class="string">&#x27;-&#x27;</span>, <span class="string">&#x27;ended&#x27;</span>, <span class="string">&#x27;neu&#x27;</span>, <span class="string">&#x27;##ro&#x27;</span>, <span class="string">&#x27;-&#x27;</span>, <span class="string">&#x27;electronic&#x27;</span>, <span class="string">&#x27;intelligent&#x27;</span>, <span class="string">&#x27;robot&#x27;</span>, <span class="string">&#x27;operating&#x27;</span>, <span class="string">&#x27;system&#x27;</span>, <span class="string">&#x27;ï¼Œ&#x27;</span>, <span class="string">&#x27;å¼€&#x27;</span>, <span class="string">&#x27;æ”¾&#x27;</span>, <span class="string">&#x27;å¼&#x27;</span>, <span class="string">&#x27;ç¥&#x27;</span>, <span class="string">&#x27;ç»&#x27;</span>, <span class="string">&#x27;ç”µ&#x27;</span>, <span class="string">&#x27;å­&#x27;</span>, <span class="string">&#x27;æ™º&#x27;</span>, <span class="string">&#x27;èƒ½&#x27;</span>, <span class="string">&#x27;æœº&#x27;</span>, <span class="string">&#x27;å™¨&#x27;</span>, <span class="string">&#x27;äºº&#x27;</span>, <span class="string">&#x27;æ“&#x27;</span>, <span class="string">&#x27;ä½œ&#x27;</span>, <span class="string">&#x27;ç³»&#x27;</span>, <span class="string">&#x27;ç»Ÿ&#x27;</span>, <span class="string">&#x27;ï¼‰&#x27;</span>, <span class="string">&#x27;é¡¹&#x27;</span>, <span class="string">&#x27;ç›®&#x27;</span>, <span class="string">&#x27;ç ”&#x27;</span>, <span class="string">&#x27;ç©¶&#x27;</span>, <span class="string">&#x27;å·¥&#x27;</span>, <span class="string">&#x27;ä½œ&#x27;</span>, <span class="string">&#x27;çš„&#x27;</span>, <span class="string">&#x27;éƒ¨&#x27;</span>, <span class="string">&#x27;åˆ†&#x27;</span>, <span class="string">&#x27;äº§&#x27;</span>, <span class="string">&#x27;ç‰©&#x27;</span>, <span class="string">&#x27;[&#x27;</span>, <span class="string">&#x27;3&#x27;</span>, <span class="string">&#x27;]&#x27;</span>, <span class="string">&#x27;ï¼Œ&#x27;</span>, <span class="string">&#x27;ä¸»&#x27;</span>, <span class="string">&#x27;è¦&#x27;</span>, <span class="string">&#x27;ä½œ&#x27;</span>, <span class="string">&#x27;è€…&#x27;</span>, <span class="string">&#x27;å’Œ&#x27;</span>, <span class="string">&#x27;ç»´&#x27;</span>, <span class="string">&#x27;æŠ¤&#x27;</span>, <span class="string">&#x27;è€…&#x27;</span>, <span class="string">&#x27;æ˜¯&#x27;</span>, <span class="string">&#x27;google&#x27;</span>, <span class="string">&#x27;å·¥&#x27;</span>, <span class="string">&#x27;ç¨‹&#x27;</span>, <span class="string">&#x27;å¸ˆ&#x27;</span>, <span class="string">&#x27;franco&#x27;</span>, <span class="string">&#x27;##is&#x27;</span>, <span class="string">&#x27;cho&#x27;</span>, <span class="string">&#x27;##llet&#x27;</span>, <span class="string">&#x27;ã€‚&#x27;</span>]</span><br></pre></td></tr></table></figure>
<p>è‡³æ­¤ï¼ŒBERT åˆ†è¯éƒ¨åˆ†ç»“æŸã€‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://arxiv.org/abs/1810.04805">[1810.04805] BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding</a></li>
<li><a href="https://github.com/google-research/bert/blob/master/tokenization.py">bert/tokenization.py at master Â· google-research/bert</a></li>
<li><a href="https://stackoverflow.com/questions/44431730/how-to-replace-accented-characters-in-python">How to replace accented characters in python? - Stack Overflow</a></li>
<li><a href="https://stackoverflow.com/questions/517923/what-is-the-best-way-to-remove-accents-in-a-python-unicode-string">What is the best way to remove accents in a Python unicode string? - Stack Overflow</a></li>
<li><a href="https://www.fonts.com/content/learning/fontology/level-3/signs-and-symbols/accents">Accents &amp; Accented Characters - Fonts.com | Fonts.com</a></li>
<li><a href="https://practicaltypography.com/common-accented-characters.html">Common accented characters | Butterickâ€™s Practical Typography</a></li>
</ul>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2>
            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">æ ‡ç­¾</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/Machine-Learning/" rel="tag">Machine Learning</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/NLP/" rel="tag">NLP</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/Python/" rel="tag">Python</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/TensorFlow/" rel="tag">TensorFlow</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/10/28/bisect-speed/"
                    data-tooltip="äºŒåˆ†æŸ¥æ‰¾çœŸçš„å¾ˆå¿«å—"
                    aria-label="ä¸Šä¸€ç¯‡: äºŒåˆ†æŸ¥æ‰¾çœŸçš„å¾ˆå¿«å—"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">ä¸Šä¸€ç¯‡</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/09/19/install-ghost/"
                    data-tooltip="Ghost åšå®¢å¹³å°å®‰è£…å’Œé…ç½®"
                    aria-label="ä¸‹ä¸€ç¯‡: Ghost åšå®¢å¹³å°å®‰è£…å’Œé…ç½®"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">ä¸‹ä¸€ç¯‡</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://alanlee.fun/2019/10/16/bert-tokenizer/"
                    title="åˆ†äº«åˆ° Facebook"
                    aria-label="åˆ†äº«åˆ° Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://alanlee.fun/2019/10/16/bert-tokenizer/"
                    title="åˆ†äº«åˆ° Twitter"
                    aria-label="åˆ†äº«åˆ° Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://alanlee.fun/2019/10/16/bert-tokenizer/"
                    title="åˆ†äº«åˆ° Weibo"
                    aria-label="åˆ†äº«åˆ° Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Kommentieren"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="ç›®å½•">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2025 Alan Lee. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/10/28/bisect-speed/"
                    data-tooltip="äºŒåˆ†æŸ¥æ‰¾çœŸçš„å¾ˆå¿«å—"
                    aria-label="ä¸Šä¸€ç¯‡: äºŒåˆ†æŸ¥æ‰¾çœŸçš„å¾ˆå¿«å—"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">ä¸Šä¸€ç¯‡</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2019/09/19/install-ghost/"
                    data-tooltip="Ghost åšå®¢å¹³å°å®‰è£…å’Œé…ç½®"
                    aria-label="ä¸‹ä¸€ç¯‡: Ghost åšå®¢å¹³å°å®‰è£…å’Œé…ç½®"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">ä¸‹ä¸€ç¯‡</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://alanlee.fun/2019/10/16/bert-tokenizer/"
                    title="åˆ†äº«åˆ° Facebook"
                    aria-label="åˆ†äº«åˆ° Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://alanlee.fun/2019/10/16/bert-tokenizer/"
                    title="åˆ†äº«åˆ° Twitter"
                    aria-label="åˆ†äº«åˆ° Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://alanlee.fun/2019/10/16/bert-tokenizer/"
                    title="åˆ†äº«åˆ° Weibo"
                    aria-label="åˆ†äº«åˆ° Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Kommentieren"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="ç›®å½•">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://alanlee.fun/2019/10/16/bert-tokenizer/"
                        aria-label="åˆ†äº«åˆ° Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>åˆ†äº«åˆ° Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://alanlee.fun/2019/10/16/bert-tokenizer/"
                        aria-label="åˆ†äº«åˆ° Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>åˆ†äº«åˆ° Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://service.weibo.com/share/share.php?&amp;title=https://alanlee.fun/2019/10/16/bert-tokenizer/"
                        aria-label="åˆ†äº«åˆ° Weibo"
                    >
                        <i class="fab fa-weibo" aria-hidden="true"></i><span>åˆ†äº«åˆ° Weibo</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png" alt="ä½œè€…çš„å›¾ç‰‡"/>
        
            <h4 id="about-card-name">Alan Lee</h4>
        
            <div id="about-card-bio"><p>NLP and Python developer, sometimes datavis, he/him. Stick to what you believe.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                åŒ—äº¬
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('https://s2.loli.net/2021/12/16/5nuJTFWg2QACLDf.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-bzxavs3xgrmr4dhl4zkhmrmrloaxiygxfjiarsltzu6y5bjgj5wpgsicnjdf.min.js"></script>

<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'https://alanlee.fun/2019/10/16/bert-tokenizer/';
              
            this.page.identifier = '2019/10/16/bert-tokenizer/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'secsilm';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    




    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
