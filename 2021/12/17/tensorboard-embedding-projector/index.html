
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Alan Lee">
    <title>TensorBoard Projector ç®€æ˜“æŒ‡å— - Alan Lee</title>
    <meta name="author" content="Alan Lee">
    
        <meta name="keywords" content="hexo,python,tensorflow,pytorch,nlp,natural language processing,deep learning,machine learning,large language models,llms,">
    
    
        <link rel="icon" href="https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png">
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Alan Lee","sameAs":["https://github.com/secsilm","https://twitter.com/bluekirin93","mailto:secsilm@outlook.com"],"image":"https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png"},"articleBody":"\n\nTensorBoardï¼ˆTBï¼‰æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„æ¨¡å‹å¯è§†åŒ–å·¥å…·ï¼Œæ—©æœŸæˆ‘ä¹Ÿå†™è¿‡ä¸€ç¯‡æ–‡ç« æ¥è¯¦ç»†ä»‹ç»å„ä¸ªé¢æ¿ã€‚\nä¸è¿‡å£«åˆ«ä¸‰æ—¥ï¼Œå½“åˆ®ç›®ç›¸å¾…ã€‚ç°åœ¨çš„ TB å’Œé‚£æ—¶ç›¸æ¯”å˜åŒ–å¤ªå¤šäº†ï¼Œå¢åŠ äº†è®¸å¤šåŠŸèƒ½é¢æ¿ï¼Œç»å¤§éƒ¨åˆ†æˆ‘éƒ½è¿˜æ²¡æ€ä¹ˆç”¨è¿‡ã€‚å…¶ä¸­æœ€å¸å¼•æˆ‘çš„é¢æ¿ä¹‹ä¸€å°±æ˜¯ Projectorï¼Œè™½ç„¶æˆ‘ç°åœ¨å·¥ä½œä¸­å¹¶ä¸æ€ä¹ˆç”¨åˆ°ã€‚\nç°åœ¨ç»ˆäºæŠ½å‡ºæ—¶é—´ï¼Œæ¥å®Œæ•´ä½“éªŒå¹¶å†™ä¸€ç¯‡ TensorBoard Projectorï¼ˆTBPï¼‰çš„ç®€æ˜“æ•™ç¨‹ã€‚\næœ¬æ–‡å°†ä¼šä»åŸå§‹æ–‡æœ¬å‡ºå‘ï¼ˆä¸­æ–‡ï¼‰ï¼Œç»è¿‡è®­ç»ƒ embeddingã€ç”Ÿæˆæ‰€éœ€æ–‡ä»¶ç­‰æ­¥éª¤ï¼Œä¸€æ­¥ä¸€æ­¥ï¼Œæœ€ç»ˆä½¿ç”¨ TBP æ¥å¯è§†åŒ– embeddingï¼Œå¹¶è§£å†³ä¸­æ–‡æ ‡ç­¾ä¸èƒ½æ˜¾ç¤ºçš„é—®é¢˜ã€‚\næˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æœ€ç»ˆæ•ˆæœï¼š\nEmbedding Projector\n\nè™½ç„¶è¯´ç°åœ¨ BERT ç­‰é¢„è®­ç»ƒæ¨¡å‹å¤§è¡Œå…¶é“ï¼Œä½†æˆ‘è¿˜æ˜¯æƒ³ä»æ›´â€œå¤å¤â€çš„è¯å‘é‡å‡ºå‘ã€‚å½“ç„¶å¦‚æœä½ æƒ³ä½¿ç”¨ BERT æ¥ç”Ÿæˆ embeddingï¼Œä¹Ÿæ˜¯å®Œå…¨æ²¡æœ‰é—®é¢˜çš„ï¼Œæ¡†æ¶æ˜¯ç›¸åŒçš„ã€‚\n\næ­¤å¤–ï¼Œè¿™ä¸ªè¿‡ç¨‹å’Œä½ æ‰€ä½¿ç”¨çš„åº“æ— å…³ï¼Œæ— è®ºä½ æ˜¯ Numpyã€Scipy è¿˜æ˜¯ TensorFlowã€PyTorchï¼Œåªè¦èƒ½å¤Ÿå¾—åˆ° embedding å‘é‡ï¼Œé‚£å°±éƒ½æ²¡æœ‰é—®é¢˜ã€‚\nä½¿ç”¨ TBP å¯è§†åŒ– embedding çš„åŸºæœ¬é€»è¾‘æ˜¯å¾ˆç®€å•çš„ï¼š\n\nå¾—åˆ°ä¸€äº›è¯åŠå…¶ embeddingã€‚\nå°†ä»–ä»¬æŒ‰ç…§ TBP è®¤å¯çš„å¯¹åº”å…³ç³»æ”¾åˆ°æ–‡ä»¶ä¸­ã€‚\nTBP è¯»å–æ–‡ä»¶å¹¶å¯è§†åŒ–ã€‚\n\nç›¸åº”çš„æˆ‘ä»¬éœ€è¦ä¸‹åˆ—æ–‡ä»¶ï¼š\n\nåŸå§‹æ–‡æœ¬å’Œ embedding æ¨¡å‹ï¼šç”¨ä»¥å¾—åˆ°è¯åŠå…¶ embeddingã€‚\nmetadata.tsvã€ tensor.tsv å’Œ sprite.jpgï¼šåˆ†åˆ«ç”¨äºå­˜æ”¾è¯ã€embedding å’Œè¯å¯¹åº”çš„å›¾ç‰‡ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯ PNGï¼‰ï¼Œæœ€åä¸€ä¸ªç”¨äºè§£å†³ä¸­æ–‡æ ‡ç­¾ä¸èƒ½æ˜¾ç¤ºçš„é—®é¢˜ã€‚\nprojector_config.pbtxtï¼šç”¨äºå‘Šè¯‰ TBP ä¸Šè¿°æ–‡ä»¶çš„ä½ç½®ä»¥åŠå…¶ä»–é…ç½®ã€‚\n\nä¸‹é¢æˆ‘ä»¬å°±æ¥ä¸€æ­¥ä¸€æ­¥çœ‹å¦‚ä½•å¾—åˆ°è¿™äº›æ–‡ä»¶ã€‚\nè¯åŠè¯å‘é‡åŸå§‹æ–‡æœ¬æ¥è‡ªä¹ å¤§å¤§çš„è®²è¯æ•°æ®åº“ï¼Œä½¿ç”¨ spacy åˆ†å¥ï¼Œå…±å¾—åˆ°çº¦ 38 ä¸‡å¥å­ã€‚ç„¶åä½¿ç”¨ jieba å’Œè‡ªå®šä¹‰è¯å…¸è¿›è¡Œåˆ†è¯ï¼Œå¾—åˆ° tokenized_sents.txtï¼Œè¯¥æ–‡ä»¶æ ¼å¼æ˜¯ä¸€è¡Œä¸€ä¸ªåˆ†è¯åçš„å¥å­ï¼Œè¯ä¹‹é—´ç©ºæ ¼åˆ†éš”ã€‚è¯å‘é‡ä½¿ç”¨ gensim çš„ fasttext æ¨¡å‹è®­ç»ƒå¾—åˆ°ï¼Œç»´åº¦ 300ã€‚ä¸ºå‡å°‘è¯çš„æ•°é‡ï¼Œå»æ‰åœç”¨è¯ã€‚\n12345# Train embeddingsmodel = FastText(vector_size=300, window=5, min_count=10)model.build_vocab(corpus_file=&#x27;tokenized_sents.txt&#x27;)model.train(corpus_file=&#x27;tokenized_sents.txt&#x27;, total_examples=model.corpus_count, epochs=10, total_words=model.corpus_total_words)model.save(&#x27;fasttext.model&#x27;)\nmetadata.tsv å’Œ tensor.tsvmetadata.tsv çš„å¸¸è§æ ¼å¼æœ‰ä¸¤ç§ï¼šæ²¡æœ‰è¡¨å¤´ï¼Œåªæœ‰ä¸€åˆ—ï¼›æœ‰è¡¨å¤´ï¼Œæœ‰ä¸¤åˆ—ã€‚å‰è€…ï¼ˆæ ¼å¼ 1ï¼‰å°±æ˜¯ NLP ä¸­å¸¸è§çš„ vocab.txt çš„æ ¼å¼ï¼Œä¸€è¡Œä¸€ä¸ªè¯ã€‚åè€…ï¼ˆæ ¼å¼ 2ï¼‰çš„ä¸¤åˆ—ä¸€èˆ¬è¡¨ç¤º index å’Œ labelã€‚label å°±è¡¨ç¤ºè¯¥æ ·æœ¬æ‰€å±çš„æ ‡ç­¾ï¼Œä¸€èˆ¬å¤šè§äºåˆ†ç±»æ•°æ®é›†ã€‚å®é™…ä¸Šæ ¼å¼ 1 æ˜¯æ ¼å¼ 2 çš„ç‰¹ä¾‹ï¼Œç›¸å½“äºé»˜è®¤è®¤ä¸ºå…¶è¡Œå·å°±æ˜¯ indexï¼Œè¡Œå†…å®¹å°±æ˜¯ labelã€‚\n\nmetadata.tsv ä¹Ÿå¯ä»¥æœ‰å¤šåˆ—ï¼Œå¤šå‡ºæ¥çš„åˆ—å¯ä»¥ç”¨æ¥è¡¨ç¤ºå…¶ä»–å±æ€§ä¿¡æ¯ã€‚\n\ntensor.tsv ç”¨äºå­˜å‚¨ä¸ metadata.tsv å¯¹åº”çš„ embeddingsã€‚é¡ºåºå¿…é¡»ä¸€è‡´ï¼Œå³ metadata.tsv ä¸­ç¬¬ i è¡Œçš„è¯ï¼Œå…¶ embedding ä¹Ÿå¿…é¡»æ˜¯ tensor.tsv ä¸­çš„ç¬¬ i è¡Œã€‚embedding ä¸­æ•°å­—ç”¨ \\t åˆ†éš”ã€‚\næ¥ä¸Šï¼Œæˆ‘ä»¬å¾—åˆ°æ¨¡å‹åï¼Œä½¿ç”¨å…¶å¾—åˆ°çš„ vocab åŠå¯¹åº”çš„ embedding æ¥ç”Ÿæˆè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼š\n1234567891011121314stopwords = Path(&quot;hit_stopwords.txt&quot;).read_text(encoding=&quot;utf8&quot;).splitlines()model = FastText.load(&quot;fasttext.model&quot;)words = [word for word in model.wv.key_to_index.keys() if word not in stopwords]  # æ’é™¤æ‰åœç”¨è¯logdir = Path(&#x27;projector/&#x27;)  # æ–‡ä»¶å­˜å‚¨ç›®å½•metadata_filename = &#x27;metadata.tsv&#x27;lines = [&quot;index\\tlable&quot;]  # æ­¤å¤„æˆ‘ä»¬å­˜æˆä¸¤åˆ—ï¼Œä½ ä¹Ÿå¯ä»¥ä¸è¦è¡¨å¤´ï¼Œåªå­˜è¯for i, word in enumerate(words):    lines.append(f&quot;&#123;i&#125;\\t&#123;word&#125;&quot;)logdir.joinpath(metadata_filename).write_text(&quot;\\n&quot;.join(lines), encoding=&quot;utf8&quot;)tensor_filename = &#x27;tensor.tsv&#x27;lines = [&quot;\\t&quot;.join(map(str, model.wv[word])) for word in words]logdir.joinpath(tensor_filename).write_text(&quot;\\n&quot;.join(lines), encoding=&quot;utf8&quot;)\nsprite.jpgæ­£å¦‚å¼€å¤´ç»™å‡ºçš„æ•ˆæœå›¾ä¸€æ ·ï¼Œå›¾ä¸­æ¯ä¸ªç‚¹éƒ½æ˜¯æœ‰ä¸€ä¸ª label çš„ï¼Œè¿™ä¸ª label å°±æ˜¯è¯ã€‚å¦‚æœæˆ‘ä»¬ç›´æ¥è¿™æ ·å¯åŠ¨ tensorboardï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹é¡µé¢ï¼š\nProjector é»˜è®¤é¡µé¢ï¼Œä¸æ˜¾ç¤º 3D æ ‡ç­¾\nä½†å¯ç”¨ 3D æ ‡ç­¾æ¨¡å¼çš„è¯ï¼Œæˆ‘ä»¬å°†ä¼šçœ‹åˆ°ä¸‹å›¾æ‰€ç¤ºçš„æ ·å­ï¼š\nç‚¹å‡»å·¦ä¸Šè§’çš„â€œAâ€å¼€å¯ 3D æ ‡ç­¾æ¨¡å¼å\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„ä¸­æ–‡è¯éƒ½ä¸è§äº†ï¼Œåªå‰©ä¸‹äº†æ•°å­—å­—æ¯ç­‰æ ‡ç­¾ã€‚\nè¿™æ˜¯å› ä¸º tensorboard ç›®å‰è¿˜ä¸æ”¯æŒæ‰€æœ‰ Unicode å­—ç¬¦æ ‡ç­¾ï¼Œåªæ”¯æŒ ascii å­—ç¬¦ã€‚\n\nBUTï¼å…³é—­ 3D æ ‡ç­¾æ¨¡å¼åï¼Œå¦‚æœä½ ç‚¹å‡»å…¶ä¸­ä¸€ä¸ªç‚¹ï¼Œä½ ä¼šæƒŠå¥‡åœ°å‘ç°åˆèƒ½æ˜¾ç¤ºä¸­æ–‡æ ‡ç­¾äº†ï¼šä¸­æ–‡æ ‡ç­¾åˆå›æ¥äº†\n\nä¸€ä¸ª workaround æ˜¯å°†æ±‰å­—è½¬æˆå›¾ç‰‡ï¼Œç”¨å›¾ç‰‡æ¥ä½œä¸º labelï¼Œå°±åƒå®˜æ–¹ç»™å‡ºçš„ mnist ä¾‹å­ä¸€æ ·ï¼š\nå®˜æ–¹ Mnist ä¾‹å­\nä½†æ˜¯ç”±äºæ¯ä¸ªè¯æ‰€å«å­—çš„æ•°é‡éƒ½ä¸åŒï¼ŒåŒæ—¶åˆéœ€è¦å°½é‡è®©è¯é“ºæ»¡æ•´ä¸ªå›¾ç‰‡ï¼Œæ‰€ä»¥ä¸åŒå›¾ç‰‡ä¸­å­—çš„ fontsize éƒ½æ˜¯ä¸åŒçš„ï¼Œéœ€è¦è§†æƒ…å†µè°ƒæ•´ï¼Œè¿™æ˜¯ä¸€ä¸ªè¿­ä»£çš„è¿‡ç¨‹ã€‚è€Œè½¬å›¾ç‰‡æˆ‘ä»¬å¯ä»¥å€ŸåŠ© PIL æ¥å®Œæˆï¼š\n123456789101112131415161718192021222324def text2image(text, imgfile):    image = Image.new(&quot;RGB&quot;, (50, 50), color=(255, 255, 255))    draw = ImageDraw.Draw(image)    fontsize = 1  # starting font size    fontpath = &quot;simhei.ttf&quot;    # portion of image width you want text width to be    img_fraction = 0.9    font = ImageFont.truetype(fontpath, fontsize)    while (font.getsize(text)[0] &lt; img_fraction * image.size[0]) and (        font.getsize(text)[1] &lt; img_fraction * image.size[1]    ):        # iterate until the text size is just larger than the criteria        fontsize += 1        font = ImageFont.truetype(fontpath, fontsize)    # optionally de-increment to be sure it is less than criteria    fontsize -= 1    font = ImageFont.truetype(fontpath, fontsize)    # print(&#x27;final font size&#x27;,fontsize)    draw.text((0, 0), text, font=font, fill=(0, 0, 0))  # put the text on the image    image.save(imgfile)  # save it\nå½“æˆ‘ä»¬æŠŠæ‰€æœ‰è¯éƒ½è½¬æˆå›¾ç‰‡åï¼Œå†å°†è¿™äº›å›¾ç‰‡ï¼ŒæŒ‰ç…§ä¸€å®šè§„åˆ™æ‹¼æ¥åˆ°ä¸€èµ·ï¼Œæœ€ç»ˆå½¢æˆçš„è¿™ä¹ˆä¸€ä¸ªå¤§å›¾ï¼Œå°±æ˜¯æ‰€è°“çš„ sprite.jpgã€‚\nSprite Image\nMnist ä¾‹å­ä¸­çš„ sprite image\né‚£ä¹ˆæŒ‰ç…§ä»€ä¹ˆè§„åˆ™æ¥æ‹¼æ¥å‘¢ï¼Ÿ\nsprite.jpg å¿…é¡»æ˜¯æ­£æ–¹å½¢ï¼Œæ¯ä¸ªå°å›¾ä¹Ÿæœ€å¥½æ˜¯æ­£æ–¹å½¢ï¼Œæ„å‘³ç€è¡Œåˆ—ä¸Šçš„å°å›¾æ•°é‡å¿…é¡»æ˜¯ç›¸ç­‰çš„ï¼Œè€Œä¸” tensorboard è¯»è¿™ä¸ª sprite çš„æ—¶å€™æ˜¯æŒ‰ç…§è¡Œä¼˜å…ˆçš„é¡ºåºè¯»çš„ã€‚æ‰€ä»¥å‡è®¾ä½ æœ‰ 8 å¼ å°å›¾ï¼Œé‚£ä¹ˆæœ€ç»ˆçš„æ‘†æ”¾é¡ºåºå°±æ˜¯ä¸‹é¢è¿™æ ·ï¼š\n8 å¼ å°å›¾æ—¶çš„æ‘†æ”¾é¡ºåº\næœ€åé‚£ä¸€æ ¼æ˜¯ç©ºç™½çš„ï¼Œä¹Ÿå°±æ˜¯å…¨ç™½ã€‚\nå½“ç„¶ä¹Ÿæœ‰å¯èƒ½æœ€åä¸€è¡Œéƒ½æ˜¯ç©ºç™½çš„ï¼Œä¾‹å¦‚ä½ æœ‰ 5 å¼ å°å›¾ï¼Œé‚£ä¹ˆè¦æƒ³æ¯è¡Œæ¯åˆ—ä¸Šçš„å°å›¾æ•°é‡æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆæ¯è¡Œæ¯åˆ—ä¸Šå°±å¾—æœ‰ 3 å¼ å°å›¾ï¼š\n5 å¼ å°å›¾æ—¶çš„æ‘†æ”¾é¡ºåº\nè¿™æ ·ä¸ä»…ç¬¬äºŒè¡Œæœ€åä¸€æ ¼æ˜¯ç©ºç™½çš„ï¼Œå°±è¿ç¬¬ä¸‰è¡Œæ•´è¡Œéƒ½æ˜¯ç©ºç™½çš„ã€‚\næ‰€ä»¥æ€»ç»“æ¥è¯´ï¼Œå‡è®¾ä½ æœ‰ $n$ å¼ å°å›¾ï¼Œé‚£ä¹ˆæ¯è¡Œæ¯åˆ—ä¸Šå°å›¾çš„æ•°é‡å°±æ˜¯ $\\lceil \\sqrt n \\rceil$ï¼Œå³æ ¹å· $n$ ç„¶åä¸Šå–æ•´ã€‚\nå…·ä½“ä»£ç å¦‚ä¸‹ï¼š\n123456789101112131415161718192021222324def text2image(text, imgfile):    image = Image.new(&quot;RGB&quot;, (50, 50), color=(255, 255, 255))    draw = ImageDraw.Draw(image)    fontsize = 1  # starting font size    fontpath = &quot;simhei.ttf&quot;    # portion of image width you want text width to be    img_fraction = 0.9    font = ImageFont.truetype(fontpath, fontsize)    while (font.getsize(text)[0] &lt; img_fraction * image.size[0]) and (        font.getsize(text)[1] &lt; img_fraction * image.size[1]    ):  # ä¿è¯è¯åœ¨è¡Œåˆ—ä¸Šå‡ä¸è¶…å‡ºå›¾ç‰‡èŒƒå›´        # iterate until the text size is just larger than the criteria        fontsize += 1        font = ImageFont.truetype(fontpath, fontsize)    # optionally de-increment to be sure it is less than criteria    fontsize -= 1    font = ImageFont.truetype(fontpath, fontsize)    # print(&#x27;final font size&#x27;,fontsize)    draw.text((0, 0), text, font=font, fill=(0, 0, 0))  # put the text on the image    image.save(imgfile)  # save it\nprojector_config.pbtxtåœ¨å¾—åˆ°äº† metadata.tsv ã€ tensor.tsv å’Œ sprite.jpg åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å‘Šè¯‰ tensorboard è¿™äº›æ–‡ä»¶çš„ä½ç½®å’Œæ¯ä¸ªå°å›¾çš„ç»´åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ª .pbtxt æ–‡ä»¶æ¥æŒ‡å®šè¿™äº›ä¿¡æ¯ã€‚\næˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹ç¨‹åºæ¥ç”Ÿæˆè¯¥æ–‡ä»¶ï¼š\n123456789from tensorboard.plugins import projectorconfig = projector.ProjectorConfig()embedding = config.embeddings.add()embedding.metadata_path = metadata_filenameembedding.tensor_path = tensor_filenameembedding.sprite.image_path = sprite_filenameembedding.sprite.single_image_dim.extend([unit_dim, unit_dim])  # unit_dim å°±æ˜¯å°å›¾ç»´åº¦projector.visualize_embeddings(logdir, config)\nç„¶åå°±ä¼šå¾—åˆ°ä¸€ä¸ªåä¸º projector_config.pbtxt çš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š\n123456789embeddings &#123;  metadata_path: &quot;metadata.tsv&quot;  sprite &#123;    image_path: &quot;sprite.jpg&quot;    single_image_dim: 50    single_image_dim: 50  &#125;  tensor_path: &quot;tensor.tsv&quot;&#125;\nå½“ç„¶ä½ ä¹Ÿå¯ä»¥æŒ‰ç…§è¿™ä¸ªæ ¼å¼ç›´æ¥æ‰‹åŠ¨åˆ›å»ºè¿™ä¸ªæ–‡ä»¶ã€‚\nå¯åŠ¨ä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬ ä¸œé£ã€‚\nç°åœ¨æˆ‘ä»¬ç»ˆäºå¯ä»¥å¯åŠ¨ tensorboard äº†ï¼š\n1$ tensorboard --logdir=projector/\n\nprojector/ å°±æ˜¯ä½ ä¸Šé¢æŒ‡å®šçš„ logdir ã€‚\n\nç„¶åæ ¹æ®æç¤ºåœ¨æµè§ˆå™¨æ‰“å¼€ http://localhost:6006/#projector å°±å¯ä»¥çœ‹åˆ°é¡µé¢äº†ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œå°è¯•ä¸åŒé™ç»´ç®—æ³•çš„æ•ˆæœï¼Œä¹Ÿå¯ä»¥ç‚¹å‡»æˆ–æœç´¢å›¾ä¸Šçš„è¯æ¥æŸ¥çœ‹å…¶ç›¸ä¼¼è¯ï¼Œå¤§è‡´è¯„ä¼°ä¸‹ embedding çš„æ•ˆæœã€‚\nâ€œæ·å…‹å…±å’Œå›½â€çš„è¿‘ä¹‰è¯\næ‰©å±•Embedding Projector ä¸­çš„ç‚¹ä¸ä»…ä»…å¯ä»¥æ˜¯å›¾åƒã€è¯ï¼Œç†è®ºä¸Šåªè¦æ˜¯å¯ä»¥ embedding çš„ä¸œè¥¿ï¼Œå°±å¯ä»¥æ˜¾ç¤ºã€‚è€Œä¸”ä½ æ‡‚çš„ï¼Œä¸‡ç‰©çš†å¯ embeddingâ€¦â€¦ğŸ˜‚\nReference\nTaking the TensorBoard Embedding Projector to the Next Level | Towards Data Science\nVisualizing Image Feature Vectors through TensorBoard | by Takuma Yamaguchi (Kumon) | Medium\nTensorBoard: Embedding Visualization Â· tfdocs\nProjector plugin hangs with â€œFetching sprite imageâ€¦â€ Â· Issue #3840 Â· tensorflow/tensorboard\n[projector] unicode not supported for 3D mode labels Â· Issue #386 Â· tensorflow/tensorboard\npython - PIL how to scale text size in relation to the size of the image - Stack Overflow\n\nEND","dateCreated":"2021-12-17T17:44:19+08:00","dateModified":"2025-06-14T20:46:16+08:00","datePublished":"2021-12-17T17:44:19+08:00","description":"æœ¬æ–‡å°†ä¼šä»åŸå§‹æ–‡æœ¬å‡ºå‘ï¼ˆä¸­æ–‡ï¼‰ï¼Œç»è¿‡è®­ç»ƒ embeddingã€ç”Ÿæˆæ‰€éœ€æ–‡ä»¶ç­‰æ­¥éª¤ï¼Œä¸€æ­¥ä¸€æ­¥ï¼Œæœ€ç»ˆä½¿ç”¨ TBP æ¥å¯è§†åŒ– embeddingï¼Œå¹¶è§£å†³ä¸èƒ½ä½¿ç”¨ä¸­æ–‡æ ‡ç­¾çš„é—®é¢˜ã€‚","headline":"TensorBoard Projector ç®€æ˜“æŒ‡å—","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://alanlee.fun/2021/12/17/tensorboard-embedding-projector/"},"publisher":{"@type":"Organization","name":"Alan Lee","sameAs":["https://github.com/secsilm","https://twitter.com/bluekirin93","mailto:secsilm@outlook.com"],"image":"https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png","logo":{"@type":"ImageObject","url":"https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png"}},"url":"https://alanlee.fun/2021/12/17/tensorboard-embedding-projector/","keywords":"Python, NLP, TensorBoard"}</script>
    <meta name="description" content="æœ¬æ–‡å°†ä¼šä»åŸå§‹æ–‡æœ¬å‡ºå‘ï¼ˆä¸­æ–‡ï¼‰ï¼Œç»è¿‡è®­ç»ƒ embeddingã€ç”Ÿæˆæ‰€éœ€æ–‡ä»¶ç­‰æ­¥éª¤ï¼Œä¸€æ­¥ä¸€æ­¥ï¼Œæœ€ç»ˆä½¿ç”¨ TBP æ¥å¯è§†åŒ– embeddingï¼Œå¹¶è§£å†³ä¸èƒ½ä½¿ç”¨ä¸­æ–‡æ ‡ç­¾çš„é—®é¢˜ã€‚">
<meta property="og:type" content="blog">
<meta property="og:title" content="TensorBoard Projector ç®€æ˜“æŒ‡å—">
<meta property="og:url" content="https://alanlee.fun/2021/12/17/tensorboard-embedding-projector/index.html">
<meta property="og:site_name" content="Alan Lee">
<meta property="og:description" content="æœ¬æ–‡å°†ä¼šä»åŸå§‹æ–‡æœ¬å‡ºå‘ï¼ˆä¸­æ–‡ï¼‰ï¼Œç»è¿‡è®­ç»ƒ embeddingã€ç”Ÿæˆæ‰€éœ€æ–‡ä»¶ç­‰æ­¥éª¤ï¼Œä¸€æ­¥ä¸€æ­¥ï¼Œæœ€ç»ˆä½¿ç”¨ TBP æ¥å¯è§†åŒ– embeddingï¼Œå¹¶è§£å†³ä¸èƒ½ä½¿ç”¨ä¸­æ–‡æ ‡ç­¾çš„é—®é¢˜ã€‚">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://s2.loli.net/2021/12/17/lGOjs8Ch3SE2qce.png">
<meta property="og:image" content="https://s2.loli.net/2021/12/18/R8WcIGvPYSosjZC.png">
<meta property="og:image" content="https://s2.loli.net/2021/12/18/YBnylzsQNOeArTd.png">
<meta property="og:image" content="https://s2.loli.net/2021/12/18/ft6WZmqrhuUdXTP.png">
<meta property="og:image" content="https://s2.loli.net/2021/12/17/g3iG7TmNpZkDYRq.png">
<meta property="og:image" content="https://s2.loli.net/2021/12/17/PjedLVwymCa84GZ.png">
<meta property="og:image" content="https://www.tensorflow.org/images/mnist_10k_sprite.png">
<meta property="og:image" content="https://s2.loli.net/2021/12/17/gemcN2hIt6sWZOQ.png">
<meta property="og:image" content="https://s2.loli.net/2021/12/17/cE3dkBmSgHnXAjb.png">
<meta property="og:image" content="https://s2.loli.net/2021/12/17/6sxGNA2ZlkdQnB5.png">
<meta property="article:published_time" content="2021-12-17T09:44:19.000Z">
<meta property="article:modified_time" content="2025-06-14T12:46:16.198Z">
<meta property="article:author" content="Alan Lee">
<meta property="article:tag" content="Python">
<meta property="article:tag" content="NLP">
<meta property="article:tag" content="TensorBoard">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2021/12/17/lGOjs8Ch3SE2qce.png">
<meta name="twitter:creator" content="@bluekirin93">
    
    
        
    
    
        <meta property="og:image" content="https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-7psn7jtnqx8dcatt1chsgye58vhpeeqkf8gzcb5iijzope7gwcvezy8gigh2.min.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111553531-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-111553531-1');
    </script>


    
    <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?6e8b0c627bf164f809ee4346796b1952";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>


    
        
    
    <style>
        ::-moz-selection { /* Code for Firefox */
          background: #FFBFBF;
        }
        
        ::selection {
          background: #FFBFBF;
        }
    </style><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    
</head>

    <body>
        <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Alan Lee
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="æ‰“å¼€é“¾æ¥: /#about"
            >
        
        
            <img class="header-picture" src="https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png" alt="ä½œè€…çš„å›¾ç‰‡"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="é˜…è¯»æœ‰å…³ä½œè€…çš„æ›´å¤šä¿¡æ¯"
                >
                    <img class="sidebar-profile-picture" src="https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png" alt="ä½œè€…çš„å›¾ç‰‡"/>
                </a>
                <h4 class="sidebar-profile-name">Alan Lee</h4>
                
                    <h5 class="sidebar-profile-bio"><p>NLP and Python developer, sometimes datavis, he/him. Stick to what you believe.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="é¦–é¡µ"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">é¦–é¡µ</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="æ ‡ç­¾"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">æ ‡ç­¾</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="å½’æ¡£"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">å½’æ¡£</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/about"
                            
                            rel="noopener"
                            title="å…³äº"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">å…³äº</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/secsilm"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/bluekirin93"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="mailto:secsilm@outlook.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="é‚®ç®±"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">é‚®ç®±</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            TensorBoard Projector ç®€æ˜“æŒ‡å—
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2021-12-17T17:44:19+08:00">
	
		    2021 å¹´ 12 æœˆ 17 æ—¥
    	
    </time>
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <!-- excerpt --></p>
<h1 id="table-of-contents">ç›®å½•</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AF%8D%E5%8F%8A%E8%AF%8D%E5%90%91%E9%87%8F"><span class="toc-text">è¯åŠè¯å‘é‡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#metadata-tsv-%E5%92%8C-tensor-tsv"><span class="toc-text">metadata.tsv å’Œ tensor.tsv</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sprite-jpg"><span class="toc-text">sprite.jpg</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#projector-config-pbtxt"><span class="toc-text">projector_config.pbtxt</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8"><span class="toc-text">å¯åŠ¨</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%A9%E5%B1%95"><span class="toc-text">æ‰©å±•</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-text">Reference</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#END"><span class="toc-text">END</span></a></li></ol>
<p>TensorBoardï¼ˆTBï¼‰æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„æ¨¡å‹å¯è§†åŒ–å·¥å…·ï¼Œæ—©æœŸæˆ‘ä¹Ÿå†™è¿‡<a href="https://alanlee.fun/2017/08/20/understanding-tensorboard/">ä¸€ç¯‡æ–‡ç« </a>æ¥è¯¦ç»†ä»‹ç»å„ä¸ªé¢æ¿ã€‚</p>
<p>ä¸è¿‡å£«åˆ«ä¸‰æ—¥ï¼Œå½“åˆ®ç›®ç›¸å¾…ã€‚ç°åœ¨çš„ TB å’Œé‚£æ—¶ç›¸æ¯”å˜åŒ–å¤ªå¤šäº†ï¼Œå¢åŠ äº†è®¸å¤šåŠŸèƒ½é¢æ¿ï¼Œç»å¤§éƒ¨åˆ†æˆ‘éƒ½è¿˜æ²¡æ€ä¹ˆç”¨è¿‡ã€‚å…¶ä¸­æœ€å¸å¼•æˆ‘çš„é¢æ¿ä¹‹ä¸€å°±æ˜¯ Projectorï¼Œè™½ç„¶æˆ‘ç°åœ¨å·¥ä½œä¸­å¹¶ä¸æ€ä¹ˆç”¨åˆ°ã€‚</p>
<p>ç°åœ¨ç»ˆäºæŠ½å‡ºæ—¶é—´ï¼Œæ¥å®Œæ•´ä½“éªŒå¹¶å†™ä¸€ç¯‡ TensorBoard Projectorï¼ˆTBPï¼‰çš„ç®€æ˜“æ•™ç¨‹ã€‚</p>
<p>æœ¬æ–‡å°†ä¼šä»åŸå§‹æ–‡æœ¬å‡ºå‘ï¼ˆä¸­æ–‡ï¼‰ï¼Œç»è¿‡è®­ç»ƒ embeddingã€ç”Ÿæˆæ‰€éœ€æ–‡ä»¶ç­‰æ­¥éª¤ï¼Œä¸€æ­¥ä¸€æ­¥ï¼Œæœ€ç»ˆä½¿ç”¨ TBP æ¥å¯è§†åŒ– embeddingï¼Œå¹¶è§£å†³ä¸­æ–‡æ ‡ç­¾ä¸èƒ½æ˜¾ç¤ºçš„é—®é¢˜ã€‚</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹æœ€ç»ˆæ•ˆæœï¼š</p>
<div class="figure center" style="width:;"><a class="fancybox" href="https://s2.loli.net/2021/12/17/lGOjs8Ch3SE2qce.png" title="Embedding Projector" data-caption="Embedding Projector" data-fancybox="default"><img class="fig-img" src="https://s2.loli.net/2021/12/17/lGOjs8Ch3SE2qce.png" alt="Embedding Projector"></a><span class="caption">Embedding Projector</span></div>
<blockquote>
<p>è™½ç„¶è¯´ç°åœ¨ BERT ç­‰é¢„è®­ç»ƒæ¨¡å‹å¤§è¡Œå…¶é“ï¼Œä½†æˆ‘è¿˜æ˜¯æƒ³ä»æ›´â€œå¤å¤â€çš„è¯å‘é‡å‡ºå‘ã€‚å½“ç„¶å¦‚æœä½ æƒ³ä½¿ç”¨ BERT æ¥ç”Ÿæˆ embeddingï¼Œä¹Ÿæ˜¯å®Œå…¨æ²¡æœ‰é—®é¢˜çš„ï¼Œæ¡†æ¶æ˜¯ç›¸åŒçš„ã€‚</p>
</blockquote>
<p>æ­¤å¤–ï¼Œè¿™ä¸ªè¿‡ç¨‹å’Œä½ æ‰€ä½¿ç”¨çš„åº“æ— å…³ï¼Œæ— è®ºä½ æ˜¯ Numpyã€Scipy è¿˜æ˜¯ TensorFlowã€PyTorchï¼Œåªè¦èƒ½å¤Ÿå¾—åˆ° embedding å‘é‡ï¼Œé‚£å°±éƒ½æ²¡æœ‰é—®é¢˜ã€‚</p>
<p>ä½¿ç”¨ TBP å¯è§†åŒ– embedding çš„åŸºæœ¬é€»è¾‘æ˜¯å¾ˆç®€å•çš„ï¼š</p>
<ol>
<li>å¾—åˆ°ä¸€äº›è¯åŠå…¶ embeddingã€‚</li>
<li>å°†ä»–ä»¬æŒ‰ç…§ TBP è®¤å¯çš„å¯¹åº”å…³ç³»æ”¾åˆ°æ–‡ä»¶ä¸­ã€‚</li>
<li>TBP è¯»å–æ–‡ä»¶å¹¶å¯è§†åŒ–ã€‚</li>
</ol>
<p>ç›¸åº”çš„æˆ‘ä»¬éœ€è¦ä¸‹åˆ—æ–‡ä»¶ï¼š</p>
<ol>
<li>åŸå§‹æ–‡æœ¬å’Œ embedding æ¨¡å‹ï¼šç”¨ä»¥å¾—åˆ°è¯åŠå…¶ embeddingã€‚</li>
<li><code>metadata.tsv</code>ã€ <code>tensor.tsv</code> å’Œ <code>sprite.jpg</code>ï¼šåˆ†åˆ«ç”¨äºå­˜æ”¾è¯ã€embedding å’Œè¯å¯¹åº”çš„å›¾ç‰‡ï¼ˆå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯ PNGï¼‰ï¼Œæœ€åä¸€ä¸ªç”¨äºè§£å†³ä¸­æ–‡æ ‡ç­¾ä¸èƒ½æ˜¾ç¤ºçš„é—®é¢˜ã€‚</li>
<li><code>projector_config.pbtxt</code>ï¼šç”¨äºå‘Šè¯‰ TBP ä¸Šè¿°æ–‡ä»¶çš„ä½ç½®ä»¥åŠå…¶ä»–é…ç½®ã€‚</li>
</ol>
<p>ä¸‹é¢æˆ‘ä»¬å°±æ¥ä¸€æ­¥ä¸€æ­¥çœ‹å¦‚ä½•å¾—åˆ°è¿™äº›æ–‡ä»¶ã€‚</p>
<h2 id="è¯åŠè¯å‘é‡"><a href="#è¯åŠè¯å‘é‡" class="headerlink" title="è¯åŠè¯å‘é‡"></a>è¯åŠè¯å‘é‡</h2><p>åŸå§‹æ–‡æœ¬æ¥è‡ª<a href="http://jhsjk.people.cn/">ä¹ å¤§å¤§çš„è®²è¯æ•°æ®åº“</a>ï¼Œä½¿ç”¨ spacy åˆ†å¥ï¼Œå…±å¾—åˆ°çº¦ 38 ä¸‡å¥å­ã€‚ç„¶åä½¿ç”¨ jieba å’Œè‡ªå®šä¹‰è¯å…¸è¿›è¡Œåˆ†è¯ï¼Œå¾—åˆ° <code>tokenized_sents.txt</code>ï¼Œè¯¥æ–‡ä»¶æ ¼å¼æ˜¯ä¸€è¡Œä¸€ä¸ªåˆ†è¯åçš„å¥å­ï¼Œè¯ä¹‹é—´ç©ºæ ¼åˆ†éš”ã€‚è¯å‘é‡ä½¿ç”¨ gensim çš„ fasttext æ¨¡å‹è®­ç»ƒå¾—åˆ°ï¼Œç»´åº¦ 300ã€‚ä¸ºå‡å°‘è¯çš„æ•°é‡ï¼Œå»æ‰åœç”¨è¯ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Train embeddings</span></span><br><span class="line">model = FastText(vector_size=<span class="number">300</span>, window=<span class="number">5</span>, min_count=<span class="number">10</span>)</span><br><span class="line">model.build_vocab(corpus_file=<span class="string">&#x27;tokenized_sents.txt&#x27;</span>)</span><br><span class="line">model.train(corpus_file=<span class="string">&#x27;tokenized_sents.txt&#x27;</span>, total_examples=model.corpus_count, epochs=<span class="number">10</span>, total_words=model.corpus_total_words)</span><br><span class="line">model.save(<span class="string">&#x27;fasttext.model&#x27;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="metadata-tsv-å’Œ-tensor-tsv"><a href="#metadata-tsv-å’Œ-tensor-tsv" class="headerlink" title="metadata.tsv å’Œ tensor.tsv"></a>metadata.tsv å’Œ tensor.tsv</h2><p><code>metadata.tsv</code> çš„å¸¸è§æ ¼å¼æœ‰ä¸¤ç§ï¼šæ²¡æœ‰è¡¨å¤´ï¼Œåªæœ‰ä¸€åˆ—ï¼›æœ‰è¡¨å¤´ï¼Œæœ‰ä¸¤åˆ—ã€‚å‰è€…ï¼ˆæ ¼å¼ 1ï¼‰å°±æ˜¯ NLP ä¸­å¸¸è§çš„ <code>vocab.txt</code> çš„æ ¼å¼ï¼Œä¸€è¡Œä¸€ä¸ªè¯ã€‚åè€…ï¼ˆæ ¼å¼ 2ï¼‰çš„ä¸¤åˆ—ä¸€èˆ¬è¡¨ç¤º index å’Œ labelã€‚label å°±è¡¨ç¤ºè¯¥æ ·æœ¬æ‰€å±çš„æ ‡ç­¾ï¼Œä¸€èˆ¬å¤šè§äºåˆ†ç±»æ•°æ®é›†ã€‚å®é™…ä¸Šæ ¼å¼ 1 æ˜¯æ ¼å¼ 2 çš„ç‰¹ä¾‹ï¼Œç›¸å½“äºé»˜è®¤è®¤ä¸ºå…¶è¡Œå·å°±æ˜¯ indexï¼Œè¡Œå†…å®¹å°±æ˜¯ labelã€‚</p>
<blockquote>
<p><code>metadata.tsv</code> ä¹Ÿå¯ä»¥æœ‰å¤šåˆ—ï¼Œå¤šå‡ºæ¥çš„åˆ—å¯ä»¥ç”¨æ¥è¡¨ç¤ºå…¶ä»–å±æ€§ä¿¡æ¯ã€‚</p>
</blockquote>
<p><code>tensor.tsv</code> ç”¨äºå­˜å‚¨ä¸ <code>metadata.tsv</code> å¯¹åº”çš„ embeddingsã€‚é¡ºåºå¿…é¡»ä¸€è‡´ï¼Œå³ <code>metadata.tsv</code> ä¸­ç¬¬ i è¡Œçš„è¯ï¼Œå…¶ embedding ä¹Ÿå¿…é¡»æ˜¯ <code>tensor.tsv</code> ä¸­çš„ç¬¬ i è¡Œã€‚embedding ä¸­æ•°å­—ç”¨ <code>\t</code> åˆ†éš”ã€‚</p>
<p>æ¥ä¸Šï¼Œæˆ‘ä»¬å¾—åˆ°æ¨¡å‹åï¼Œä½¿ç”¨å…¶å¾—åˆ°çš„ vocab åŠå¯¹åº”çš„ embedding æ¥ç”Ÿæˆè¿™ä¸¤ä¸ªæ–‡ä»¶ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">stopwords = Path(<span class="string">&quot;hit_stopwords.txt&quot;</span>).read_text(encoding=<span class="string">&quot;utf8&quot;</span>).splitlines()</span><br><span class="line">model = FastText.load(<span class="string">&quot;fasttext.model&quot;</span>)</span><br><span class="line">words = [word <span class="keyword">for</span> word <span class="keyword">in</span> model.wv.key_to_index.keys() <span class="keyword">if</span> word <span class="keyword">not</span> <span class="keyword">in</span> stopwords]  <span class="comment"># æ’é™¤æ‰åœç”¨è¯</span></span><br><span class="line">logdir = Path(<span class="string">&#x27;projector/&#x27;</span>)  <span class="comment"># æ–‡ä»¶å­˜å‚¨ç›®å½•</span></span><br><span class="line"></span><br><span class="line">metadata_filename = <span class="string">&#x27;metadata.tsv&#x27;</span></span><br><span class="line">lines = [<span class="string">&quot;index\tlable&quot;</span>]  <span class="comment"># æ­¤å¤„æˆ‘ä»¬å­˜æˆä¸¤åˆ—ï¼Œä½ ä¹Ÿå¯ä»¥ä¸è¦è¡¨å¤´ï¼Œåªå­˜è¯</span></span><br><span class="line"><span class="keyword">for</span> i, word <span class="keyword">in</span> <span class="built_in">enumerate</span>(words):</span><br><span class="line">    lines.append(<span class="string">f&quot;<span class="subst">&#123;i&#125;</span>\t<span class="subst">&#123;word&#125;</span>&quot;</span>)</span><br><span class="line">logdir.joinpath(metadata_filename).write_text(<span class="string">&quot;\n&quot;</span>.join(lines), encoding=<span class="string">&quot;utf8&quot;</span>)</span><br><span class="line"></span><br><span class="line">tensor_filename = <span class="string">&#x27;tensor.tsv&#x27;</span></span><br><span class="line">lines = [<span class="string">&quot;\t&quot;</span>.join(<span class="built_in">map</span>(<span class="built_in">str</span>, model.wv[word])) <span class="keyword">for</span> word <span class="keyword">in</span> words]</span><br><span class="line">logdir.joinpath(tensor_filename).write_text(<span class="string">&quot;\n&quot;</span>.join(lines), encoding=<span class="string">&quot;utf8&quot;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="sprite-jpg"><a href="#sprite-jpg" class="headerlink" title="sprite.jpg"></a>sprite.jpg</h2><p>æ­£å¦‚å¼€å¤´ç»™å‡ºçš„æ•ˆæœå›¾ä¸€æ ·ï¼Œå›¾ä¸­æ¯ä¸ªç‚¹éƒ½æ˜¯æœ‰ä¸€ä¸ª label çš„ï¼Œè¿™ä¸ª label å°±æ˜¯è¯ã€‚å¦‚æœæˆ‘ä»¬ç›´æ¥è¿™æ ·å¯åŠ¨ tensorboardï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹é¡µé¢ï¼š</p>
<div class="figure center" style="width:;"><a class="fancybox" href="https://s2.loli.net/2021/12/18/R8WcIGvPYSosjZC.png" title="Projector é»˜è®¤é¡µé¢ï¼Œä¸æ˜¾ç¤º 3D æ ‡ç­¾" data-caption="Projector é»˜è®¤é¡µé¢ï¼Œä¸æ˜¾ç¤º 3D æ ‡ç­¾" data-fancybox="default"><img class="fig-img" src="https://s2.loli.net/2021/12/18/R8WcIGvPYSosjZC.png" alt="Projector é»˜è®¤é¡µé¢ï¼Œä¸æ˜¾ç¤º 3D æ ‡ç­¾"></a><span class="caption">Projector é»˜è®¤é¡µé¢ï¼Œä¸æ˜¾ç¤º 3D æ ‡ç­¾</span></div>
<p>ä½†å¯ç”¨ 3D æ ‡ç­¾æ¨¡å¼çš„è¯ï¼Œæˆ‘ä»¬å°†ä¼šçœ‹åˆ°ä¸‹å›¾æ‰€ç¤ºçš„æ ·å­ï¼š</p>
<div class="figure center" style="width:;"><a class="fancybox" href="https://s2.loli.net/2021/12/18/YBnylzsQNOeArTd.png" title="ç‚¹å‡»å·¦ä¸Šè§’çš„â€œAâ€å¼€å¯ 3D æ ‡ç­¾æ¨¡å¼å" data-caption="ç‚¹å‡»å·¦ä¸Šè§’çš„â€œAâ€å¼€å¯ 3D æ ‡ç­¾æ¨¡å¼å" data-fancybox="default"><img class="fig-img" src="https://s2.loli.net/2021/12/18/YBnylzsQNOeArTd.png" alt="ç‚¹å‡»å·¦ä¸Šè§’çš„â€œAâ€å¼€å¯ 3D æ ‡ç­¾æ¨¡å¼å"></a><span class="caption">ç‚¹å‡»å·¦ä¸Šè§’çš„â€œAâ€å¼€å¯ 3D æ ‡ç­¾æ¨¡å¼å</span></div>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„ä¸­æ–‡è¯éƒ½ä¸è§äº†ï¼Œåªå‰©ä¸‹äº†æ•°å­—å­—æ¯ç­‰æ ‡ç­¾ã€‚</p>
<p>è¿™æ˜¯å› ä¸º tensorboard ç›®å‰è¿˜ä¸æ”¯æŒæ‰€æœ‰ Unicode å­—ç¬¦æ ‡ç­¾ï¼Œåªæ”¯æŒ ascii å­—ç¬¦ã€‚</p>
<blockquote>
<p>BUTï¼å…³é—­ 3D æ ‡ç­¾æ¨¡å¼åï¼Œå¦‚æœä½ ç‚¹å‡»å…¶ä¸­ä¸€ä¸ªç‚¹ï¼Œä½ ä¼šæƒŠå¥‡åœ°å‘ç°åˆèƒ½æ˜¾ç¤ºä¸­æ–‡æ ‡ç­¾äº†ï¼š<br><div class="figure " style="width:;"><img class="fig-img" src="https://s2.loli.net/2021/12/18/ft6WZmqrhuUdXTP.png" alt="ä¸­æ–‡æ ‡ç­¾åˆå›æ¥äº†"><span class="caption">ä¸­æ–‡æ ‡ç­¾åˆå›æ¥äº†</span></div></p>
</blockquote>
<p>ä¸€ä¸ª workaround æ˜¯å°†æ±‰å­—è½¬æˆå›¾ç‰‡ï¼Œç”¨å›¾ç‰‡æ¥ä½œä¸º labelï¼Œå°±åƒå®˜æ–¹ç»™å‡ºçš„ <a href="https://projector.tensorflow.org/">mnist ä¾‹å­</a>ä¸€æ ·ï¼š</p>
<div class="figure center" style="width:;"><a class="fancybox" href="https://s2.loli.net/2021/12/17/g3iG7TmNpZkDYRq.png" title="å®˜æ–¹ Mnist ä¾‹å­" data-caption="å®˜æ–¹ Mnist ä¾‹å­" data-fancybox="default"><img class="fig-img" src="https://s2.loli.net/2021/12/17/g3iG7TmNpZkDYRq.png" alt="å®˜æ–¹ Mnist ä¾‹å­"></a><span class="caption">å®˜æ–¹ Mnist ä¾‹å­</span></div>
<p>ä½†æ˜¯ç”±äºæ¯ä¸ªè¯æ‰€å«å­—çš„æ•°é‡éƒ½ä¸åŒï¼ŒåŒæ—¶åˆéœ€è¦å°½é‡è®©è¯é“ºæ»¡æ•´ä¸ªå›¾ç‰‡ï¼Œæ‰€ä»¥ä¸åŒå›¾ç‰‡ä¸­å­—çš„ fontsize éƒ½æ˜¯ä¸åŒçš„ï¼Œéœ€è¦è§†æƒ…å†µè°ƒæ•´ï¼Œè¿™æ˜¯ä¸€ä¸ªè¿­ä»£çš„è¿‡ç¨‹ã€‚è€Œè½¬å›¾ç‰‡æˆ‘ä»¬å¯ä»¥å€ŸåŠ© PIL æ¥å®Œæˆï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">text2image</span>(<span class="params">text, imgfile</span>):</span><br><span class="line">    image = Image.new(<span class="string">&quot;RGB&quot;</span>, (<span class="number">50</span>, <span class="number">50</span>), color=(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>))</span><br><span class="line">    draw = ImageDraw.Draw(image)</span><br><span class="line">    fontsize = <span class="number">1</span>  <span class="comment"># starting font size</span></span><br><span class="line">    fontpath = <span class="string">&quot;simhei.ttf&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># portion of image width you want text width to be</span></span><br><span class="line">    img_fraction = <span class="number">0.9</span></span><br><span class="line"></span><br><span class="line">    font = ImageFont.truetype(fontpath, fontsize)</span><br><span class="line">    <span class="keyword">while</span> (font.getsize(text)[<span class="number">0</span>] &lt; img_fraction * image.size[<span class="number">0</span>]) <span class="keyword">and</span> (</span><br><span class="line">        font.getsize(text)[<span class="number">1</span>] &lt; img_fraction * image.size[<span class="number">1</span>]</span><br><span class="line">    ):</span><br><span class="line">        <span class="comment"># iterate until the text size is just larger than the criteria</span></span><br><span class="line">        fontsize += <span class="number">1</span></span><br><span class="line">        font = ImageFont.truetype(fontpath, fontsize)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># optionally de-increment to be sure it is less than criteria</span></span><br><span class="line">    fontsize -= <span class="number">1</span></span><br><span class="line">    font = ImageFont.truetype(fontpath, fontsize)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(&#x27;final font size&#x27;,fontsize)</span></span><br><span class="line">    draw.text((<span class="number">0</span>, <span class="number">0</span>), text, font=font, fill=(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))  <span class="comment"># put the text on the image</span></span><br><span class="line">    image.save(imgfile)  <span class="comment"># save it</span></span><br></pre></td></tr></table></figure>
<p>å½“æˆ‘ä»¬æŠŠæ‰€æœ‰è¯éƒ½è½¬æˆå›¾ç‰‡åï¼Œå†å°†è¿™äº›å›¾ç‰‡ï¼ŒæŒ‰ç…§ä¸€å®šè§„åˆ™æ‹¼æ¥åˆ°ä¸€èµ·ï¼Œæœ€ç»ˆå½¢æˆçš„è¿™ä¹ˆä¸€ä¸ªå¤§å›¾ï¼Œå°±æ˜¯æ‰€è°“çš„ <code>sprite.jpg</code>ã€‚</p>
<div class="figure center" style="width:;"><a class="fancybox" href="https://s2.loli.net/2021/12/17/PjedLVwymCa84GZ.png" title="Sprite Image" data-caption="Sprite Image" data-fancybox="default"><img class="fig-img" src="https://s2.loli.net/2021/12/17/PjedLVwymCa84GZ.png" alt="Sprite Image"></a><span class="caption">Sprite Image</span></div>
<div class="figure center" style="width:;"><a class="fancybox" href="https://www.tensorflow.org/images/mnist_10k_sprite.png" title="Mnist ä¾‹å­ä¸­çš„ sprite image" data-caption="Mnist ä¾‹å­ä¸­çš„ sprite image" data-fancybox="default"><img class="fig-img" src="https://www.tensorflow.org/images/mnist_10k_sprite.png" alt="Mnist ä¾‹å­ä¸­çš„ sprite image"></a><span class="caption">Mnist ä¾‹å­ä¸­çš„ sprite image</span></div>
<p>é‚£ä¹ˆæŒ‰ç…§ä»€ä¹ˆè§„åˆ™æ¥æ‹¼æ¥å‘¢ï¼Ÿ</p>
<p><code>sprite.jpg</code> å¿…é¡»æ˜¯æ­£æ–¹å½¢ï¼Œæ¯ä¸ªå°å›¾ä¹Ÿæœ€å¥½æ˜¯æ­£æ–¹å½¢ï¼Œæ„å‘³ç€è¡Œåˆ—ä¸Šçš„å°å›¾æ•°é‡å¿…é¡»æ˜¯ç›¸ç­‰çš„ï¼Œè€Œä¸” tensorboard è¯»è¿™ä¸ª sprite çš„æ—¶å€™æ˜¯æŒ‰ç…§è¡Œä¼˜å…ˆçš„é¡ºåºè¯»çš„ã€‚æ‰€ä»¥å‡è®¾ä½ æœ‰ 8 å¼ å°å›¾ï¼Œé‚£ä¹ˆæœ€ç»ˆçš„æ‘†æ”¾é¡ºåºå°±æ˜¯ä¸‹é¢è¿™æ ·ï¼š</p>
<div class="figure center" style="width:;"><a class="fancybox" href="https://s2.loli.net/2021/12/17/gemcN2hIt6sWZOQ.png" title="8 å¼ å°å›¾æ—¶çš„æ‘†æ”¾é¡ºåº" data-caption="8 å¼ å°å›¾æ—¶çš„æ‘†æ”¾é¡ºåº" data-fancybox="default"><img class="fig-img" src="https://s2.loli.net/2021/12/17/gemcN2hIt6sWZOQ.png" alt="8 å¼ å°å›¾æ—¶çš„æ‘†æ”¾é¡ºåº"></a><span class="caption">8 å¼ å°å›¾æ—¶çš„æ‘†æ”¾é¡ºåº</span></div>
<p>æœ€åé‚£ä¸€æ ¼æ˜¯ç©ºç™½çš„ï¼Œä¹Ÿå°±æ˜¯å…¨ç™½ã€‚</p>
<p>å½“ç„¶ä¹Ÿæœ‰å¯èƒ½æœ€åä¸€è¡Œéƒ½æ˜¯ç©ºç™½çš„ï¼Œä¾‹å¦‚ä½ æœ‰ 5 å¼ å°å›¾ï¼Œé‚£ä¹ˆè¦æƒ³æ¯è¡Œæ¯åˆ—ä¸Šçš„å°å›¾æ•°é‡æ˜¯ä¸€æ ·çš„ï¼Œé‚£ä¹ˆæ¯è¡Œæ¯åˆ—ä¸Šå°±å¾—æœ‰ 3 å¼ å°å›¾ï¼š</p>
<div class="figure center" style="width:;"><a class="fancybox" href="https://s2.loli.net/2021/12/17/cE3dkBmSgHnXAjb.png" title="5 å¼ å°å›¾æ—¶çš„æ‘†æ”¾é¡ºåº" data-caption="5 å¼ å°å›¾æ—¶çš„æ‘†æ”¾é¡ºåº" data-fancybox="default"><img class="fig-img" src="https://s2.loli.net/2021/12/17/cE3dkBmSgHnXAjb.png" alt="5 å¼ å°å›¾æ—¶çš„æ‘†æ”¾é¡ºåº"></a><span class="caption">5 å¼ å°å›¾æ—¶çš„æ‘†æ”¾é¡ºåº</span></div>
<p>è¿™æ ·ä¸ä»…ç¬¬äºŒè¡Œæœ€åä¸€æ ¼æ˜¯ç©ºç™½çš„ï¼Œå°±è¿ç¬¬ä¸‰è¡Œæ•´è¡Œéƒ½æ˜¯ç©ºç™½çš„ã€‚</p>
<p>æ‰€ä»¥æ€»ç»“æ¥è¯´ï¼Œå‡è®¾ä½ æœ‰ $n$ å¼ å°å›¾ï¼Œé‚£ä¹ˆæ¯è¡Œæ¯åˆ—ä¸Šå°å›¾çš„æ•°é‡å°±æ˜¯ $\lceil \sqrt n \rceil$ï¼Œå³æ ¹å· $n$ ç„¶åä¸Šå–æ•´ã€‚</p>
<p>å…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">text2image</span>(<span class="params">text, imgfile</span>):</span><br><span class="line">    image = Image.new(<span class="string">&quot;RGB&quot;</span>, (<span class="number">50</span>, <span class="number">50</span>), color=(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>))</span><br><span class="line">    draw = ImageDraw.Draw(image)</span><br><span class="line">    fontsize = <span class="number">1</span>  <span class="comment"># starting font size</span></span><br><span class="line">    fontpath = <span class="string">&quot;simhei.ttf&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># portion of image width you want text width to be</span></span><br><span class="line">    img_fraction = <span class="number">0.9</span></span><br><span class="line"></span><br><span class="line">    font = ImageFont.truetype(fontpath, fontsize)</span><br><span class="line">    <span class="keyword">while</span> (font.getsize(text)[<span class="number">0</span>] &lt; img_fraction * image.size[<span class="number">0</span>]) <span class="keyword">and</span> (</span><br><span class="line">        font.getsize(text)[<span class="number">1</span>] &lt; img_fraction * image.size[<span class="number">1</span>]</span><br><span class="line">    ):  <span class="comment"># ä¿è¯è¯åœ¨è¡Œåˆ—ä¸Šå‡ä¸è¶…å‡ºå›¾ç‰‡èŒƒå›´</span></span><br><span class="line">        <span class="comment"># iterate until the text size is just larger than the criteria</span></span><br><span class="line">        fontsize += <span class="number">1</span></span><br><span class="line">        font = ImageFont.truetype(fontpath, fontsize)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># optionally de-increment to be sure it is less than criteria</span></span><br><span class="line">    fontsize -= <span class="number">1</span></span><br><span class="line">    font = ImageFont.truetype(fontpath, fontsize)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># print(&#x27;final font size&#x27;,fontsize)</span></span><br><span class="line">    draw.text((<span class="number">0</span>, <span class="number">0</span>), text, font=font, fill=(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))  <span class="comment"># put the text on the image</span></span><br><span class="line">    image.save(imgfile)  <span class="comment"># save it</span></span><br></pre></td></tr></table></figure>
<h2 id="projector-config-pbtxt"><a href="#projector-config-pbtxt" class="headerlink" title="projector_config.pbtxt"></a>projector_config.pbtxt</h2><p>åœ¨å¾—åˆ°äº† <code>metadata.tsv</code> ã€ <code>tensor.tsv</code> å’Œ <code>sprite.jpg</code> åï¼Œæˆ‘ä»¬è¿˜éœ€è¦å‘Šè¯‰ tensorboard è¿™äº›æ–‡ä»¶çš„ä½ç½®å’Œæ¯ä¸ªå°å›¾çš„ç»´åº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸€ä¸ª <code>.pbtxt</code> æ–‡ä»¶æ¥æŒ‡å®šè¿™äº›ä¿¡æ¯ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç”¨ä»¥ä¸‹ç¨‹åºæ¥ç”Ÿæˆè¯¥æ–‡ä»¶ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> tensorboard.plugins <span class="keyword">import</span> projector</span><br><span class="line"></span><br><span class="line">config = projector.ProjectorConfig()</span><br><span class="line">embedding = config.embeddings.add()</span><br><span class="line">embedding.metadata_path = metadata_filename</span><br><span class="line">embedding.tensor_path = tensor_filename</span><br><span class="line">embedding.sprite.image_path = sprite_filename</span><br><span class="line">embedding.sprite.single_image_dim.extend([unit_dim, unit_dim])  <span class="comment"># unit_dim å°±æ˜¯å°å›¾ç»´åº¦</span></span><br><span class="line">projector.visualize_embeddings(logdir, config)</span><br></pre></td></tr></table></figure>
<p>ç„¶åå°±ä¼šå¾—åˆ°ä¸€ä¸ªåä¸º <code>projector_config.pbtxt</code> çš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">embeddings &#123;</span><br><span class="line">  metadata_path: <span class="string">&quot;metadata.tsv&quot;</span></span><br><span class="line">  sprite &#123;</span><br><span class="line">    image_path: <span class="string">&quot;sprite.jpg&quot;</span></span><br><span class="line">    single_image_dim: <span class="number">50</span></span><br><span class="line">    single_image_dim: <span class="number">50</span></span><br><span class="line">  &#125;</span><br><span class="line">  tensor_path: <span class="string">&quot;tensor.tsv&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥æŒ‰ç…§è¿™ä¸ªæ ¼å¼ç›´æ¥æ‰‹åŠ¨åˆ›å»ºè¿™ä¸ªæ–‡ä»¶ã€‚</p>
<h2 id="å¯åŠ¨"><a href="#å¯åŠ¨" class="headerlink" title="å¯åŠ¨"></a>å¯åŠ¨</h2><p>ä¸‡äº‹ä¿±å¤‡ï¼Œåªæ¬ ä¸œé£ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬ç»ˆäºå¯ä»¥å¯åŠ¨ tensorboard äº†ï¼š</p>
<figure class="highlight protobuf"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ tensorboard --logdir=projector/</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>projector/</code> å°±æ˜¯ä½ ä¸Šé¢æŒ‡å®šçš„ <code>logdir</code> ã€‚</p>
</blockquote>
<p>ç„¶åæ ¹æ®æç¤ºåœ¨æµè§ˆå™¨æ‰“å¼€ <code>http://localhost:6006/#projector</code> å°±å¯ä»¥çœ‹åˆ°é¡µé¢äº†ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œå°è¯•ä¸åŒé™ç»´ç®—æ³•çš„æ•ˆæœï¼Œä¹Ÿå¯ä»¥ç‚¹å‡»æˆ–æœç´¢å›¾ä¸Šçš„è¯æ¥æŸ¥çœ‹å…¶ç›¸ä¼¼è¯ï¼Œå¤§è‡´è¯„ä¼°ä¸‹ embedding çš„æ•ˆæœã€‚</p>
<div class="figure center" style="width:;"><a class="fancybox" href="https://s2.loli.net/2021/12/17/6sxGNA2ZlkdQnB5.png" title="â€œæ·å…‹å…±å’Œå›½â€çš„è¿‘ä¹‰è¯" data-caption="â€œæ·å…‹å…±å’Œå›½â€çš„è¿‘ä¹‰è¯" data-fancybox="default"><img class="fig-img" src="https://s2.loli.net/2021/12/17/6sxGNA2ZlkdQnB5.png" alt="â€œæ·å…‹å…±å’Œå›½â€çš„è¿‘ä¹‰è¯"></a><span class="caption">â€œæ·å…‹å…±å’Œå›½â€çš„è¿‘ä¹‰è¯</span></div>
<h2 id="æ‰©å±•"><a href="#æ‰©å±•" class="headerlink" title="æ‰©å±•"></a>æ‰©å±•</h2><p>Embedding Projector ä¸­çš„ç‚¹ä¸ä»…ä»…å¯ä»¥æ˜¯å›¾åƒã€è¯ï¼Œç†è®ºä¸Šåªè¦æ˜¯å¯ä»¥ embedding çš„ä¸œè¥¿ï¼Œå°±å¯ä»¥æ˜¾ç¤ºã€‚è€Œä¸”ä½ æ‡‚çš„ï¼Œä¸‡ç‰©çš†å¯ embeddingâ€¦â€¦ğŸ˜‚</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://towardsdatascience.com/taking-the-tensorboard-embedding-projector-to-the-next-level-bde53deb6bb7">Taking the TensorBoard Embedding Projector to the Next Level | Towards Data Science</a></li>
<li><a href="https://medium.com/@kumon/visualizing-image-feature-vectors-through-tensorboard-b850ce1be7f1">Visualizing Image Feature Vectors through TensorBoard | by Takuma Yamaguchi (Kumon) | Medium</a></li>
<li><a href="https://branyang.gitbooks.io/tfdocs/content/get_started/embedding_viz.html">TensorBoard: Embedding Visualization Â· tfdocs</a></li>
<li><a href="https://github.com/tensorflow/tensorboard/issues/3840">Projector plugin hangs with â€œFetching sprite imageâ€¦â€ Â· Issue #3840 Â· tensorflow/tensorboard</a></li>
<li><a href="https://github.com/tensorflow/tensorboard/issues/386">[projector] unicode not supported for 3D mode labels Â· Issue #386 Â· tensorflow/tensorboard</a></li>
<li><a href="https://stackoverflow.com/questions/4902198/pil-how-to-scale-text-size-in-relation-to-the-size-of-the-image">python - PIL how to scale text size in relation to the size of the image - Stack Overflow</a></li>
</ul>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2>
            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">æ ‡ç­¾</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/NLP/" rel="tag">NLP</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/Python/" rel="tag">Python</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/TensorBoard/" rel="tag">TensorBoard</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2022/01/08/introducing-upsetplot/"
                    data-tooltip="UpSet Plot ç®€æ˜“æŒ‡å—ï¼ˆä¸€ï¼‰"
                    aria-label="ä¸Šä¸€ç¯‡: UpSet Plot ç®€æ˜“æŒ‡å—ï¼ˆä¸€ï¼‰"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">ä¸Šä¸€ç¯‡</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2021/11/07/transformers-classification-custom-dataset/"
                    data-tooltip="ä½¿ç”¨ Transformers åœ¨ä½ è‡ªå·±çš„æ•°æ®é›†ä¸Šè®­ç»ƒæ–‡æœ¬åˆ†ç±»æ¨¡å‹"
                    aria-label="ä¸‹ä¸€ç¯‡: ä½¿ç”¨ Transformers åœ¨ä½ è‡ªå·±çš„æ•°æ®é›†ä¸Šè®­ç»ƒæ–‡æœ¬åˆ†ç±»æ¨¡å‹"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">ä¸‹ä¸€ç¯‡</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://alanlee.fun/2021/12/17/tensorboard-embedding-projector/"
                    title="åˆ†äº«åˆ° Facebook"
                    aria-label="åˆ†äº«åˆ° Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://alanlee.fun/2021/12/17/tensorboard-embedding-projector/"
                    title="åˆ†äº«åˆ° Twitter"
                    aria-label="åˆ†äº«åˆ° Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://alanlee.fun/2021/12/17/tensorboard-embedding-projector/"
                    title="åˆ†äº«åˆ° Weibo"
                    aria-label="åˆ†äº«åˆ° Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Kommentieren"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="ç›®å½•">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2025 Alan Lee. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2022/01/08/introducing-upsetplot/"
                    data-tooltip="UpSet Plot ç®€æ˜“æŒ‡å—ï¼ˆä¸€ï¼‰"
                    aria-label="ä¸Šä¸€ç¯‡: UpSet Plot ç®€æ˜“æŒ‡å—ï¼ˆä¸€ï¼‰"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">ä¸Šä¸€ç¯‡</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2021/11/07/transformers-classification-custom-dataset/"
                    data-tooltip="ä½¿ç”¨ Transformers åœ¨ä½ è‡ªå·±çš„æ•°æ®é›†ä¸Šè®­ç»ƒæ–‡æœ¬åˆ†ç±»æ¨¡å‹"
                    aria-label="ä¸‹ä¸€ç¯‡: ä½¿ç”¨ Transformers åœ¨ä½ è‡ªå·±çš„æ•°æ®é›†ä¸Šè®­ç»ƒæ–‡æœ¬åˆ†ç±»æ¨¡å‹"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">ä¸‹ä¸€ç¯‡</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://alanlee.fun/2021/12/17/tensorboard-embedding-projector/"
                    title="åˆ†äº«åˆ° Facebook"
                    aria-label="åˆ†äº«åˆ° Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://alanlee.fun/2021/12/17/tensorboard-embedding-projector/"
                    title="åˆ†äº«åˆ° Twitter"
                    aria-label="åˆ†äº«åˆ° Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://alanlee.fun/2021/12/17/tensorboard-embedding-projector/"
                    title="åˆ†äº«åˆ° Weibo"
                    aria-label="åˆ†äº«åˆ° Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Kommentieren"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="ç›®å½•">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://alanlee.fun/2021/12/17/tensorboard-embedding-projector/"
                        aria-label="åˆ†äº«åˆ° Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>åˆ†äº«åˆ° Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://alanlee.fun/2021/12/17/tensorboard-embedding-projector/"
                        aria-label="åˆ†äº«åˆ° Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>åˆ†äº«åˆ° Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://service.weibo.com/share/share.php?&amp;title=https://alanlee.fun/2021/12/17/tensorboard-embedding-projector/"
                        aria-label="åˆ†äº«åˆ° Weibo"
                    >
                        <i class="fab fa-weibo" aria-hidden="true"></i><span>åˆ†äº«åˆ° Weibo</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png" alt="ä½œè€…çš„å›¾ç‰‡"/>
        
            <h4 id="about-card-name">Alan Lee</h4>
        
            <div id="about-card-bio"><p>NLP and Python developer, sometimes datavis, he/him. Stick to what you believe.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                åŒ—äº¬
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('https://s2.loli.net/2021/12/16/5nuJTFWg2QACLDf.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-bzxavs3xgrmr4dhl4zkhmrmrloaxiygxfjiarsltzu6y5bjgj5wpgsicnjdf.min.js"></script>

<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'https://alanlee.fun/2021/12/17/tensorboard-embedding-projector/';
              
            this.page.identifier = '2021/12/17/tensorboard-embedding-projector/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'secsilm';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    




    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
