
<!DOCTYPE html>
<html lang="zh-cn">
    
<head>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Alan Lee">
    <title>理解编辑距离 - Alan Lee</title>
    <meta name="author" content="Alan Lee">
    
        <meta name="keywords" content="hexo,python,tensorflow,pytorch,nlp,natural language processing,deep learning,machine learning,large language models,llms,">
    
    
        <link rel="icon" href="https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png">
    
    
        
            <link rel="alternate" type="application/atom+xml" title="RSS" href="/atom.xml">
        
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Alan Lee","sameAs":["https://github.com/secsilm","https://twitter.com/bluekirin93","mailto:secsilm@outlook.com"],"image":"https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png"},"articleBody":"\n顾名思义，编辑距离（Edit distance）是一种距离，用于衡量两个字符串之间的远近程度，方式是一个字符串至少需要多少次基础变换才能变成另一个字符串，可应用在拼写检查、判断 DNA 相似度等场景中。根据可操作的基础变换不同，可分为以下几种：\n\n莱文斯坦距离（Levenshtein distance）：最常见的编辑距离，基础变换包括插入、删除和替换。但是需要注意一点的是，当每种变换发生时，产生的距离（或者称为代价）并不一定是 1，例如斯坦福大学关于最小编辑距离的课件中，一次替换产生的距离就可能是 2。\n最长公共子序列（LCS）距离：基础变换包括插入和删除。\nJaro 距离：基础变换只包括转置，即交换两个字符的位置，AB -&gt; BA。\n汉明距离：基础变换只包括替换，所以只能应用于两个字符串长度相等的情况。\n\n本文只讨论最常见的第一种形式，莱文斯坦距离。\n解法解法有两种：暴力法和动态规划法。\n暴力法暴力法思想很直接，采用递归思想，直接取所需插入、删除和替换操作的最小值。\n代码：\n12345678910111213141516def brute_force(s1, s2):    m = len(s1)    n = len(s2)    if m == 0:        return n    if n == 0:        return m    if s1[m - 1] == s2[n - 1]:        c = 0    else:        c = 1  # 一次替换产生的距离，也可以定义成 2    return min(        brute_force(s1, s2[: n - 1]) + 1,  # 插入        brute_force(s1[: m - 1], s2) + 1,  # 删除        brute_force(s1[: m - 1], s2[: n - 1]) + c,  # 替换    )\n缺点就是耗时很大，这是由于存在大量的重复计算。有多大量？我举一个例子，brute_force(&#39;geek&#39;, &#39;gesek&#39;)，下图是函数调用次数排行榜：\n window.PlotlyConfig = {MathJaxConfig: 'local'};    window.PLOTLYENV=window.PLOTLYENV || {}; if (document.getElementById(\"59239f93-7e0e-49eb-999a-491d203e5eeb\")) { Plotly.newPlot( '59239f93-7e0e-49eb-999a-491d203e5eeb', [{\"type\": \"bar\", \"x\": [\"brute_force('', 'g')\", \"brute_force('g', '')\", \"brute_force('g', 'g')\", \"brute_force('', '')\", \"brute_force('', 'ge')\", \"brute_force('g', 'ge')\", \"brute_force('ge', '')\", \"brute_force('ge', 'g')\", \"brute_force('', 'ges')\", \"brute_force('ge', 'ge')\", \"brute_force('g', 'ges')\", \"brute_force('ge', 'ges')\", \"brute_force('gee', '')\", \"brute_force('gee', 'g') \", \"brute_force('', 'gese')\", \"brute_force('gee', 'ge')\", \"brute_force('g', 'gese')\", \"brute_force('gee', 'ges')\", \"brute_force('ge', 'gese')\", \"brute_force('gee', 'gese')\", \"brute_force('geek', 'gesek')\", \"brute_force('geek', 'gese')\", \"brute_force('geek', 'ges')\", \"brute_force('geek', 'ge')\", \"brute_force('geek', 'g')\", \"brute_force('geek', '')\", \"brute_force('gee', 'gesek')\", \"brute_force('ge', 'gesek')\", \"brute_force('g', 'gesek')\", \"brute_force('', 'gesek')\"], \"y\": [192, 170, 129, 129, 88, 63, 50, 41, 32, 25, 25, 13, 10, 9, 8, 7, 7, 5, 5, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]}], {\"template\": {\"data\": {\"bar\": [{\"error_x\": {\"color\": \"#2a3f5f\"}, \"error_y\": {\"color\": \"#2a3f5f\"}, \"marker\": {\"line\": {\"color\": \"#E5ECF6\", \"width\": 0.5}}, \"type\": \"bar\"}], \"barpolar\": [{\"marker\": {\"line\": {\"color\": \"#E5ECF6\", \"width\": 0.5}}, \"type\": \"barpolar\"}], \"carpet\": [{\"aaxis\": {\"endlinecolor\": \"#2a3f5f\", \"gridcolor\": \"white\", \"linecolor\": \"white\", \"minorgridcolor\": \"white\", \"startlinecolor\": \"#2a3f5f\"}, \"baxis\": {\"endlinecolor\": \"#2a3f5f\", \"gridcolor\": \"white\", \"linecolor\": \"white\", \"minorgridcolor\": \"white\", \"startlinecolor\": \"#2a3f5f\"}, \"type\": \"carpet\"}], \"choropleth\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"type\": \"choropleth\"}], \"contour\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"colorscale\": [[0.0, \"#0d0887\"], [0.1111111111111111, \"#46039f\"], [0.2222222222222222, \"#7201a8\"], [0.3333333333333333, \"#9c179e\"], [0.4444444444444444, \"#bd3786\"], [0.5555555555555556, \"#d8576b\"], [0.6666666666666666, \"#ed7953\"], [0.7777777777777778, \"#fb9f3a\"], [0.8888888888888888, \"#fdca26\"], [1.0, \"#f0f921\"]], \"type\": \"contour\"}], \"contourcarpet\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"type\": \"contourcarpet\"}], \"heatmap\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"colorscale\": [[0.0, \"#0d0887\"], [0.1111111111111111, \"#46039f\"], [0.2222222222222222, \"#7201a8\"], [0.3333333333333333, \"#9c179e\"], [0.4444444444444444, \"#bd3786\"], [0.5555555555555556, \"#d8576b\"], [0.6666666666666666, \"#ed7953\"], [0.7777777777777778, \"#fb9f3a\"], [0.8888888888888888, \"#fdca26\"], [1.0, \"#f0f921\"]], \"type\": \"heatmap\"}], \"heatmapgl\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"colorscale\": [[0.0, \"#0d0887\"], [0.1111111111111111, \"#46039f\"], [0.2222222222222222, \"#7201a8\"], [0.3333333333333333, \"#9c179e\"], [0.4444444444444444, \"#bd3786\"], [0.5555555555555556, \"#d8576b\"], [0.6666666666666666, \"#ed7953\"], [0.7777777777777778, \"#fb9f3a\"], [0.8888888888888888, \"#fdca26\"], [1.0, \"#f0f921\"]], \"type\": \"heatmapgl\"}], \"histogram\": [{\"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"histogram\"}], \"histogram2d\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"colorscale\": [[0.0, \"#0d0887\"], [0.1111111111111111, \"#46039f\"], [0.2222222222222222, \"#7201a8\"], [0.3333333333333333, \"#9c179e\"], [0.4444444444444444, \"#bd3786\"], [0.5555555555555556, \"#d8576b\"], [0.6666666666666666, \"#ed7953\"], [0.7777777777777778, \"#fb9f3a\"], [0.8888888888888888, \"#fdca26\"], [1.0, \"#f0f921\"]], \"type\": \"histogram2d\"}], \"histogram2dcontour\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"colorscale\": [[0.0, \"#0d0887\"], [0.1111111111111111, \"#46039f\"], [0.2222222222222222, \"#7201a8\"], [0.3333333333333333, \"#9c179e\"], [0.4444444444444444, \"#bd3786\"], [0.5555555555555556, \"#d8576b\"], [0.6666666666666666, \"#ed7953\"], [0.7777777777777778, \"#fb9f3a\"], [0.8888888888888888, \"#fdca26\"], [1.0, \"#f0f921\"]], \"type\": \"histogram2dcontour\"}], \"mesh3d\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"type\": \"mesh3d\"}], \"parcoords\": [{\"line\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"parcoords\"}], \"pie\": [{\"automargin\": true, \"type\": \"pie\"}], \"scatter\": [{\"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"scatter\"}], \"scatter3d\": [{\"line\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"scatter3d\"}], \"scattercarpet\": [{\"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"scattercarpet\"}], \"scattergeo\": [{\"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"scattergeo\"}], \"scattergl\": [{\"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"scattergl\"}], \"scattermapbox\": [{\"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"scattermapbox\"}], \"scatterpolar\": [{\"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"scatterpolar\"}], \"scatterpolargl\": [{\"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"scatterpolargl\"}], \"scatterternary\": [{\"marker\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"type\": \"scatterternary\"}], \"surface\": [{\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}, \"colorscale\": [[0.0, \"#0d0887\"], [0.1111111111111111, \"#46039f\"], [0.2222222222222222, \"#7201a8\"], [0.3333333333333333, \"#9c179e\"], [0.4444444444444444, \"#bd3786\"], [0.5555555555555556, \"#d8576b\"], [0.6666666666666666, \"#ed7953\"], [0.7777777777777778, \"#fb9f3a\"], [0.8888888888888888, \"#fdca26\"], [1.0, \"#f0f921\"]], \"type\": \"surface\"}], \"table\": [{\"cells\": {\"fill\": {\"color\": \"#EBF0F8\"}, \"line\": {\"color\": \"white\"}}, \"header\": {\"fill\": {\"color\": \"#C8D4E3\"}, \"line\": {\"color\": \"white\"}}, \"type\": \"table\"}]}, \"layout\": {\"annotationdefaults\": {\"arrowcolor\": \"#2a3f5f\", \"arrowhead\": 0, \"arrowwidth\": 1}, \"coloraxis\": {\"colorbar\": {\"outlinewidth\": 0, \"ticks\": \"\"}}, \"colorscale\": {\"diverging\": [[0, \"#8e0152\"], [0.1, \"#c51b7d\"], [0.2, \"#de77ae\"], [0.3, \"#f1b6da\"], [0.4, \"#fde0ef\"], [0.5, \"#f7f7f7\"], [0.6, \"#e6f5d0\"], [0.7, \"#b8e186\"], [0.8, \"#7fbc41\"], [0.9, \"#4d9221\"], [1, \"#276419\"]], \"sequential\": [[0.0, \"#0d0887\"], [0.1111111111111111, \"#46039f\"], [0.2222222222222222, \"#7201a8\"], [0.3333333333333333, \"#9c179e\"], [0.4444444444444444, \"#bd3786\"], [0.5555555555555556, \"#d8576b\"], [0.6666666666666666, \"#ed7953\"], [0.7777777777777778, \"#fb9f3a\"], [0.8888888888888888, \"#fdca26\"], [1.0, \"#f0f921\"]], \"sequentialminus\": [[0.0, \"#0d0887\"], [0.1111111111111111, \"#46039f\"], [0.2222222222222222, \"#7201a8\"], [0.3333333333333333, \"#9c179e\"], [0.4444444444444444, \"#bd3786\"], [0.5555555555555556, \"#d8576b\"], [0.6666666666666666, \"#ed7953\"], [0.7777777777777778, \"#fb9f3a\"], [0.8888888888888888, \"#fdca26\"], [1.0, \"#f0f921\"]]}, \"colorway\": [\"#636efa\", \"#EF553B\", \"#00cc96\", \"#ab63fa\", \"#FFA15A\", \"#19d3f3\", \"#FF6692\", \"#B6E880\", \"#FF97FF\", \"#FECB52\"], \"font\": {\"color\": \"#2a3f5f\"}, \"geo\": {\"bgcolor\": \"white\", \"lakecolor\": \"white\", \"landcolor\": \"#E5ECF6\", \"showlakes\": true, \"showland\": true, \"subunitcolor\": \"white\"}, \"hoverlabel\": {\"align\": \"left\"}, \"hovermode\": \"closest\", \"mapbox\": {\"style\": \"light\"}, \"paper_bgcolor\": \"white\", \"plot_bgcolor\": \"#E5ECF6\", \"polar\": {\"angularaxis\": {\"gridcolor\": \"white\", \"linecolor\": \"white\", \"ticks\": \"\"}, \"bgcolor\": \"#E5ECF6\", \"radialaxis\": {\"gridcolor\": \"white\", \"linecolor\": \"white\", \"ticks\": \"\"}}, \"scene\": {\"xaxis\": {\"backgroundcolor\": \"#E5ECF6\", \"gridcolor\": \"white\", \"gridwidth\": 2, \"linecolor\": \"white\", \"showbackground\": true, \"ticks\": \"\", \"zerolinecolor\": \"white\"}, \"yaxis\": {\"backgroundcolor\": \"#E5ECF6\", \"gridcolor\": \"white\", \"gridwidth\": 2, \"linecolor\": \"white\", \"showbackground\": true, \"ticks\": \"\", \"zerolinecolor\": \"white\"}, \"zaxis\": {\"backgroundcolor\": \"#E5ECF6\", \"gridcolor\": \"white\", \"gridwidth\": 2, \"linecolor\": \"white\", \"showbackground\": true, \"ticks\": \"\", \"zerolinecolor\": \"white\"}}, \"shapedefaults\": {\"line\": {\"color\": \"#2a3f5f\"}}, \"ternary\": {\"aaxis\": {\"gridcolor\": \"white\", \"linecolor\": \"white\", \"ticks\": \"\"}, \"baxis\": {\"gridcolor\": \"white\", \"linecolor\": \"white\", \"ticks\": \"\"}, \"bgcolor\": \"#E5ECF6\", \"caxis\": {\"gridcolor\": \"white\", \"linecolor\": \"white\", \"ticks\": \"\"}}, \"title\": {\"x\": 0.05}, \"xaxis\": {\"automargin\": true, \"gridcolor\": \"white\", \"linecolor\": \"white\", \"ticks\": \"\", \"title\": {\"standoff\": 15}, \"zerolinecolor\": \"white\", \"zerolinewidth\": 2}, \"yaxis\": {\"automargin\": true, \"gridcolor\": \"white\", \"linecolor\": \"white\", \"ticks\": \"\", \"title\": {\"standoff\": 15}, \"zerolinecolor\": \"white\", \"zerolinewidth\": 2}}}, \"title\": {\"text\": \"\\u51fd\\u6570\\u8c03\\u7528\\u6b21\\u6570\\u6392\\u884c\\uff0c\\u4ee5 brute_force('geek', 'gesek') \\u4e3a\\u4f8b\"}, \"xaxis\": {\"title\": {\"text\": \"\\u51fd\\u6570\"}}, \"yaxis\": {\"title\": {\"text\": \"\\u8c03\\u7528\\u6b21\\u6570\"}}}, {\"responsive\": true} ) };  \n\n可以看到，排第一的 brute_force(&#39;&#39;, &#39;g&#39;) 被调用了 192 次，brute_force() 总计被调用了 1021 次，这还仅仅是对两个长度分别为 4、5 的字符串进行的比较，其耗时程度可见一斑。\n动态规划法动态规划法是对暴力法的改进，把所有的重复计算都干掉，空间换时间，将计算过的值存储到一个矩阵中，后面用的时候就直接取。\n代码：\n123456789101112131415161718def levenshtein_distance_dp(s1, s2):    m = len(s1) + 1    n = len(s2) + 1    dp_table = np.zeros((m, n))    # 初始化    for i in range(m):        dp_table[i, 0] = i    for i in range(n):        dp_table[0, i] = i    for i in range(1, m):        for j in range(1, n):            dp_table[i, j] = min(                dp_table[i - 1, j] + 1,                dp_table[i, j - 1] + 1,                dp_table[i - 1, j - 1] + (1 if s1[i - 1] != s2[j - 1] else 0),            )    return int(dp_table[m - 2, n - 2])\n初始化为什么是那样呢？想象一下，假设我们想计算 geek 和 gesek 之间的距离，即从 geek 到 gesek 至少需要多少步，记着这一点。和其他动态规划问题一样，首先会有一个 DP 表：\n\n\n\n\n\n“”\ng\ne\ne\nk\n\n\n\n\n“”\n\n\n\n\n\n\n\ng\n\n\n\n\n\n\n\ne\n\n\n\n\n\n\n\ns\n\n\n\n\n\n\n\ne\n\n\n\n\n\n\n\nk\n\n\n\n\n\n\n\n\n从第一个单元开始，先看第一列，&quot;&quot; -&gt; &quot;&quot; 所需步骤为 0（因为相等），所以第一个填 0。\n\n\n\n\n\n“”\ng\ne\ne\nk\n\n\n\n\n“”\n0\n\n\n\n\n\n\ng\n\n\n\n\n\n\n\ne\n\n\n\n\n\n\n\ns\n\n\n\n\n\n\n\ne\n\n\n\n\n\n\n\nk\n\n\n\n\n\n\n\n\n第二行第一列，&quot;&quot; -&gt; g，需要插入一个字符 g，因此所需步骤为 1：\n\n\n\n\n\n“”\ng\ne\ne\nk\n\n\n\n\n“”\n0\n\n\n\n\n\n\ng\n1\n\n\n\n\n\n\ne\n\n\n\n\n\n\n\ns\n\n\n\n\n\n\n\ne\n\n\n\n\n\n\n\nk\n\n\n\n\n\n\n\n\n第三行第一列，&quot;&quot; -&gt; ge，需要插入两个字符 ge，因此需要两个步骤：\n\n\n\n\n\n“”\ng\ne\ne\nk\n\n\n\n\n“”\n0\n\n\n\n\n\n\ng\n1\n\n\n\n\n\n\ne\n2\n\n\n\n\n\n\ns\n\n\n\n\n\n\n\ne\n\n\n\n\n\n\n\nk\n\n\n\n\n\n\n\n\n以此类推，得到第一列：\n\n\n\n\n\n“”\ng\ne\ne\nk\n\n\n\n\n“”\n0\n\n\n\n\n\n\ng\n1\n\n\n\n\n\n\ne\n2\n\n\n\n\n\n\ns\n3\n\n\n\n\n\n\ne\n4\n\n\n\n\n\n\nk\n5\n\n\n\n\n\n\n\n对于第一行，同样的道理，只不过是删除操作，例如 ge -&gt; &quot;&quot; 需要删除两个字符，即两步删除操作。\n\n\n\n\n\n“”\ng\ne\ne\nk\n\n\n\n\n“”\n0\n1\n2\n3\n4\n\n\ng\n1\n\n\n\n\n\n\ne\n2\n\n\n\n\n\n\ns\n3\n\n\n\n\n\n\ne\n4\n\n\n\n\n\n\nk\n5\n\n\n\n\n\n\n\n这就完成了初始化过程。从过程中我们可以看出，其实对于一个单元格 $T[i,j]$ 来说，其左上角 $T[i-1, j-1]$ 是最小替换步数，正上方 $T[i-1, j]$ 是最小删除步数，左边 $T[i, j-1]$ 是最小插入步数，然后我们只需根据条件取最小即可，表格剩余部分就是这么推出来的。\n至于这个改进有多猛？我做了个实验：假设 s1 和 s2 长度相等，依次测试长度为 1-15 时的不同方法耗时（单位为秒）。结果看下图：\nwindow.MathJax&&MathJax.Hub.Config({SVG:{font:\"STIX-Web\"}})window.PlotlyConfig={MathJaxConfig:\"local\"}window.PLOTLYENV=window.PLOTLYENV||{},document.getElementById(\"47822e12-6bf7-4034-89bb-93276a65ac63\")&&Plotly.newPlot(\"47822e12-6bf7-4034-89bb-93276a65ac63\",[{name:\"$e^x$\",type:\"scatter\",visible:\"legendonly\",x:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49],y:[-1.4041050229628826,-1.404099479247733,-1.4040688655716456,-1.403899809778134,-1.4029662446212399,-1.3978108820982353,-1.369341778953872,-1.2121288127991572,-.3439624851901626,4.450252590253111,30.925016075850237,177.12477778626962,984.4736455414643,5442.840654077712,30062.97350701879,166021.03629904485,916812.8759926461,5062858.906471704,27958283.14798489,154392106.44499743,852588894.8022019,4708192898.227395,25999729151.503525,143576512353.78476,792862678638.2445,4378370924795.0557,24178375993170.7,133518579331962.69,737320448315482.4,4071653894343071.5,0x4fe1a313082abc,12416523242133e4,0x983fc6b2008cf00,0x348c13e0c5549a00,2090950410702063e4,0x6426d97e069c60000,6376360821999217e5,3521173789760538e6,19444735333859544e6,107378321769673e9,59296790561061566e7,3274505796788732e9,18082577677052361e9,9985617242372798e10,551428858716934e12,30451175810700893e11,16815842943218446e12,9286097050860677e13,51279973730237024e13]},{name:\"暴力法\",type:\"scatter\",x:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],y:[11046882718801497e-21,2444582059979439e-20,.00010851491242647171,.0005018208175897597,.002650056965649128,.013551163021475077,.05805866373702884,.2310628788545728,1.0091003910638392,5.708547709044068,30.9778117639944,173.14135673409328,969.083311538212,5448.7964361710465,30062.422973840028]},{name:\"动态规划法\",type:\"scatter\",x:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],y:[6143515929579735e-20,3168964758515358e-20,56452117860317223e-21,8851895108819008e-20,.00012062489986419678,.00016834121197462082,.0001949728466570377,.00019124336540699005,.0001911451108753681,.0002096588723361492,.0004734676331281662,.00037705898284912115,.0004319921135902405,.00044900970533490186,.0006017372943460941]}],{template:{data:{bar:[{error_x:{color:\"#2a3f5f\"},error_y:{color:\"#2a3f5f\"},marker:{line:{color:\"#E5ECF6\",width:.5}},type:\"bar\"}],barpolar:[{marker:{line:{color:\"#E5ECF6\",width:.5}},type:\"barpolar\"}],carpet:[{aaxis:{endlinecolor:\"#2a3f5f\",gridcolor:\"white\",linecolor:\"white\",minorgridcolor:\"white\",startlinecolor:\"#2a3f5f\"},baxis:{endlinecolor:\"#2a3f5f\",gridcolor:\"white\",linecolor:\"white\",minorgridcolor:\"white\",startlinecolor:\"#2a3f5f\"},type:\"carpet\"}],choropleth:[{colorbar:{outlinewidth:0,ticks:\"\"},type:\"choropleth\"}],contour:[{colorbar:{outlinewidth:0,ticks:\"\"},colorscale:[[0,\"#0d0887\"],[.1111111111111111,\"#46039f\"],[.2222222222222222,\"#7201a8\"],[.3333333333333333,\"#9c179e\"],[.4444444444444444,\"#bd3786\"],[.5555555555555556,\"#d8576b\"],[.6666666666666666,\"#ed7953\"],[.7777777777777778,\"#fb9f3a\"],[.8888888888888888,\"#fdca26\"],[1,\"#f0f921\"]],type:\"contour\"}],contourcarpet:[{colorbar:{outlinewidth:0,ticks:\"\"},type:\"contourcarpet\"}],heatmap:[{colorbar:{outlinewidth:0,ticks:\"\"},colorscale:[[0,\"#0d0887\"],[.1111111111111111,\"#46039f\"],[.2222222222222222,\"#7201a8\"],[.3333333333333333,\"#9c179e\"],[.4444444444444444,\"#bd3786\"],[.5555555555555556,\"#d8576b\"],[.6666666666666666,\"#ed7953\"],[.7777777777777778,\"#fb9f3a\"],[.8888888888888888,\"#fdca26\"],[1,\"#f0f921\"]],type:\"heatmap\"}],heatmapgl:[{colorbar:{outlinewidth:0,ticks:\"\"},colorscale:[[0,\"#0d0887\"],[.1111111111111111,\"#46039f\"],[.2222222222222222,\"#7201a8\"],[.3333333333333333,\"#9c179e\"],[.4444444444444444,\"#bd3786\"],[.5555555555555556,\"#d8576b\"],[.6666666666666666,\"#ed7953\"],[.7777777777777778,\"#fb9f3a\"],[.8888888888888888,\"#fdca26\"],[1,\"#f0f921\"]],type:\"heatmapgl\"}],histogram:[{marker:{colorbar:{outlinewidth:0,ticks:\"\"}},type:\"histogram\"}],histogram2d:[{colorbar:{outlinewidth:0,ticks:\"\"},colorscale:[[0,\"#0d0887\"],[.1111111111111111,\"#46039f\"],[.2222222222222222,\"#7201a8\"],[.3333333333333333,\"#9c179e\"],[.4444444444444444,\"#bd3786\"],[.5555555555555556,\"#d8576b\"],[.6666666666666666,\"#ed7953\"],[.7777777777777778,\"#fb9f3a\"],[.8888888888888888,\"#fdca26\"],[1,\"#f0f921\"]],type:\"histogram2d\"}],histogram2dcontour:[{colorbar:{outlinewidth:0,ticks:\"\"},colorscale:[[0,\"#0d0887\"],[.1111111111111111,\"#46039f\"],[.2222222222222222,\"#7201a8\"],[.3333333333333333,\"#9c179e\"],[.4444444444444444,\"#bd3786\"],[.5555555555555556,\"#d8576b\"],[.6666666666666666,\"#ed7953\"],[.7777777777777778,\"#fb9f3a\"],[.8888888888888888,\"#fdca26\"],[1,\"#f0f921\"]],type:\"histogram2dcontour\"}],mesh3d:[{colorbar:{outlinewidth:0,ticks:\"\"},type:\"mesh3d\"}],parcoords:[{line:{colorbar:{outlinewidth:0,ticks:\"\"}},type:\"parcoords\"}],pie:[{automargin:!0,type:\"pie\"}],scatter:[{marker:{colorbar:{outlinewidth:0,ticks:\"\"}},type:\"scatter\"}],scatter3d:[{line:{colorbar:{outlinewidth:0,ticks:\"\"}},marker:{colorbar:{outlinewidth:0,ticks:\"\"}},type:\"scatter3d\"}],scattercarpet:[{marker:{colorbar:{outlinewidth:0,ticks:\"\"}},type:\"scattercarpet\"}],scattergeo:[{marker:{colorbar:{outlinewidth:0,ticks:\"\"}},type:\"scattergeo\"}],scattergl:[{marker:{colorbar:{outlinewidth:0,ticks:\"\"}},type:\"scattergl\"}],scattermapbox:[{marker:{colorbar:{outlinewidth:0,ticks:\"\"}},type:\"scattermapbox\"}],scatterpolar:[{marker:{colorbar:{outlinewidth:0,ticks:\"\"}},type:\"scatterpolar\"}],scatterpolargl:[{marker:{colorbar:{outlinewidth:0,ticks:\"\"}},type:\"scatterpolargl\"}],scatterternary:[{marker:{colorbar:{outlinewidth:0,ticks:\"\"}},type:\"scatterternary\"}],surface:[{colorbar:{outlinewidth:0,ticks:\"\"},colorscale:[[0,\"#0d0887\"],[.1111111111111111,\"#46039f\"],[.2222222222222222,\"#7201a8\"],[.3333333333333333,\"#9c179e\"],[.4444444444444444,\"#bd3786\"],[.5555555555555556,\"#d8576b\"],[.6666666666666666,\"#ed7953\"],[.7777777777777778,\"#fb9f3a\"],[.8888888888888888,\"#fdca26\"],[1,\"#f0f921\"]],type:\"surface\"}],table:[{cells:{fill:{color:\"#EBF0F8\"},line:{color:\"white\"}},header:{fill:{color:\"#C8D4E3\"},line:{color:\"white\"}},type:\"table\"}]},layout:{annotationdefaults:{arrowcolor:\"#2a3f5f\",arrowhead:0,arrowwidth:1},coloraxis:{colorbar:{outlinewidth:0,ticks:\"\"}},colorscale:{diverging:[[0,\"#8e0152\"],[.1,\"#c51b7d\"],[.2,\"#de77ae\"],[.3,\"#f1b6da\"],[.4,\"#fde0ef\"],[.5,\"#f7f7f7\"],[.6,\"#e6f5d0\"],[.7,\"#b8e186\"],[.8,\"#7fbc41\"],[.9,\"#4d9221\"],[1,\"#276419\"]],sequential:[[0,\"#0d0887\"],[.1111111111111111,\"#46039f\"],[.2222222222222222,\"#7201a8\"],[.3333333333333333,\"#9c179e\"],[.4444444444444444,\"#bd3786\"],[.5555555555555556,\"#d8576b\"],[.6666666666666666,\"#ed7953\"],[.7777777777777778,\"#fb9f3a\"],[.8888888888888888,\"#fdca26\"],[1,\"#f0f921\"]],sequentialminus:[[0,\"#0d0887\"],[.1111111111111111,\"#46039f\"],[.2222222222222222,\"#7201a8\"],[.3333333333333333,\"#9c179e\"],[.4444444444444444,\"#bd3786\"],[.5555555555555556,\"#d8576b\"],[.6666666666666666,\"#ed7953\"],[.7777777777777778,\"#fb9f3a\"],[.8888888888888888,\"#fdca26\"],[1,\"#f0f921\"]]},colorway:[\"#636efa\",\"#EF553B\",\"#00cc96\",\"#ab63fa\",\"#FFA15A\",\"#19d3f3\",\"#FF6692\",\"#B6E880\",\"#FF97FF\",\"#FECB52\"],font:{color:\"#2a3f5f\"},geo:{bgcolor:\"white\",lakecolor:\"white\",landcolor:\"#E5ECF6\",showlakes:!0,showland:!0,subunitcolor:\"white\"},hoverlabel:{align:\"left\"},hovermode:\"closest\",mapbox:{style:\"light\"},paper_bgcolor:\"white\",plot_bgcolor:\"#E5ECF6\",polar:{angularaxis:{gridcolor:\"white\",linecolor:\"white\",ticks:\"\"},bgcolor:\"#E5ECF6\",radialaxis:{gridcolor:\"white\",linecolor:\"white\",ticks:\"\"}},scene:{xaxis:{backgroundcolor:\"#E5ECF6\",gridcolor:\"white\",gridwidth:2,linecolor:\"white\",showbackground:!0,ticks:\"\",zerolinecolor:\"white\"},yaxis:{backgroundcolor:\"#E5ECF6\",gridcolor:\"white\",gridwidth:2,linecolor:\"white\",showbackground:!0,ticks:\"\",zerolinecolor:\"white\"},zaxis:{backgroundcolor:\"#E5ECF6\",gridcolor:\"white\",gridwidth:2,linecolor:\"white\",showbackground:!0,ticks:\"\",zerolinecolor:\"white\"}},shapedefaults:{line:{color:\"#2a3f5f\"}},ternary:{aaxis:{gridcolor:\"white\",linecolor:\"white\",ticks:\"\"},baxis:{gridcolor:\"white\",linecolor:\"white\",ticks:\"\"},bgcolor:\"#E5ECF6\",caxis:{gridcolor:\"white\",linecolor:\"white\",ticks:\"\"}},title:{x:.05},xaxis:{automargin:!0,gridcolor:\"white\",linecolor:\"white\",ticks:\"\",title:{standoff:15},zerolinecolor:\"white\",zerolinewidth:2},yaxis:{automargin:!0,gridcolor:\"white\",linecolor:\"white\",ticks:\"\",title:{standoff:15},zerolinecolor:\"white\",zerolinewidth:2}}},title:{text:\"编辑距离：暴力法 VS 动态规划法\"},xaxis:{title:{text:\"字符串长度\"}},yaxis:{title:{text:\"所需时间/s\"}}},{responsive:!0})\n\n可以看到暴力法是指数级增长，当字符串长度为 15 时，暴力法耗时已经达到 30000 秒，约为 8.3 小时，动态规划法仅耗时万分之六秒。而当长度翻倍变为 30 时，暴力法预计至少需要 1.27 亿年才能算万，具体秒数可以点开图右上角灰色的 $e^x$ 来查看暴力法耗时的模拟曲线。该曲线并不是 $y=e^x$ 的曲线，具体公式如下：\ny = 2.21990087\\times10^{-7} e^{1.70878196x} - 1.40410625还有一些没说到的：\n\n有时候只求出编辑距离可能还不够，还需要回溯，对两个字符串进行对齐。\nWeighted Edit Distance，即加权编辑距离，这其实是在初始化和后续计算时加入了一些权重作为先验，一步操作产生的距离不再是 1 或者 2。\n其他变种……\n\n这些等有时间再说吧。\nReference\nMinimum Edit Distance\nEdit distance\nSimilarity Search - The String Edit Distance - Nikolaus Augsten\n编辑距离 - 维基百科，自由的百科全书\n\nEND","dateCreated":"2020-05-22T21:34:06+08:00","dateModified":"2025-06-14T20:46:16+08:00","datePublished":"2020-05-22T21:34:06+08:00","description":"\n顾名思义，编辑距离（Edit distance）是一种距离，用于衡量两个字符串之间的远近程度，方式是一个字符串至少需要多少次基础变换才能变成另一个字符串，可应用在拼写检查、判断 DNA 相似度等场景中。根据可操作的基础变换不同，可分为以下几种：","headline":"理解编辑距离","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://alanlee.fun/2020/05/22/understanding-edit-distance/"},"publisher":{"@type":"Organization","name":"Alan Lee","sameAs":["https://github.com/secsilm","https://twitter.com/bluekirin93","mailto:secsilm@outlook.com"],"image":"https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png","logo":{"@type":"ImageObject","url":"https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png"}},"url":"https://alanlee.fun/2020/05/22/understanding-edit-distance/","keywords":"NLP"}</script>
    <meta name="description" content="顾名思义，编辑距离（Edit distance）是一种距离，用于衡量两个字符串之间的远近程度，方式是一个字符串至少需要多少次基础变换才能变成另一个字符串，可应用在拼写检查、判断 DNA 相似度等场景中。根据可操作的基础变换不同，可分为以下几种：">
<meta property="og:type" content="blog">
<meta property="og:title" content="理解编辑距离">
<meta property="og:url" content="https://alanlee.fun/2020/05/22/understanding-edit-distance/index.html">
<meta property="og:site_name" content="Alan Lee">
<meta property="og:description" content="顾名思义，编辑距离（Edit distance）是一种距离，用于衡量两个字符串之间的远近程度，方式是一个字符串至少需要多少次基础变换才能变成另一个字符串，可应用在拼写检查、判断 DNA 相似度等场景中。根据可操作的基础变换不同，可分为以下几种：">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2020-05-22T13:34:06.000Z">
<meta property="article:modified_time" content="2025-06-14T12:46:16.200Z">
<meta property="article:author" content="Alan Lee">
<meta property="article:tag" content="NLP">
<meta name="twitter:card" content="summary">
<meta name="twitter:creator" content="@bluekirin93">
    
    
        
    
    
        <meta property="og:image" content="https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png"/>
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/style-7psn7jtnqx8dcatt1chsgye58vhpeeqkf8gzcb5iijzope7gwcvezy8gigh2.min.css">

    <!--STYLES END-->
    
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-111553531-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-111553531-1');
    </script>


    
    <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?6e8b0c627bf164f809ee4346796b1952";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
    </script>


    
        
    
    <style>
        ::-moz-selection { /* Code for Firefox */
          background: #FFBFBF;
        }
        
        ::selection {
          background: #FFBFBF;
        }
    </style><!-- hexo-inject:begin --><!-- hexo-inject:end -->
    
</head>

    <body>
        <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="blog">
            <!-- Define author's picture -->


    
        
            
        
    

<header id="header" data-behavior="4">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Alan Lee
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="打开链接: /#about"
            >
        
        
            <img class="header-picture" src="https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png" alt="作者的图片"/>
        
        </a>
    
</header>

            <!-- Define author's picture -->



        
    

<nav id="sidebar" data-behavior="4">
    <div class="sidebar-container">
        
            <div class="sidebar-profile">
                <a
                    href="/#about"
                    aria-label="阅读有关作者的更多信息"
                >
                    <img class="sidebar-profile-picture" src="https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png" alt="作者的图片"/>
                </a>
                <h4 class="sidebar-profile-name">Alan Lee</h4>
                
                    <h5 class="sidebar-profile-bio"><p>NLP and Python developer, sometimes datavis, he/him. Stick to what you believe.</p>
</h5>
                
            </div>
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="首页"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">首页</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="标签"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">标签</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="归档"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">归档</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/about"
                            
                            rel="noopener"
                            title="关于"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">关于</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/secsilm"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/bluekirin93"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="mailto:secsilm@outlook.com"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="邮箱"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">邮箱</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="4"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            理解编辑距离
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2020-05-22T21:34:06+08:00">
	
		    2020 年 5 月 22 日
    	
    </time>
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <h1 id="table-of-contents">目录</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E6%B3%95"><span class="toc-text">解法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9A%B4%E5%8A%9B%E6%B3%95"><span class="toc-text">暴力法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92%E6%B3%95"><span class="toc-text">动态规划法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%98%E6%9C%89"><span class="toc-text">还有</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reference"><span class="toc-text">Reference</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#END"><span class="toc-text">END</span></a></li></ol>
<p>顾名思义，编辑距离（Edit distance）是一种距离，用于衡量两个字符串之间的远近程度，方式是一个字符串<strong>至少</strong>需要多少次基础变换才能变成另一个字符串，可应用在拼写检查、判断 DNA 相似度等场景中。根据可操作的基础变换不同，可分为以下几种：<br><span id="more"></span></p>
<ul>
<li>莱文斯坦距离（Levenshtein distance）：最常见的编辑距离，基础变换包括插入、删除和替换。但是需要注意一点的是，当每种变换发生时，产生的距离（或者称为代价）并不一定是 1，例如斯坦福大学关于最小编辑距离的课件中，一次替换产生的距离就可能是 2。</li>
<li><a href="https://alanlee.fun/2020/04/07/understanding-lcs/">最长公共子序列（LCS）</a>距离：基础变换包括插入和删除。</li>
<li><a href="https://en.wikipedia.org/wiki/Jaro_distance">Jaro 距离</a>：基础变换只包括转置，即交换两个字符的位置，AB -&gt; BA。</li>
<li><a href="https://zh.wikipedia.org/wiki/%E6%B1%89%E6%98%8E%E8%B7%9D%E7%A6%BB">汉明距离</a>：基础变换只包括替换，所以只能应用于两个字符串长度相等的情况。</li>
</ul>
<p>本文只讨论最常见的第一种形式，莱文斯坦距离。</p>
<h2 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h2><p>解法有两种：暴力法和动态规划法。</p>
<h3 id="暴力法"><a href="#暴力法" class="headerlink" title="暴力法"></a>暴力法</h3><p>暴力法思想很直接，采用递归思想，直接取所需插入、删除和替换操作的最小值。</p>
<p>代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">brute_force</span>(<span class="params">s1, s2</span>):</span><br><span class="line">    m = <span class="built_in">len</span>(s1)</span><br><span class="line">    n = <span class="built_in">len</span>(s2)</span><br><span class="line">    <span class="keyword">if</span> m == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> n</span><br><span class="line">    <span class="keyword">if</span> n == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">return</span> m</span><br><span class="line">    <span class="keyword">if</span> s1[m - <span class="number">1</span>] == s2[n - <span class="number">1</span>]:</span><br><span class="line">        c = <span class="number">0</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        c = <span class="number">1</span>  <span class="comment"># 一次替换产生的距离，也可以定义成 2</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">min</span>(</span><br><span class="line">        brute_force(s1, s2[: n - <span class="number">1</span>]) + <span class="number">1</span>,  <span class="comment"># 插入</span></span><br><span class="line">        brute_force(s1[: m - <span class="number">1</span>], s2) + <span class="number">1</span>,  <span class="comment"># 删除</span></span><br><span class="line">        brute_force(s1[: m - <span class="number">1</span>], s2[: n - <span class="number">1</span>]) + c,  <span class="comment"># 替换</span></span><br><span class="line">    )</span><br></pre></td></tr></table></figure>
<p>缺点就是耗时很大，这是由于存在大量的重复计算。有多大量？我举一个例子，<code>brute_force(&#39;geek&#39;, &#39;gesek&#39;)</code>，下图是函数调用次数排行榜：</p>
<div> <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script> <script src="https://cdn.plot.ly/plotly-latest.min.js"></script> <div id="59239f93-7e0e-49eb-999a-491d203e5eeb" class="plotly-graph-div" style="height:100%; width:100%;"></div> <script type="text/javascript"> window.PLOTLYENV=window.PLOTLYENV || {}; if (document.getElementById("59239f93-7e0e-49eb-999a-491d203e5eeb")) { Plotly.newPlot( '59239f93-7e0e-49eb-999a-491d203e5eeb', [{"type": "bar", "x": ["brute_force('', 'g')", "brute_force('g', '')", "brute_force('g', 'g')", "brute_force('', '')", "brute_force('', 'ge')", "brute_force('g', 'ge')", "brute_force('ge', '')", "brute_force('ge', 'g')", "brute_force('', 'ges')", "brute_force('ge', 'ge')", "brute_force('g', 'ges')", "brute_force('ge', 'ges')", "brute_force('gee', '')", "brute_force('gee', 'g') ", "brute_force('', 'gese')", "brute_force('gee', 'ge')", "brute_force('g', 'gese')", "brute_force('gee', 'ges')", "brute_force('ge', 'gese')", "brute_force('gee', 'gese')", "brute_force('geek', 'gesek')", "brute_force('geek', 'gese')", "brute_force('geek', 'ges')", "brute_force('geek', 'ge')", "brute_force('geek', 'g')", "brute_force('geek', '')", "brute_force('gee', 'gesek')", "brute_force('ge', 'gesek')", "brute_force('g', 'gesek')", "brute_force('', 'gesek')"], "y": [192, 170, 129, 129, 88, 63, 50, 41, 32, 25, 25, 13, 10, 9, 8, 7, 7, 5, 5, 3, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]}], {"template": {"data": {"bar": [{"error_x": {"color": "#2a3f5f"}, "error_y": {"color": "#2a3f5f"}, "marker": {"line": {"color": "#E5ECF6", "width": 0.5}}, "type": "bar"}], "barpolar": [{"marker": {"line": {"color": "#E5ECF6", "width": 0.5}}, "type": "barpolar"}], "carpet": [{"aaxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "baxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "type": "carpet"}], "choropleth": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "choropleth"}], "contour": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "contour"}], "contourcarpet": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "contourcarpet"}], "heatmap": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "heatmap"}], "heatmapgl": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "heatmapgl"}], "histogram": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "histogram"}], "histogram2d": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "histogram2d"}], "histogram2dcontour": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "histogram2dcontour"}], "mesh3d": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "mesh3d"}], "parcoords": [{"line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "parcoords"}], "pie": [{"automargin": true, "type": "pie"}], "scatter": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatter"}], "scatter3d": [{"line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatter3d"}], "scattercarpet": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattercarpet"}], "scattergeo": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattergeo"}], "scattergl": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattergl"}], "scattermapbox": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattermapbox"}], "scatterpolar": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterpolar"}], "scatterpolargl": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterpolargl"}], "scatterternary": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterternary"}], "surface": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "surface"}], "table": [{"cells": {"fill": {"color": "#EBF0F8"}, "line": {"color": "white"}}, "header": {"fill": {"color": "#C8D4E3"}, "line": {"color": "white"}}, "type": "table"}]}, "layout": {"annotationdefaults": {"arrowcolor": "#2a3f5f", "arrowhead": 0, "arrowwidth": 1}, "coloraxis": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "colorscale": {"diverging": [[0, "#8e0152"], [0.1, "#c51b7d"], [0.2, "#de77ae"], [0.3, "#f1b6da"], [0.4, "#fde0ef"], [0.5, "#f7f7f7"], [0.6, "#e6f5d0"], [0.7, "#b8e186"], [0.8, "#7fbc41"], [0.9, "#4d9221"], [1, "#276419"]], "sequential": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "sequentialminus": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}, "colorway": ["#636efa", "#EF553B", "#00cc96", "#ab63fa", "#FFA15A", "#19d3f3", "#FF6692", "#B6E880", "#FF97FF", "#FECB52"], "font": {"color": "#2a3f5f"}, "geo": {"bgcolor": "white", "lakecolor": "white", "landcolor": "#E5ECF6", "showlakes": true, "showland": true, "subunitcolor": "white"}, "hoverlabel": {"align": "left"}, "hovermode": "closest", "mapbox": {"style": "light"}, "paper_bgcolor": "white", "plot_bgcolor": "#E5ECF6", "polar": {"angularaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "bgcolor": "#E5ECF6", "radialaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "scene": {"xaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}, "yaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}, "zaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}}, "shapedefaults": {"line": {"color": "#2a3f5f"}}, "ternary": {"aaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "baxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "bgcolor": "#E5ECF6", "caxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "title": {"x": 0.05}, "xaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "zerolinewidth": 2}, "yaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "zerolinewidth": 2}}}, "title": {"text": "\u51fd\u6570\u8c03\u7528\u6b21\u6570\u6392\u884c\uff0c\u4ee5 brute_force('geek', 'gesek') \u4e3a\u4f8b"}, "xaxis": {"title": {"text": "\u51fd\u6570"}}, "yaxis": {"title": {"text": "\u8c03\u7528\u6b21\u6570"}}}, {"responsive": true} ) }; </script> </div>

<p>可以看到，排第一的 <code>brute_force(&#39;&#39;, &#39;g&#39;)</code> 被调用了 192 次，<code>brute_force()</code> 总计被调用了 1021 次，这还仅仅是对两个长度分别为 4、5 的字符串进行的比较，其耗时程度可见一斑。</p>
<h3 id="动态规划法"><a href="#动态规划法" class="headerlink" title="动态规划法"></a>动态规划法</h3><p>动态规划法是对暴力法的改进，把所有的重复计算都干掉，空间换时间，将计算过的值存储到一个矩阵中，后面用的时候就直接取。</p>
<p>代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">levenshtein_distance_dp</span>(<span class="params">s1, s2</span>):</span><br><span class="line">    m = <span class="built_in">len</span>(s1) + <span class="number">1</span></span><br><span class="line">    n = <span class="built_in">len</span>(s2) + <span class="number">1</span></span><br><span class="line">    dp_table = np.zeros((m, n))</span><br><span class="line">    <span class="comment"># 初始化</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(m):</span><br><span class="line">        dp_table[i, <span class="number">0</span>] = i</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n):</span><br><span class="line">        dp_table[<span class="number">0</span>, i] = i</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, m):</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, n):</span><br><span class="line">            dp_table[i, j] = <span class="built_in">min</span>(</span><br><span class="line">                dp_table[i - <span class="number">1</span>, j] + <span class="number">1</span>,</span><br><span class="line">                dp_table[i, j - <span class="number">1</span>] + <span class="number">1</span>,</span><br><span class="line">                dp_table[i - <span class="number">1</span>, j - <span class="number">1</span>] + (<span class="number">1</span> <span class="keyword">if</span> s1[i - <span class="number">1</span>] != s2[j - <span class="number">1</span>] <span class="keyword">else</span> <span class="number">0</span>),</span><br><span class="line">            )</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">int</span>(dp_table[m - <span class="number">2</span>, n - <span class="number">2</span>])</span><br></pre></td></tr></table></figure>
<p>初始化为什么是那样呢？想象一下，假设我们想计算 geek 和 gesek 之间的距离，即从 geek 到 gesek 至少需要多少步，记着这一点。和其他动态规划问题一样，首先会有一个 DP 表：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>“”</th>
<th>g</th>
<th>e</th>
<th>e</th>
<th>k</th>
</tr>
</thead>
<tbody>
<tr>
<td>“”</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>g</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>e</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>s</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>e</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>k</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>从第一个单元开始，先看第一列，<code>&quot;&quot;</code> -&gt; <code>&quot;&quot;</code> 所需步骤为 0（因为相等），所以第一个填 0。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>“”</th>
<th>g</th>
<th>e</th>
<th>e</th>
<th>k</th>
</tr>
</thead>
<tbody>
<tr>
<td>“”</td>
<td>0</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>g</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>e</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>s</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>e</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>k</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>第二行第一列，<code>&quot;&quot;</code> -&gt; <code>g</code>，需要插入一个字符 <code>g</code>，因此所需步骤为 1：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>“”</th>
<th>g</th>
<th>e</th>
<th>e</th>
<th>k</th>
</tr>
</thead>
<tbody>
<tr>
<td>“”</td>
<td>0</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>g</td>
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>e</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>s</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>e</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>k</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>第三行第一列，<code>&quot;&quot;</code> -&gt; <code>ge</code>，需要插入两个字符 <code>ge</code>，因此需要两个步骤：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>“”</th>
<th>g</th>
<th>e</th>
<th>e</th>
<th>k</th>
</tr>
</thead>
<tbody>
<tr>
<td>“”</td>
<td>0</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>g</td>
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>e</td>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>s</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>e</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>k</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>以此类推，得到第一列：</p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>“”</th>
<th>g</th>
<th>e</th>
<th>e</th>
<th>k</th>
</tr>
</thead>
<tbody>
<tr>
<td>“”</td>
<td>0</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>g</td>
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>e</td>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>s</td>
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>e</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>k</td>
<td>5</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>对于第一行，同样的道理，只不过是删除操作，例如 <code>ge</code> -&gt; <code>&quot;&quot;</code> 需要删除两个字符，即两步删除操作。</p>
<div class="table-container">
<table>
<thead>
<tr>
<th></th>
<th>“”</th>
<th>g</th>
<th>e</th>
<th>e</th>
<th>k</th>
</tr>
</thead>
<tbody>
<tr>
<td>“”</td>
<td>0</td>
<td>1</td>
<td>2</td>
<td>3</td>
<td>4</td>
</tr>
<tr>
<td>g</td>
<td>1</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>e</td>
<td>2</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>s</td>
<td>3</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>e</td>
<td>4</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>k</td>
<td>5</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<p>这就完成了初始化过程。从过程中我们可以看出，其实对于一个单元格 $T[i,j]$ 来说，其左上角 $T[i-1, j-1]$ 是最小替换步数，正上方 $T[i-1, j]$ 是最小删除步数，左边 $T[i, j-1]$ 是最小插入步数，然后我们只需根据条件取最小即可，表格剩余部分就是这么推出来的。</p>
<p>至于这个改进有多猛？我做了个实验：假设 s1 和 s2 长度相等，依次测试长度为 1-15 时的不同方法耗时（单位为秒）。结果看下图：</p>
<div><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_SVG"></script><script>window.MathJax&&MathJax.Hub.Config({SVG:{font:"STIX-Web"}})</script><script>window.PlotlyConfig={MathJaxConfig:"local"}</script><script src=https://cdn.plot.ly/plotly-latest.min.js></script><div class=plotly-graph-div id=47822e12-6bf7-4034-89bb-93276a65ac63 style=height:100%;width:100%></div><script>window.PLOTLYENV=window.PLOTLYENV||{},document.getElementById("47822e12-6bf7-4034-89bb-93276a65ac63")&&Plotly.newPlot("47822e12-6bf7-4034-89bb-93276a65ac63",[{name:"$e^x$",type:"scatter",visible:"legendonly",x:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49],y:[-1.4041050229628826,-1.404099479247733,-1.4040688655716456,-1.403899809778134,-1.4029662446212399,-1.3978108820982353,-1.369341778953872,-1.2121288127991572,-.3439624851901626,4.450252590253111,30.925016075850237,177.12477778626962,984.4736455414643,5442.840654077712,30062.97350701879,166021.03629904485,916812.8759926461,5062858.906471704,27958283.14798489,154392106.44499743,852588894.8022019,4708192898.227395,25999729151.503525,143576512353.78476,792862678638.2445,4378370924795.0557,24178375993170.7,133518579331962.69,737320448315482.4,4071653894343071.5,0x4fe1a313082abc,12416523242133e4,0x983fc6b2008cf00,0x348c13e0c5549a00,2090950410702063e4,0x6426d97e069c60000,6376360821999217e5,3521173789760538e6,19444735333859544e6,107378321769673e9,59296790561061566e7,3274505796788732e9,18082577677052361e9,9985617242372798e10,551428858716934e12,30451175810700893e11,16815842943218446e12,9286097050860677e13,51279973730237024e13]},{name:"暴力法",type:"scatter",x:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],y:[11046882718801497e-21,2444582059979439e-20,.00010851491242647171,.0005018208175897597,.002650056965649128,.013551163021475077,.05805866373702884,.2310628788545728,1.0091003910638392,5.708547709044068,30.9778117639944,173.14135673409328,969.083311538212,5448.7964361710465,30062.422973840028]},{name:"动态规划法",type:"scatter",x:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],y:[6143515929579735e-20,3168964758515358e-20,56452117860317223e-21,8851895108819008e-20,.00012062489986419678,.00016834121197462082,.0001949728466570377,.00019124336540699005,.0001911451108753681,.0002096588723361492,.0004734676331281662,.00037705898284912115,.0004319921135902405,.00044900970533490186,.0006017372943460941]}],{template:{data:{bar:[{error_x:{color:"#2a3f5f"},error_y:{color:"#2a3f5f"},marker:{line:{color:"#E5ECF6",width:.5}},type:"bar"}],barpolar:[{marker:{line:{color:"#E5ECF6",width:.5}},type:"barpolar"}],carpet:[{aaxis:{endlinecolor:"#2a3f5f",gridcolor:"white",linecolor:"white",minorgridcolor:"white",startlinecolor:"#2a3f5f"},baxis:{endlinecolor:"#2a3f5f",gridcolor:"white",linecolor:"white",minorgridcolor:"white",startlinecolor:"#2a3f5f"},type:"carpet"}],choropleth:[{colorbar:{outlinewidth:0,ticks:""},type:"choropleth"}],contour:[{colorbar:{outlinewidth:0,ticks:""},colorscale:[[0,"#0d0887"],[.1111111111111111,"#46039f"],[.2222222222222222,"#7201a8"],[.3333333333333333,"#9c179e"],[.4444444444444444,"#bd3786"],[.5555555555555556,"#d8576b"],[.6666666666666666,"#ed7953"],[.7777777777777778,"#fb9f3a"],[.8888888888888888,"#fdca26"],[1,"#f0f921"]],type:"contour"}],contourcarpet:[{colorbar:{outlinewidth:0,ticks:""},type:"contourcarpet"}],heatmap:[{colorbar:{outlinewidth:0,ticks:""},colorscale:[[0,"#0d0887"],[.1111111111111111,"#46039f"],[.2222222222222222,"#7201a8"],[.3333333333333333,"#9c179e"],[.4444444444444444,"#bd3786"],[.5555555555555556,"#d8576b"],[.6666666666666666,"#ed7953"],[.7777777777777778,"#fb9f3a"],[.8888888888888888,"#fdca26"],[1,"#f0f921"]],type:"heatmap"}],heatmapgl:[{colorbar:{outlinewidth:0,ticks:""},colorscale:[[0,"#0d0887"],[.1111111111111111,"#46039f"],[.2222222222222222,"#7201a8"],[.3333333333333333,"#9c179e"],[.4444444444444444,"#bd3786"],[.5555555555555556,"#d8576b"],[.6666666666666666,"#ed7953"],[.7777777777777778,"#fb9f3a"],[.8888888888888888,"#fdca26"],[1,"#f0f921"]],type:"heatmapgl"}],histogram:[{marker:{colorbar:{outlinewidth:0,ticks:""}},type:"histogram"}],histogram2d:[{colorbar:{outlinewidth:0,ticks:""},colorscale:[[0,"#0d0887"],[.1111111111111111,"#46039f"],[.2222222222222222,"#7201a8"],[.3333333333333333,"#9c179e"],[.4444444444444444,"#bd3786"],[.5555555555555556,"#d8576b"],[.6666666666666666,"#ed7953"],[.7777777777777778,"#fb9f3a"],[.8888888888888888,"#fdca26"],[1,"#f0f921"]],type:"histogram2d"}],histogram2dcontour:[{colorbar:{outlinewidth:0,ticks:""},colorscale:[[0,"#0d0887"],[.1111111111111111,"#46039f"],[.2222222222222222,"#7201a8"],[.3333333333333333,"#9c179e"],[.4444444444444444,"#bd3786"],[.5555555555555556,"#d8576b"],[.6666666666666666,"#ed7953"],[.7777777777777778,"#fb9f3a"],[.8888888888888888,"#fdca26"],[1,"#f0f921"]],type:"histogram2dcontour"}],mesh3d:[{colorbar:{outlinewidth:0,ticks:""},type:"mesh3d"}],parcoords:[{line:{colorbar:{outlinewidth:0,ticks:""}},type:"parcoords"}],pie:[{automargin:!0,type:"pie"}],scatter:[{marker:{colorbar:{outlinewidth:0,ticks:""}},type:"scatter"}],scatter3d:[{line:{colorbar:{outlinewidth:0,ticks:""}},marker:{colorbar:{outlinewidth:0,ticks:""}},type:"scatter3d"}],scattercarpet:[{marker:{colorbar:{outlinewidth:0,ticks:""}},type:"scattercarpet"}],scattergeo:[{marker:{colorbar:{outlinewidth:0,ticks:""}},type:"scattergeo"}],scattergl:[{marker:{colorbar:{outlinewidth:0,ticks:""}},type:"scattergl"}],scattermapbox:[{marker:{colorbar:{outlinewidth:0,ticks:""}},type:"scattermapbox"}],scatterpolar:[{marker:{colorbar:{outlinewidth:0,ticks:""}},type:"scatterpolar"}],scatterpolargl:[{marker:{colorbar:{outlinewidth:0,ticks:""}},type:"scatterpolargl"}],scatterternary:[{marker:{colorbar:{outlinewidth:0,ticks:""}},type:"scatterternary"}],surface:[{colorbar:{outlinewidth:0,ticks:""},colorscale:[[0,"#0d0887"],[.1111111111111111,"#46039f"],[.2222222222222222,"#7201a8"],[.3333333333333333,"#9c179e"],[.4444444444444444,"#bd3786"],[.5555555555555556,"#d8576b"],[.6666666666666666,"#ed7953"],[.7777777777777778,"#fb9f3a"],[.8888888888888888,"#fdca26"],[1,"#f0f921"]],type:"surface"}],table:[{cells:{fill:{color:"#EBF0F8"},line:{color:"white"}},header:{fill:{color:"#C8D4E3"},line:{color:"white"}},type:"table"}]},layout:{annotationdefaults:{arrowcolor:"#2a3f5f",arrowhead:0,arrowwidth:1},coloraxis:{colorbar:{outlinewidth:0,ticks:""}},colorscale:{diverging:[[0,"#8e0152"],[.1,"#c51b7d"],[.2,"#de77ae"],[.3,"#f1b6da"],[.4,"#fde0ef"],[.5,"#f7f7f7"],[.6,"#e6f5d0"],[.7,"#b8e186"],[.8,"#7fbc41"],[.9,"#4d9221"],[1,"#276419"]],sequential:[[0,"#0d0887"],[.1111111111111111,"#46039f"],[.2222222222222222,"#7201a8"],[.3333333333333333,"#9c179e"],[.4444444444444444,"#bd3786"],[.5555555555555556,"#d8576b"],[.6666666666666666,"#ed7953"],[.7777777777777778,"#fb9f3a"],[.8888888888888888,"#fdca26"],[1,"#f0f921"]],sequentialminus:[[0,"#0d0887"],[.1111111111111111,"#46039f"],[.2222222222222222,"#7201a8"],[.3333333333333333,"#9c179e"],[.4444444444444444,"#bd3786"],[.5555555555555556,"#d8576b"],[.6666666666666666,"#ed7953"],[.7777777777777778,"#fb9f3a"],[.8888888888888888,"#fdca26"],[1,"#f0f921"]]},colorway:["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],font:{color:"#2a3f5f"},geo:{bgcolor:"white",lakecolor:"white",landcolor:"#E5ECF6",showlakes:!0,showland:!0,subunitcolor:"white"},hoverlabel:{align:"left"},hovermode:"closest",mapbox:{style:"light"},paper_bgcolor:"white",plot_bgcolor:"#E5ECF6",polar:{angularaxis:{gridcolor:"white",linecolor:"white",ticks:""},bgcolor:"#E5ECF6",radialaxis:{gridcolor:"white",linecolor:"white",ticks:""}},scene:{xaxis:{backgroundcolor:"#E5ECF6",gridcolor:"white",gridwidth:2,linecolor:"white",showbackground:!0,ticks:"",zerolinecolor:"white"},yaxis:{backgroundcolor:"#E5ECF6",gridcolor:"white",gridwidth:2,linecolor:"white",showbackground:!0,ticks:"",zerolinecolor:"white"},zaxis:{backgroundcolor:"#E5ECF6",gridcolor:"white",gridwidth:2,linecolor:"white",showbackground:!0,ticks:"",zerolinecolor:"white"}},shapedefaults:{line:{color:"#2a3f5f"}},ternary:{aaxis:{gridcolor:"white",linecolor:"white",ticks:""},baxis:{gridcolor:"white",linecolor:"white",ticks:""},bgcolor:"#E5ECF6",caxis:{gridcolor:"white",linecolor:"white",ticks:""}},title:{x:.05},xaxis:{automargin:!0,gridcolor:"white",linecolor:"white",ticks:"",title:{standoff:15},zerolinecolor:"white",zerolinewidth:2},yaxis:{automargin:!0,gridcolor:"white",linecolor:"white",ticks:"",title:{standoff:15},zerolinecolor:"white",zerolinewidth:2}}},title:{text:"编辑距离：暴力法 VS 动态规划法"},xaxis:{title:{text:"字符串长度"}},yaxis:{title:{text:"所需时间/s"}}},{responsive:!0})</script></div>

<p>可以看到暴力法是指数级增长，当字符串长度为 15 时，暴力法耗时已经达到 30000 秒，约为 8.3 小时，动态规划法仅耗时万分之六秒。而当长度翻倍变为 30 时，暴力法预计至少需要 1.27 亿年才能算万，具体秒数可以点开图右上角灰色的 $e^x$ 来查看暴力法耗时的模拟曲线。该曲线并不是 $y=e^x$ 的曲线，具体公式如下：</p>
<script type="math/tex; mode=display">y = 2.21990087\times10^{-7} e^{1.70878196x} - 1.40410625</script><h2 id="还有"><a href="#还有" class="headerlink" title="还有"></a>还有</h2><p>一些没说到的：</p>
<ul>
<li>有时候只求出编辑距离可能还不够，还需要回溯，对两个字符串进行对齐。</li>
<li>Weighted Edit Distance，即加权编辑距离，这其实是在初始化和后续计算时加入了一些权重作为先验，一步操作产生的距离不再是 1 或者 2。</li>
<li>其他变种……</li>
</ul>
<p>这些等有时间再说吧。</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a href="https://web.stanford.edu/class/cs124/lec/med.pdf">Minimum Edit Distance</a></li>
<li><a href="https://nlp.stanford.edu/IR-book/html/htmledition/edit-distance-1.html">Edit distance</a></li>
<li><a href="https://dbresearch.uni-salzburg.at/teaching/2016ws/ssdb/ssdb_02-handout-1x1.pdf">Similarity Search - The String Edit Distance - Nikolaus Augsten</a></li>
<li><a href="https://zh.wikipedia.org/wiki/%E7%B7%A8%E8%BC%AF%E8%B7%9D%E9%9B%A2">编辑距离 - 维基百科，自由的百科全书</a></li>
</ul>
<h2 id="END"><a href="#END" class="headerlink" title="END"></a>END</h2>
            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">标签</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/NLP/" rel="tag">NLP</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/06/04/count-lstm-params/"
                    data-tooltip="计算 LSTM 的参数量"
                    aria-label="上一篇: 计算 LSTM 的参数量"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/05/22/find-subsequences/"
                    data-tooltip="寻找所有公共子序列并返回索引"
                    aria-label="下一篇: 寻找所有公共子序列并返回索引"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://alanlee.fun/2020/05/22/understanding-edit-distance/"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://alanlee.fun/2020/05/22/understanding-edit-distance/"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://alanlee.fun/2020/05/22/understanding-edit-distance/"
                    title="分享到 Weibo"
                    aria-label="分享到 Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Kommentieren"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="目录">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2025 Alan Lee. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/06/04/count-lstm-params/"
                    data-tooltip="计算 LSTM 的参数量"
                    aria-label="上一篇: 计算 LSTM 的参数量"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">上一篇</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/05/22/find-subsequences/"
                    data-tooltip="寻找所有公共子序列并返回索引"
                    aria-label="下一篇: 寻找所有公共子序列并返回索引"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">下一篇</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Diesen Beitrag teilen"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://alanlee.fun/2020/05/22/understanding-edit-distance/"
                    title="分享到 Facebook"
                    aria-label="分享到 Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://alanlee.fun/2020/05/22/understanding-edit-distance/"
                    title="分享到 Twitter"
                    aria-label="分享到 Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="http://service.weibo.com/share/share.php?&amp;title=https://alanlee.fun/2020/05/22/understanding-edit-distance/"
                    title="分享到 Weibo"
                    aria-label="分享到 Weibo"
                >
                    <i class="fab fa-weibo" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Kommentieren"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#table-of-contents" aria-label="目录">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="4">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://alanlee.fun/2020/05/22/understanding-edit-distance/"
                        aria-label="分享到 Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>分享到 Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://alanlee.fun/2020/05/22/understanding-edit-distance/"
                        aria-label="分享到 Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>分享到 Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="http://service.weibo.com/share/share.php?&amp;title=https://alanlee.fun/2020/05/22/understanding-edit-distance/"
                        aria-label="分享到 Weibo"
                    >
                        <i class="fab fa-weibo" aria-hidden="true"></i><span>分享到 Weibo</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


    
        
    

<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <img id="about-card-picture" src="https://s2.loli.net/2021/12/19/Cri1WMHedxFm3pv.png" alt="作者的图片"/>
        
            <h4 id="about-card-name">Alan Lee</h4>
        
            <div id="about-card-bio"><p>NLP and Python developer, sometimes datavis, he/him. Stick to what you believe.</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
            <div id="about-card-location">
                <i class="fa fa-map-marker-alt"></i>
                <br/>
                北京
            </div>
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('https://s2.loli.net/2021/12/16/5nuJTFWg2QACLDf.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-bzxavs3xgrmr4dhl4zkhmrmrloaxiygxfjiarsltzu6y5bjgj5wpgsicnjdf.min.js"></script>

<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'https://alanlee.fun/2020/05/22/understanding-edit-distance/';
              
            this.page.identifier = '2020/05/22/understanding-edit-distance/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'secsilm';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    




    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>
